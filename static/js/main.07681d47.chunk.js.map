{"version":3,"sources":["pages/order/order.module.css","pages/profile/profile.module.css","components/feed-item/feed-item.module.css","components/order/order.module.css","pages/feed/feed.module.css","components/app-header/app-header.tsx","images/close.svg","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/done.svg","hooks/hooks.ts","components/modal/order-details.tsx","components/ingredient-details/ingredient-details.tsx","components/product/product.tsx","components/product-list/product-list.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-item/burger-item.tsx","services/actions/index.ts","config.tsx","utils/cookie.ts","utils/api-requests.ts","components/burger-constructor/burger-constructor.tsx","services/actions/order.ts","services/actions/auth.ts","pages/login/login.tsx","pages/register/register.tsx","pages/forgot-password/forgot-password.tsx","pages/reset-password/reset-password.tsx","pages/profile/links.tsx","components/protected-route/protected-route.tsx","utils/fdate.ts","components/feed-item/feed-item.tsx","services/actions/wsActions.ts","components/orders/orders.tsx","pages/profile/profile.tsx","pages/feed/feed.tsx","components/order/order.tsx","pages/order/order.tsx","components/app/app.tsx","services/middleware/socketMiddleware.ts","services/actions/ingredients.ts","reportWebVitals.ts","services/initialState.ts","utils/random-key.ts","services/reducers/auth.ts","services/reducers/order.ts","services/reducers/wsReducer.ts","services/reducers/rootReducer.ts","services/store.ts","index.tsx","components/modal/modal.module.css","components/app-header/index.module.css","components/burger-constructor/index.module.css","components/burger-ingredients/burger.module.css","components/ingredient-details/ingredient-details.module.css","pages/login/login.module.css","pages/register/register.module.css","pages/forgot-password/forgot-password.module.css","pages/reset-password/reset-password.module.css","components/app/app.module.css","components/product-list/index.module.css","components/product/product.module.css","components/modal-overlay/modal-overlay.module.css","components/burger-item/item.module.css","components/orders/orders.module.css"],"names":["module","exports","AppHeader","pathname","useLocation","className","css","side","box1","exact","to","inmenu","type","centr","inmenu_logo","box3","ModalOverlay","props","modal_overlay","onClick","Modal","useEffect","escFunc","e","key","onClose","document","addEventListener","removeEventListener","portalContent","modal_content","stopPropagation","modal_content_caption","header","src","closeImg","alt","close_button","children","ReactDOM","createPortal","getElementById","useDispatch","dispatchHook","useSelector","selectorHook","OrderDetails","orderObj","store","order","number","order_details","identificator_size","imgDone","bottom_text","IngredientDetails","history","useHistory","id","location","slice","ingredients","ingr","data","item","useState","ingredient","setIngredient","ingredientId","console","log","find","el","_id","product_portal","image","name","w480","product_energy","calories","proteins","fat","carbohydrates","Product","modalIsActive","setModalActive","useDrag","apiData","collect","monitor","isDrag","isDragging","dragRef","opacity","burgerIngredients","counts","bun","count","productContent","product","ref","style","inn_flex","price","size","goBack","ProductList","subRef","product_list","map","itm","state","background","product_link","BurgerIngredients","React","current","setCurrent","setTab","tab","element","scrollIntoView","behavior","listBun","filter","listMain","listSauce","primaryRef","useRef","bunRef","sauceRef","mainRef","querySelector","column","fl","value","active","scrollzone","onScroll","bunDistance","Math","abs","getBoundingClientRect","top","sauceDistance","mainDistance","minDistance","min","currentHeader","prevState","BurgerItem","index","isLocked","deleteFunc","moveFunc","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverRect","hoverMidY","bottom","clientOffset","getClientOffset","hoverClientY","y","drop","drag","burger_item","text","thumbnail","handleClose","INGREDIENTS_LOAD","ORDER_LOAD","GET_ORDER","GET_ORDER_FAILED","GET_ORDER_SUCCESS","CLEAR_ORDER","INGREDIENTS_CHOOSE","INGREDIENT_DELETE","COUNTER_UP","COUNTER_DOWN","MOVE_INGREDIENT","RESET_CONSTRUCTOR","protHttp","protWss","domain","apiUrl","config","loginUrl","registerUrl","logoutUrl","tokenUrl","userUrl","feedsUrl","feedsUserUrl","setCookie","options","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","cookie","delCookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","checkResponse","response","ok","json","Promise","reject","status","refreshTokenRequest","fetch","method","headers","body","JSON","stringify","token","localStorage","getItem","then","myFetch","url","params","authToken","Authorization","myFetch2","cashPr","fetchWithRefreshToken2","callback","res","catch","err","message","setItem","refreshToken","accessToken","split","removeItem","reload","BurgerConstructor","dropMsgCls","onDropHandler","dispatch","contentItems","hasToken","itemId","isHover","isOver","canDrop","dropTarget","drop_msg","column_active","no_drop_msg","moveItem","useCallback","dragIdx","idx","toIndex","fromIndex","list","i","productId","typeItem","total","items","summ","orderSumm","ingredientsArr","push","ingredientsIdsArr","result","success","orderNumber","error","alert","LOGIN","REGISTER_SUCCESS","REGISTER_FAILED","LOGOUT","REFRESH_TOKEN_REQUEST","REFRESH_TOKEN_SUCCESS","REFRESH_TOKEN_FAILED","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_FAILED","registerAction","email","password","registerRequest","user","loginAction","loginRequest","logoutAction","getUserAction","updateUserAction","LoginPage","setState","handleChange","target","login_box","login_fields","onSubmit","preventDefault","from","placeholder","onChange","login_text","RegisterPage","formData","setFormData","fieldChange","reg_box","reg_fields","reg_text","ForgotPasswordPage","setEmail","auth","authorized","event","ResetPasswordPage","setPassword","setToken","Links","s","nav_list","link","activeClassName","link_active","ProtectedRoute","rest","formatDate","date","today","targetDate","hours","getHours","minutes","getMinutes","setHours","dif","timeZone","getTimezoneOffset","FeedItem","showStatus","orderIngredients","setOrderIngredients","setPrice","images","setImages","setCount","length","totalPrice","targetIngredients","forEach","targetIngredient","targetImages","styles","createdAt","color","footer","left","showCount","imageWrapper","zIndex","coast","WS_CONNECTION_START","WS_CONNECTION_CLOSE","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","WS_SEND_MESSAGE","Orders","messages","orders","setOrders","payload","feed","Boolean","ProfilePage","emptyState","defaultState","setDefaultState","handleInputChange","profile_main","profile_col","path","profile_form","icon","FeedPage","setTotal","totalToday","setTotalToday","createdNumbers","setCreatedNumbers","doneNumbers","setDoneNumbers","splitArr","arr","reduce","c","created","done","content","feedInfo","statusesWrapper","statuses","statusesColumns","doneNumbersColumn","statusesColumn","createdNumbersColumn","Order","orderRequest","orderFailed","useParams","getOrder","orderIngredientsSet","Set","orderIngredientsList","add","orderInfo","orderHeader","getStatus","orderWrapper","info","image_mobile","OrderPage","orderPage","wsActions","App","ModalSwitch","modalActive","action","main_rect","main_columns","DndProvider","backend","HTML5Backend","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","portal","RandomKey","charset","retVal","n","charAt","floor","random","login","getUserRequest","tokenIsGood","wsConnected","rootReducer","combineReducers","chosenItem","splice","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","socket","next","WebSocket","onopen","onerror","onmessage","parsedData","parse","onclose","send","createStore","render","StrictMode"],"mappings":"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","file":"static/js/main.07681d47.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderPage\":\"order_orderPage__2aRo1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile_main\":\"profile_profile_main__3JOrN\",\"link\":\"profile_link__3j86g\",\"profile_col\":\"profile_profile_col__YK1hc\",\"nav\":\"profile_nav__1p36o\",\"nav_list\":\"profile_nav_list__1AEUm\",\"link_active\":\"profile_link_active__1IsYz\",\"profile_form\":\"profile_profile_form__3NQ14\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"feed-item_order__2fZs9\",\"header\":\"feed-item_header__1YfMN\",\"coast\":\"feed-item_coast__3Cuip\",\"name\":\"feed-item_name__34Q7q\",\"images\":\"feed-item_images__2tNuo\",\"imageWrapper\":\"feed-item_imageWrapper__qtNf0\",\"image\":\"feed-item_image__34yWv\",\"count\":\"feed-item_count__55MaW\",\"footer\":\"feed-item_footer__1BmJS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"order_name__3anQi\",\"orderWrapper\":\"order_orderWrapper__20USo\",\"order\":\"order_order__XhYYx\",\"footer\":\"order_footer__IV0Vm\",\"orderInfo\":\"order_orderInfo__3nKrf\",\"orderHeader\":\"order_orderHeader__3gOC6\",\"imageWrapper\":\"order_imageWrapper__2wVwr\",\"image\":\"order_image__5aRu7\",\"info\":\"order_info__3HpXW\",\"price\":\"order_price__3Lt02\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"feed_content__3xDpk\",\"feed\":\"feed_feed__2Rm4t\",\"done\":\"feed_done__36Pny\",\"feedInfo\":\"feed_feedInfo__b0HrB\",\"header\":\"feed_header__PPX2m\",\"statusesWrapper\":\"feed_statusesWrapper__2V-83\",\"statuses\":\"feed_statuses__2o49R\",\"statusesColumns\":\"feed_statusesColumns__2Ffvn\",\"statusesColumn\":\"feed_statusesColumn__2OnUI\"};","import React from 'react';\r\nimport {\r\n    Logo, BurgerIcon\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport css from './index.module.css';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\n\r\nexport const AppHeader = () => {\r\n    const { pathname } = useLocation();\r\n    return (\r\n        <nav>\r\n            <div className={css.side}>\r\n                    <div className={css.box1}>\r\n                            <NavLink exact to='/' className={css.inmenu}>\r\n                                <BurgerIcon type={pathname === '/' ? \"primary\" : \"secondary\"} />\r\n                                <span className=\" text text_type_main-default \">Конструктор</span>\r\n                            </NavLink>\r\n\r\n                            <NavLink exact to='/feed' className={css.inmenu}>\r\n                                <BurgerIcon type={pathname === '/feed' ? \"primary\" : \"secondary\"} />\r\n                                <span className=\" text text_type_main-default \">Лента Заказов</span>\r\n                            </NavLink>\r\n                    </div>\r\n\r\n                    <div className={css.centr}>\r\n                        <NavLink exact to='/' className={css.inmenu_logo}>\r\n                            <Logo/>\r\n                        </NavLink>\r\n                    </div>\r\n\r\n                    <div className={css.box3}>\r\n                        <NavLink exact to='/profile' className={css.inmenu}>\r\n                            <BurgerIcon type={pathname === '/profile' ? \"primary\" : \"secondary\"} />\r\n                            <span className=\"text text_type_main-default \">Личный кабинет</span>\r\n                        </NavLink>\r\n                    </div>\r\n\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default AppHeader;","export default __webpack_public_path__ + \"static/media/close.3e080984.svg\";","import css from \"./modal-overlay.module.css\";\r\nimport React, {FunctionComponent} from \"react\";\r\n\r\ntype IModalOverlayProps = {\r\n\tsetModalActive ?: (e: boolean) => void\r\n\tonClick ?: any\r\n}\r\n\r\nexport const ModalOverlay : FunctionComponent<IModalOverlayProps> = (props) => {\r\n\treturn <div className={css.modal_overlay} onClick={props.onClick} />\r\n}\r\n\r\nexport default ModalOverlay;\r\n","import React, {useEffect} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport css from './modal.module.css';\r\nimport closeImg from '../../images/close.svg';\r\nimport {ModalOverlay} from \"../modal-overlay\";\r\nimport { FunctionComponent } from 'react'\r\n\r\ninterface IModalProps {\r\n\tonClose: any,\r\n\theader?: string\r\n}\r\n\r\nexport const Modal : FunctionComponent<IModalProps> = (props) => {\r\n\tuseEffect(() => {\r\n\t\tconst escFunc = (e:KeyboardEvent) => (e.key === \"Escape\") && props.onClose();\r\n\t\tdocument.addEventListener('keydown', escFunc);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('keydown', escFunc);\r\n\t\t}\r\n\t}, [props]);\r\n\r\n    const portalContent = (\r\n\t\t\t<div>\r\n\t\t\t\t<ModalOverlay onClick={props.onClose} />\r\n\t\t\t\t<div className={css.modal_content} onClick={e=>e.stopPropagation()}>\r\n\t\t\t\t\t{/*Заголовок портала*/}\r\n\t\t\t\t\t<div className={css.modal_content_caption}>\r\n\t\t\t\t\t\t<span className=\"text text_type_main-medium\">{props.header}</span>\r\n\t\t\t\t\t\t<img src={closeImg} alt={\"Закрыть\"} className={css.close_button} onClick={props.onClose}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/*Компонент-содержание*/}\r\n\t\t\t\t\t{props.children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>);\r\n\r\n    return ReactDOM.createPortal(\r\n\t    portalContent,\r\n        document.getElementById('portal') as HTMLElement\r\n    );\r\n    \r\n}\r\n","export default __webpack_public_path__ + \"static/media/done.c4e85cae.svg\";","import {\r\n    TypedUseSelectorHook,\r\n    useDispatch as dispatchHook,\r\n    useSelector as selectorHook\r\n} from 'react-redux';\r\n\r\nimport { AppDispatch, AppThunk, RootState } from '../types';\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\n","import React from 'react';\r\nimport css from './modal.module.css';\r\nimport imgDone from '../../images/done.svg';\r\nimport { useSelector } from '../../hooks/hooks';\r\n\r\nexport const OrderDetails = () => {\r\n\tconst orderObj = useSelector((store) => store.order) || null;\r\n\r\n\tif(orderObj && orderObj.number ) {\r\n\t\treturn (\r\n\t\t\t<div className={css.order_details}>\r\n\t\t\t\t<p className=\"text text_type_digits-large\">{orderObj.number}</p>\r\n\t\t\t\t<p className={css.identificator_size + \" text text_type_main-medium\"}>идентификатор заказа</p>\r\n\t\t\t\t<img src={imgDone} alt={\"done\"}/>\r\n\t\t\t\t<span className={css.bottom_text + \" pt-7 text text_type_main-small\"}>\r\n\t\t\t\t\t\t<p>Ваш заказ начали готовить</p>\r\n\t\t\t\t\t\t<p>Дождитесь готовности на орбитальной станции</p>\r\n\t\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t)\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<div className={css.order_details}>\r\n\t\t\t\t<span className={css.bottom_text + \" mt-10 text text_type_main-small\"}>\r\n\t\t\t\t\t\t<p>Секундочку... оформляем Ваш заказ...</p>\r\n\t\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import React,{useEffect,useState} from 'react';\r\nimport css from \"./ingredient-details.module.css\";\r\nimport { useSelector } from '../../hooks/hooks';\r\nimport {useHistory} from 'react-router-dom';\r\nimport { TIngredient } from '../../types'\r\n\r\nexport const IngredientDetails = () => {\r\n\t//let { id } = useParams();\r\n    const history = useHistory();\r\n    const id = history.location.pathname.slice(13);\r\n\ttype EmptyObject = Record<any, never>|undefined;\r\n\r\n\tlet ingredients = useSelector((store) => store.ingr.data);\r\n\tlet item:TIngredient|EmptyObject = {};\r\n\tlet [ingredient, setIngredient] = useState<TIngredient| EmptyObject>({});\r\n\r\n    const ingredientId = history.location.pathname.slice(13);\r\n\r\n    console.log(ingredientId)\r\n\tuseEffect(()=>{\r\n\t\titem = ingredients.find(el => el._id === id);  // id пустой!\r\n\t\tsetIngredient(item)\r\n\t},[id, ingredients]);\r\n\r\n\tif(!item) {\r\n\t\treturn (\r\n\t\t\t<div>Загружаю ингредиент....</div>\r\n\t\t)\r\n\t} else {\r\n\t\treturn (\r\n\t\t\t<div className={css.product_portal}>\r\n\t\t\t\t<img src={ingredient?.image} alt={ingredient?.name} className={css.w480}/>\r\n\t\t\t\t<span className=\"text text_type_main-medium\">{ingredient?.name}</span>\r\n\t\t\t\t<div className={css.product_energy}>\r\n\t\t\t\t\t<span className=\"text text_type_main-small text_color_inactive\">Калории, ккал<br/>{ingredient?.calories}</span>\r\n\t\t\t\t\t<span className=\"text text_type_main-small text_color_inactive\">Белки, г<br/>{ingredient?.proteins}</span>\r\n\t\t\t\t\t<span className=\"text text_type_main-small text_color_inactive\">Жиры, г<br/>{ingredient?.fat}</span>\r\n\t\t\t\t\t<span className=\"text text_type_main-small text_color_inactive\">Углеводы, г<br/>{ingredient?.carbohydrates}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import React, { useState } from 'react';\r\nimport { useHistory } from \"react-router\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport css from './product.module.css';\r\nimport { CurrencyIcon, Counter } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { Modal } from \"../modal\";\r\nimport { IngredientDetails } from \"../ingredient-details\";\r\nimport { useSelector } from '../../hooks/hooks'\r\nimport { TIngredient } from '../../types'\r\n\r\nexport const Product = (props:{apiData:TIngredient}) => {\r\n    const history = useHistory();\r\n    const [modalIsActive, setModalActive] = useState(false);\r\n\tconst [{ isDrag }, dragRef] = useDrag({\r\n\t\ttype: 'ingredient',\r\n\t\titem: props.apiData,\r\n\t\tcollect: monitor => ({\r\n\t\t\tisDrag: monitor.isDragging()\r\n\t\t})\r\n\t});\r\n    const onClose = (e: Event) => {\r\n        if(e) e.stopPropagation();\r\n        setModalActive(false);\r\n        history.goBack()\r\n    };\r\n\tconst opacity = isDrag ? 0.5 : 1;\r\n    const { counts, bun } = useSelector((store) => store.ingr.burgerIngredients);\r\n\r\n\tlet count = (counts && typeof(counts[props.apiData._id]) !== 'undefined') ? counts[props.apiData._id] : 0;\r\n\tcount = (props.apiData.type==='bun' && count && bun && props.apiData._id === bun._id) ? 2 : (props.apiData.type==='bun' ? 0 : count);\r\n    const productContent =\r\n        <div className={css.product} onClick={()=>setModalActive(true)} ref={dragRef} style={{ opacity }}>\r\n            <img src={props.apiData.image} alt={props.apiData.name}/>\r\n            <span className={css.inn_flex}>\r\n                <span className=\"mr-3\">{props.apiData.price}</span> <CurrencyIcon type=\"primary\"/>\r\n           </span>\r\n            <span className=\"text text_type_main-small\">\r\n               {props.apiData.name}\r\n           </span>\r\n\t        { count > 0 && <Counter count={count} size=\"default\"/>}\r\n        </div>\r\n\r\n    return (\r\n        <div>\r\n            {productContent}\r\n            {modalIsActive && <Modal header=\"Детали ингредиента\" onClose={onClose}>\r\n\t            <IngredientDetails/>\r\n            </Modal>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n","import React, {FunctionComponent} from 'react';\r\nimport css from './index.module.css';\r\nimport {Product} from \"../product\";\r\n//import {ingredientType} from '../../prop-types';\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport { TIngredient } from '../../types'\r\n\r\ninterface IProductListProps {\r\n    id:string,\r\n    apiData:TIngredient[],\r\n    subRef:string\r\n}\r\n\r\nexport const ProductList:FunctionComponent<IProductListProps> = (props) => {\r\n    const location = useLocation();\r\n    return (\r\n       <div id={props.id}>\r\n           <p className=\"text text_type_main-medium\" ref={props.subRef}>\r\n\t           {props.children}\r\n           </p>\r\n           <div className={css.product_list}>\r\n               {props.apiData.map((itm) => {\r\n                   return (\r\n                       <Link key={itm._id}\r\n                           to={{\r\n                               pathname: `/ingredients/${itm._id}`,\r\n                               state: { background: location }\r\n                           }}\r\n                           className={css.product_link}\r\n                       >\r\n                           <Product apiData={itm}/>\r\n                       </Link>)\r\n               })}\r\n           </div>\r\n       </div>\r\n    );\r\n}\r\n\r\nexport default ProductList;","import React, {useRef, useEffect} from 'react';\r\nimport PropTypes from \"prop-types\";\r\nimport {Tab} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport css from './burger.module.css';\r\nimport {ingredientType} from '../../prop-types';\r\nimport {ProductList} from '../product-list';\r\nimport {useSelector} from '../../hooks/hooks';\r\n\r\nexport const BurgerIngredients = () => {\r\n    const [current, setCurrent] = React.useState<string>('bun');\r\n\tconst apiData = useSelector((store) => store.ingr.data);\r\n\tconst setTab = (tab:any) => {\r\n\t\tconsole.log(tab);\r\n\t\tsetCurrent(tab);\r\n\t\tconst element = document.getElementById(tab);\r\n\t\tif (element) element.scrollIntoView({ behavior: \"smooth\" });\r\n\t};\r\n\tconst listBun = apiData.filter((itm)=>itm.type==='bun' && itm);\r\n\tconst listMain= apiData.filter((itm)=>itm.type==='main'&& itm);\r\n\tconst listSauce=apiData.filter((itm)=>itm.type==='sauce' && itm);\r\n\tconst primaryRef = useRef<HTMLDivElement>(null);\r\n\tconst bunRef = useRef<any>(null);\r\n\tconst sauceRef = useRef<any>(null);\r\n\tconst mainRef = useRef<any>(null);\r\n\r\n\tconst handleScroll = () => {\r\n\t\tif (primaryRef && bunRef && sauceRef && mainRef && primaryRef.current && bunRef.current && sauceRef.current && mainRef.current) {\r\n\t\t\tconst bunDistance = Math.abs(primaryRef.current.getBoundingClientRect().top - bunRef.current.getBoundingClientRect().top)\r\n\t\t\tconst sauceDistance = Math.abs(primaryRef.current.getBoundingClientRect().top - sauceRef.current.getBoundingClientRect().top)\r\n\t\t\tconst mainDistance = Math.abs(primaryRef.current.getBoundingClientRect().top - mainRef.current.getBoundingClientRect().top)\r\n\t\t\tconst minDistance = Math.min(bunDistance, sauceDistance, mainDistance);\r\n\t\t\tconst currentHeader = minDistance === bunDistance\r\n\t\t\t\t? 'bun' : minDistance === sauceDistance ? 'sauce' : 'main';\r\n\t\t\t//setCurrent(prevState => (currentHeader === prevState.current ? prevState.current : currentHeader))\r\n\t\t\tsetCurrent(prevState => (currentHeader === prevState ? prevState : currentHeader))\r\n\t\t}\r\n\t}\r\n\tuseEffect(() => {\r\n\t\tdocument.querySelector(`#${current}`)?.scrollIntoView();\r\n\t},[current])\r\n\r\n    return (\r\n        <div className={css.column}>\r\n            <p className=\"text text_type_main-large\">\r\n                Соберите бургер\r\n            </p>\r\n            <div className={css.fl}>\r\n                <Tab value=\"bun\" active={current === 'bun'} onClick={setTab}>Булки</Tab>\r\n\t            <Tab value=\"main\" active={current === 'main'} onClick={setTab}>Начинки</Tab>\r\n                <Tab value=\"sauce\" active={current === 'sauce'} onClick={setTab}>Соусы</Tab>\r\n            </div>\r\n            <div className={css.scrollzone} ref={primaryRef} onScroll={handleScroll} >\r\n\t\t\t\t{/*// @ts-ignore*/}\r\n\t            <ProductList apiData={listBun} id={'bun'} subRef={bunRef}>Булки</ProductList>{/*// @ts-ignore*/}\r\n\t            <ProductList apiData={listMain} id={'main'} subRef={mainRef}>Начинки</ProductList>{/*// @ts-ignore*/}\r\n\t            <ProductList apiData={listSauce} id={'sauce'} subRef={sauceRef} >Соусы</ProductList>\r\n                \r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\nBurgerIngredients.propTypes = {\r\n\tapiData: PropTypes.arrayOf(ingredientType)\r\n};\r\n","import React, {FC} from 'react';\r\nimport css from './item.module.css'\r\nimport {ConstructorElement, DragIcon} from  '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { useRef } from 'react';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport { TIngredient } from '../../types'\r\ninterface Props {\r\n    item:TIngredient,\r\n    index:number,\r\n    isLocked:boolean,\r\n    deleteFunc:any,\r\n    moveFunc:any\r\n}\r\n\r\nexport const BurgerItem: FC<Props> = ({item, index, isLocked, deleteFunc, moveFunc}) => {\r\n    const id    = item._id\r\n    const ref = useRef<HTMLLIElement>(null)\r\n    const [, drop] = useDrop({\r\n        accept: 'item',\r\n\t    \r\n        collect(monitor) {\r\n            return {\r\n                handlerId: monitor.getHandlerId(),\r\n            };\r\n        },\r\n        hover(el:{ index: number}, monitor) {\r\n            if (!ref.current) return;\r\n            const dragIndex = el.index;\r\n            const hoverIndex = index;\r\n            if (dragIndex === hoverIndex) return;\r\n            const hoverRect = ref.current?.getBoundingClientRect();\r\n            const hoverMidY = (hoverRect.bottom - hoverRect.top)/2;\r\n            const clientOffset = monitor.getClientOffset();\r\n            if(clientOffset != null) {\r\n                const hoverClientY = clientOffset.y - hoverRect.top;\r\n                if (dragIndex < hoverIndex && hoverClientY < hoverMidY) return;\r\n                if (dragIndex > hoverIndex && hoverClientY > hoverMidY) return;\r\n            }\r\n\r\n            \r\n            moveFunc(dragIndex, hoverIndex);\r\n            el.index = hoverIndex;\r\n        },\r\n    });\r\n\r\n    const [{ isDrag }, drag] = useDrag({\r\n\t    \r\n        type: 'item',\r\n        item: () => {\r\n            return { id, index };\r\n        },\r\n        collect: (monitor) => ({\r\n            isDrag: monitor.isDragging(),\r\n        }),\r\n    });\r\n    //console.log(item)\r\n    const opacity = isDrag ? 0 : 1;\r\n    drag(drop(ref))\r\n\t\r\n    return (\r\n        <li ref={ ref } className={ css.burger_item } style={{ opacity }}>\r\n            <DragIcon type='primary' />\r\n            <ConstructorElement\r\n                text={item.name}\r\n                price={item.price}\r\n                isLocked={isLocked}\r\n                thumbnail={item.image}\r\n                handleClose={deleteFunc}\r\n            />\r\n        </li>\r\n    );\r\n};\r\n\r\nexport default BurgerItem;\r\n","export const INGREDIENTS_LOAD : 'INGREDIENTS_LOAD' = 'INGREDIENTS_LOAD';\r\nexport const INGREDIENTS_LOAD_CONSTR : 'INGREDIENTS_LOAD_CONSTR' = 'INGREDIENTS_LOAD_CONSTR';\r\nexport const INGREDIENTS_VIEW_DETAILS : 'INGREDIENTS_VIEW_DETAILS' = 'INGREDIENTS_VIEW_DETAILS';\r\nexport const INGREDIENTS_DELETE_DETAILS : 'INGREDIENTS_DELETE_DETAILS' = 'INGREDIENTS_DELETE_DETAILS';\r\n\r\nexport const ORDER_LOAD : 'ORDER_LOAD' = 'ORDER_LOAD';\r\nexport const GET_ORDER = 'GET_ORDER';\r\nexport const GET_ORDER_FAILED = 'GET_ORDER_FAILED';\r\nexport const GET_ORDER_SUCCESS = 'GET_ORDER_SUCCESS';\r\nexport const CLEAR_ORDER = 'CLEAR_ORDER'\r\n\r\nexport const INGREDIENTS_CHOOSE : 'INGREDIENTS_CHOOSE' = 'INGREDIENTS_CHOOSE'; // выбор ингредиентов\r\nexport const INGREDIENT_DELETE : 'INGREDIENT_DELETE' = 'INGREDIENT_DELETE';\r\n\r\nexport const COUNTER_UP : 'COUNTER_UP' = 'COUNTER_UP';\r\nexport const COUNTER_DOWN : 'COUNTER_DOWN' = 'COUNTER_DOWN';\r\nexport const MOVE_INGREDIENT : 'MOVE_INGREDIENT' = 'MOVE_INGREDIENT';\r\nexport const RESET_CONSTRUCTOR : 'RESET_CONSTRUCTOR' = 'RESET_CONSTRUCTOR';\r\n\r\n","export const protHttp:string = 'https://';\r\nexport const protWss:string = 'wss://';\r\nexport const domain:string = 'norma.nomoreparties.space';\r\nexport const apiUrl:string = domain + '/api';\r\nexport const createOrderUrl:string = protHttp + apiUrl + '/orders';\r\nexport const orderUrl:string = protHttp + apiUrl + '/orders/';\r\nexport const getIngredientsUrl:string = protHttp + apiUrl + '/ingredients';\r\nexport const pwForgotUrl:string = protHttp + apiUrl + '/password-reset';\r\nexport const pwResetUrl:string = protHttp + apiUrl + '/password-reset/reset';\r\n\r\n\r\nexport type TObject = {\r\n    loginUrl : string,\r\n    registerUrl : string,\r\n    logoutUrl : string,\r\n    tokenUrl : string,\r\n    userUrl : string,\r\n    feedsUrl : string,\r\n    feedsUserUrl : string\r\n}\r\n\r\nexport const config:TObject = {\r\n    loginUrl : protHttp + apiUrl + '/auth/login',\r\n    registerUrl : protHttp + apiUrl + '/auth/register',\r\n    logoutUrl : protHttp + apiUrl + '/auth/logout',\r\n    tokenUrl : protHttp + apiUrl + '/auth/token',\r\n    userUrl : protHttp + apiUrl + '/auth/user',\r\n\r\n    feedsUrl : protWss + domain + '/orders/all',\r\n    feedsUserUrl : protWss + domain + '/orders?token='\r\n}\r\n\r\n\r\n","export const deleteAllCookies =() => {\r\n    const cookies = document.cookie.split(\";\");\r\n    for (let i = 0; i < cookies.length; i++) {\r\n        const cookie = cookies[i];\r\n        const eqPos = cookie.indexOf(\"=\");\r\n        const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\r\n        document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/\";\r\n    }\r\n};\r\n\r\nexport const setCookie = (name:string, value:string, options?:any) => {\r\n    options = options || {};\r\n    let expires = options.expires;\r\n    if (typeof expires === \"number\" && expires) {\r\n        let d = new Date();\r\n        d.setTime(d.getTime() + expires * 1000);\r\n        expires = options.expires = d;\r\n    }\r\n    if (expires && expires.toUTCString) {\r\n        options.expires = expires.toUTCString();\r\n    }\r\n    value = encodeURIComponent(value);\r\n    let updatedCookie = name + \"=\" + value;\r\n    for (const propName in options) {\r\n        updatedCookie += \"; \" + propName;\r\n        const propValue = options[propName];\r\n        if (propValue !== true) {\r\n            updatedCookie += \"=\" + propValue;\r\n        }\r\n    }\r\n    document.cookie = updatedCookie;//+\";path=/\";\r\n};\r\n\r\nexport const delCookie = (name:string) =>{\r\n    setCookie(name, '', { expires: -1 });\r\n};\r\n\r\nexport function getCookie(name: string) {\r\n    const matches = document.cookie.match(\r\n        //new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n        new RegExp('(?:^|; )' + name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, '\\\\$1') + '=([^;]*)')\r\n    );\r\n    return matches ? decodeURIComponent(matches[1]) : '';//undefined\r\n}\r\n","import {config} from '../config';\r\nimport {TUser,TUserRequest,TError} from '../types'\r\nimport {setCookie,delCookie} from '../utils/cookie';\r\n\r\n\r\n\r\nexport const checkResponse = (response: Response ) => {\r\n    return (response.ok) ? response.json() : Promise.reject(response.status);\r\n};\r\n\r\nexport const registerRequest = ({ email, password, name }:TUser) => {\r\n    return fetch(config.registerUrl, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({email, password, name})\r\n        }\r\n    )\r\n    .then(checkResponse);\r\n};\r\n\r\nexport const loginRequest = ({ email, password }:TUser) => {\r\n    return fetch(config.loginUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({ email: email, password }),\r\n    })\r\n    .then( checkResponse );\r\n};\r\n\r\nexport const refreshTokenRequest = () => {\r\n    return fetch(config.tokenUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({\r\n            token : localStorage.getItem('refreshToken')\r\n        }),\r\n    })\r\n    .then(checkResponse);\r\n};\r\n\r\nexport const logoutRequest = () => {\r\n    return fetch(config.logoutUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({\r\n            token: localStorage.getItem('refreshToken')\r\n        }),\r\n    })\r\n    .then(checkResponse);\r\n};\r\n\r\n\r\nexport const getUserRequest_ = (token:string) => {\r\n    //return fetch(config.userUrl, {\r\n    console.log( 'getUserRequest 1' );\r\n    return fetchWithRefreshToken(config.userUrl,{\r\n        method : 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n            Authorization: 'Bearer ' + token\r\n        }\r\n    })\r\n        .then(checkResponse);\r\n};\r\nexport const updateUserRequest_ = ({email, name, token}:TUserRequest) => {\r\n    //return fetchWithRefreshToken2(config.userUrl,{\r\n    return fetch(config.userUrl, {\r\n        method : 'PATCH',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n            Authorization: 'Bearer ' + token\r\n        },\r\n        body: JSON.stringify({email, name})\r\n    })\r\n        .then(checkResponse);\r\n};\r\n\r\nexport const getUserRequest = (token:string) => {\r\n    //return fetch(config.userUrl, {\r\n    console.log( 'getUserRequest 2' );\r\n    return fetchWithRefreshToken2(()=>{\r\n        return myFetch2(config.userUrl, 'GET', token);\r\n    })//.then(checkResponse);\r\n};\r\n\r\nexport const updateUserRequest = (params:TUserRequest) => {\r\n    console.log('updateUserRequest')\r\n    return fetchWithRefreshToken2(()=>{\r\n        return myFetch(config.userUrl, 'PATCH', params);\r\n    }).then(checkResponse);\r\n};\r\nconst myFetch = (url: string, method:string, params: Record<string, any>|string ) => {\r\n    const authToken = localStorage.getItem('accessToken');\r\n    return fetch(url, {\r\n        method : method,\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n            Authorization: 'Bearer ' + authToken\r\n        },\r\n        body: JSON.stringify(params)\r\n    })\r\n};\r\nconst myFetch2 = (url: string, method:string, authToken: string ) => {\r\n    return fetch(url, {\r\n        method : method,\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8',\r\n            Authorization: 'Bearer ' + authToken\r\n        }\r\n    })\r\n};\r\n\r\nlet cashPr: Promise<void> | null = null;\r\nconst fetchWithRefreshToken2 = (callback:()=>Promise<any>) => {\r\n    if (cashPr) {\r\n        return cashPr.then(() => {\r\n            return callback()\r\n        })\r\n    }\r\n    return callback().then((res) => checkResponse(res))\r\n        .catch((res: Response) => {\r\n            return res.json()\r\n                .then((err: TError) => {\r\n                    if (err?.message === 'jwt expired') {\r\n                        console.log('fetchWithRefreshToken');\r\n                        if (!cashPr) {\r\n                            cashPr = refreshTokenRequest()\r\n                                .then(res => {\r\n                                    localStorage.setItem('refreshToken', res.refreshToken);\r\n                                    const authToken = res.accessToken.split('Bearer ')[1];\r\n                                    //delCookie('token')\r\n                                    setCookie('token', authToken);\r\n                                    //(options.headers as { [key: string]: string }).Authorization = res.accessToken;\r\n                                    //myFetch ?\r\n                                })\r\n                        }\r\n\r\n                        return cashPr.then(() => {\r\n                            return callback().then((res) => checkResponse(res))\r\n                        });\r\n                    } else {\r\n                        delCookie('token');\r\n                        localStorage.removeItem('refreshToken');\r\n                        // eslint-disable-next-line\r\n                        location.reload();\r\n                        return Promise.reject(err)\r\n                    }\r\n                })\r\n        });\r\n\r\n};\r\n\r\n\r\nconst fetchWithRefreshToken = (url: string, options: RequestInit) => {\r\n    return fetch(url, options).then((res) => checkResponse(res))\r\n        .catch((res: Response) => {\r\n            return res.json()\r\n                .then((err: TError) => {\r\n                    if (err?.message === 'jwt expired') {\r\n                        console.log('fetchWithRefreshToken');\r\n                        return refreshTokenRequest()\r\n                            .then(res => {\r\n                                localStorage.setItem('refreshToken', res.refreshToken);\r\n                                const authToken = res.accessToken.split('Bearer ')[1];\r\n                                //delCookie('token')\r\n                                setCookie('token', authToken);\r\n                                (options.headers as { [key: string]: string }).Authorization = res.accessToken;\r\n                                return fetch(url, options).then((res) => checkResponse(res))\r\n                            })\r\n                    } else {\r\n                        delCookie('token');\r\n                        localStorage.removeItem('refreshToken');\r\n                        // eslint-disable-next-line\r\n                        location.reload();\r\n                        return Promise.reject(err)\r\n                    }\r\n                })\r\n        })\r\n};","import React, {useState, useCallback,FC} from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Button, ConstructorElement, CurrencyIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport css from './index.module.css';\r\nimport { OrderDetails, Modal } from \"../modal\";\r\nimport { BurgerItem } from '../burger-item/burger-item';\r\nimport { useSelector, useDispatch } from '../../hooks/hooks'\r\nimport { MOVE_INGREDIENT, INGREDIENT_DELETE, COUNTER_DOWN } from '../../services/actions';\r\nimport { createOrder,clearOrder } from '../../services/actions/order';\r\nimport { TProps, TIngredient } from '../../types'\r\n\r\n/*  Конструктор - ПРАВЫЙ блок */\r\nexport const BurgerConstructor: FC<TProps> = ({ onDropHandler }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst history = useHistory();\r\n    const [modalIsActive, setModalActive] = useState(false);\r\n\tconst { bun, contentItems } = useSelector((store) => store.ingr.burgerIngredients);\r\n\tconst hasToken = localStorage.getItem('refreshToken');\r\n    const [{ canDrop }, dropTarget] = useDrop({\r\n        accept : \"ingredient\",\r\n        drop(itemId: TIngredient) {\r\n            onDropHandler(itemId);\r\n        },\r\n        collect: monitor => ({\r\n            isHover: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        })\r\n    });\r\n\tlet opacity,dropMsgCls,column;\r\n\tif(canDrop) {\r\n\t\tdropMsgCls = css.drop_msg;\r\n\t\topacity = 0.5;\r\n\t\tcolumn = css.column_active;\r\n\t} else {\r\n\t\tdropMsgCls = css.no_drop_msg;\r\n\t\topacity = 1;\r\n\t\tcolumn = css.column;//css.constructor_candrop;\r\n\t}\r\n\tconst moveItem = useCallback((dragIdx, idx) => {\r\n\t\tdispatch({\r\n\t\t\ttype: MOVE_INGREDIENT,\r\n\t\t\ttoIndex: idx,\r\n\t\t\tfromIndex: dragIdx\r\n\t\t})\r\n\t}, [dispatch])\r\n\t\r\n\tconst orderSumm = (bun:TIngredient|null, items:TIngredient[]) => {\r\n\t\tlet summ = (bun)? bun.price*2 : 0;\r\n\t\tif(items) items.map((itm)=>{return summ += itm.price});\r\n\t\treturn summ;\r\n\t}\r\n\tconst handleClick = () => {\r\n\t\tif (hasToken && bun) {\r\n\t\t\tlet ingredientsArr:string[] = [bun._id]; // пусть сервер знает id булки\r\n\t\t\tfor (let itm of contentItems) {\r\n\t\t\t\tingredientsArr.push(itm._id)\r\n\t\t\t}\r\n\t\t\tdispatch(createOrder(ingredientsArr)); // redux-thunk\r\n\t\t\tsetModalActive(true)\r\n\t\t} else {\r\n\t\t\thistory.replace({ pathname: '/login' })\r\n\t\t}\r\n\t};\r\n\tconst onClose = (e: Event) => {\r\n\t\tif(e) e.stopPropagation();\r\n\t\tsetModalActive(false);\r\n\t\tdispatch(clearOrder());\r\n\t};\r\n\r\n    return (\r\n        <div className={column} ref={dropTarget} style={{opacity}}>\r\n\t        <div className={dropMsgCls}>\r\n\t            Переместите сюда ингредиент для добавления в заказ\r\n            </div>\r\n\t        {bun &&\r\n\t        <div className=\"ml-15\">\r\n\t\t        <ConstructorElement\r\n\t\t\t        text={bun.name+\" (Верх)\"}\r\n\t\t\t        isLocked={true}\r\n\t\t\t        price={bun.price}\r\n\t\t\t        thumbnail={bun.image}\r\n\t\t\t        type=\"top\"\r\n\t\t        />\r\n\t        </div>\r\n\t        }\r\n\t        <div className={css.list}>\r\n\t\t        <ul>\r\n\t\t        {contentItems && contentItems.map((item, i) => {\r\n\t\t            const delFunc = () => {\r\n\t\t\t\t\t        console.log(item)\r\n\t\t\t\t\t        dispatch({\r\n\t\t\t\t\t\t        type: INGREDIENT_DELETE,\r\n\t\t\t\t\t\t        id : item.productId\r\n\t\t\t\t\t        })\r\n\t\t\t\t\t        dispatch({\r\n\t\t\t\t\t\t        type: COUNTER_DOWN,\r\n\t\t\t\t\t\t        key: item._id,\r\n\t\t\t\t\t\t        typeItem: item.type\r\n\t\t\t\t\t        })\r\n\t\t\t\t        }\r\n\t\t\t        return (\r\n\t\t\t\t\t        <BurgerItem\r\n\t\t\t\t\t\t        key={item.productId}\r\n\t\t\t\t\t\t        item={item}\r\n\t\t\t\t\t\t        isLocked={false}\r\n\t\t\t\t\t\t        deleteFunc={delFunc}\r\n\t\t\t\t\t\t        moveFunc={moveItem}\r\n\t\t\t\t\t\t        index={i}\r\n\t\t\t\t\t        />\r\n\t\t\t        )\r\n\t\t        })\r\n\t\t        }</ul>\r\n\t        </div>\r\n\t        {bun &&\r\n\t        <div className=\"ml-15\">\r\n\t\t        <ConstructorElement\r\n\t\t\t        text={bun.name+\" (Низ)\"}\r\n\t\t\t        isLocked={true}\r\n\t\t\t        price={bun.price}\r\n\t\t\t        thumbnail={bun.image}\r\n\t\t\t        type=\"bottom\"\r\n\t\t        />\r\n\t        </div>\r\n\t        }\r\n            <div className={css.total}>\r\n                <p className=\"text text_type_digits-medium\">{orderSumm(bun, contentItems)}</p>\r\n                <CurrencyIcon type=\"primary\"/>\r\n\t            {bun && <Button type=\"primary\" size=\"medium\" onClick={handleClick}>Оформить заказ</Button>}\r\n                {modalIsActive && <Modal onClose={onClose}>\r\n                    <OrderDetails/>\r\n                </Modal>}\r\n            </div>\r\n        \r\n        </div>\r\n    );\r\n}\r\n//\r\n// export default BurgerConstructor;\r\n","import * as config from '../../config';\r\nimport {ORDER_LOAD, RESET_CONSTRUCTOR, GET_ORDER, GET_ORDER_SUCCESS, GET_ORDER_FAILED, CLEAR_ORDER} from \"./index\";\r\nimport {AppDispatch as Dispatch, AppThunk} from '../../types';\r\nimport {getCookie} from \"../../utils/cookie\";\r\nimport {checkResponse} from \"../../utils/api-requests\";\r\n\r\nexport const createOrder:AppThunk = (ingredientsIdsArr : string[]) =>{\r\n\treturn function (dispatch:Dispatch) {\r\n\t\tfetch(config.createOrderUrl, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json;charset=utf-8',\r\n\t\t\t\t\t'Authorization': 'Bearer '+getCookie('token')\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({'ingredients': ingredientsIdsArr})\r\n\t\t\t}\r\n\t\t)\r\n\t\t\t.then(checkResponse)\r\n\t\t\t.then(result => {\r\n\t\t\t\tif (result.success) {\r\n\t\t\t\t\tlet orderNumber = result.order.number;\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: ORDER_LOAD,\r\n\t\t\t\t\t\tnumber: orderNumber\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype:RESET_CONSTRUCTOR\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\talert('Error ' + error + ' while connecting to Api');\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport const getOrder:AppThunk = (id: string) => {\r\n\treturn function(dispatch: Dispatch) {\r\n\t\tdispatch({type: GET_ORDER});\r\n\t\tfetch(config.orderUrl + id, {\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json;charset=utf-8'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t\t.then(checkResponse)\r\n\t\t.then((response:any) => {\r\n\t\t\tconsole.log(response);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: GET_ORDER_SUCCESS,\r\n\t\t\t\torder: response.orders[0]\r\n\t\t\t});\r\n\t\t\treturn response.data;\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log('errr');\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: GET_ORDER_FAILED\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\nexport const clearOrder:AppThunk = () => {\r\n\treturn function (dispatch: Dispatch) {\r\n\t\tdispatch({type: CLEAR_ORDER});\r\n\t}\r\n}\r\n","import {\r\n    registerRequest,\r\n    loginRequest,\r\n    refreshTokenRequest,\r\n    logoutRequest,\r\n    getUserRequest,\r\n    updateUserRequest} from '../../utils/api-requests';\r\nimport {setCookie, delCookie, getCookie} from \"../../utils/cookie\";\r\nimport {AppDispatch as Dispatch, AppThunk, TUser} from '../../types';\r\n\r\nexport const LOGIN = 'LOGIN';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nexport const REGISTER_FAILED = 'REGISTER_FAILED';\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\nexport const REFRESH_TOKEN_REQUEST = 'REFRESH_TOKEN_REQUEST';\r\nexport const REFRESH_TOKEN_SUCCESS = 'REFRESH_TOKEN_SUCCESS';\r\nexport const REFRESH_TOKEN_FAILED  = 'REFRESH_TOKEN_FAILED';\r\n\r\nexport const GET_USER_REQUEST = 'GET_USER_REQUEST';\r\nexport const GET_USER_SUCCESS = 'GET_USER_SUCCESS';\r\nexport const GET_USER_FAILED = 'GET_USER_FAILED';\r\n\r\nexport const registerAction:AppThunk = (state:TUser) => {\r\n    return function (dispatch:Dispatch) {\r\n        console.log('registerAction');\r\n        registerRequest(state)\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    const authToken = res.accessToken.split('Bearer ')[1];\r\n                    const refreshToken = res.refreshToken;\r\n                    setCookie('token', authToken);\r\n                    localStorage.setItem('refreshToken', refreshToken);\r\n                    dispatch({\r\n                        type: REGISTER_SUCCESS,\r\n                        user: res.user,\r\n                    });\r\n\r\n                } else {\r\n                    dispatch({\r\n                        type: REGISTER_FAILED,\r\n                    });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                dispatch({\r\n                    type: REGISTER_FAILED,\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nexport const loginAction:AppThunk =(state:TUser) => {\r\n    return function (dispatch:Dispatch) {\r\n        console.log('loginAction');\r\n        return loginRequest(state)\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    const authToken = res.accessToken.split('Bearer ')[1];\r\n                    const refreshToken = res.refreshToken;\r\n                    console.log('loginAction ok');\r\n                    setCookie('token', authToken);\r\n                    localStorage.setItem('refreshToken', refreshToken);\r\n                    dispatch({\r\n                        type: LOGIN,\r\n                        user: res.user,\r\n                    });\r\n                    return res;\r\n                } else {\r\n                    console.error(res.message)\r\n\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error('Error1: ', err);\r\n            });\r\n    };\r\n};\r\n\r\nexport const refreshTokenAction:AppThunk = () => {\r\n    return function (dispatch:Dispatch) {\r\n        dispatch({\r\n            type: REFRESH_TOKEN_REQUEST\r\n        });\r\n        console.log('refreshTokenAction')\r\n        refreshTokenRequest()\r\n            .then((res) => {\r\n            if (res && res.success) {\r\n                localStorage.setItem('refreshToken', res.refreshToken);\r\n                const authToken = res.accessToken.split('Bearer ')[1];\r\n                delCookie('token')\r\n                setCookie('token', authToken);\r\n                dispatch({\r\n                    type: REFRESH_TOKEN_SUCCESS\r\n                });\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            dispatch({\r\n                type: REFRESH_TOKEN_FAILED\r\n            });\r\n            console.error('Error2: ', err);\r\n        });\r\n    };\r\n}\r\n\r\nexport const logoutAction:AppThunk = () => {\r\n    return function (dispatch:Dispatch) {\r\n        logoutRequest()\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    delCookie('token');\r\n                    localStorage.removeItem('refreshToken');\r\n                    dispatch({\r\n                        type: LOGOUT,\r\n                    });\r\n                    return true;\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.error('Error: ', err);\r\n            });\r\n    };\r\n};\r\n\r\nexport const getUserAction:AppThunk = () => {\r\n    return function (dispatch:Dispatch) {\r\n        console.log('getUserAction: '+getCookie('token'))\r\n        dispatch({\r\n            type:\r\n            GET_USER_REQUEST\r\n        });\r\n        return getUserRequest(getCookie('token'))\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_USER_SUCCESS,\r\n                        user: res.user,\r\n                    });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log('Error3: ');\r\n                console.log(err)\r\n                dispatch({\r\n                    type: GET_USER_FAILED\r\n                });\r\n                dispatch({\r\n                    type: REFRESH_TOKEN_REQUEST,\r\n                });\r\n            });\r\n    };\r\n};\r\nexport const updateUserAction:AppThunk = (state:any) => {\r\n    console.log('-=updateUserAction=-');\r\n    return function (dispatch:Dispatch) {\r\n        dispatch({\r\n            type: GET_USER_REQUEST\r\n        });\r\n        updateUserRequest({\r\n                    email : state.email,\r\n                    name : state.name,\r\n                    token : getCookie('token')})\r\n            .then((res) => {\r\n                if (res && res.success) {\r\n                    dispatch({\r\n                        type: GET_USER_SUCCESS,\r\n                        user: res.user,\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: GET_USER_FAILED,\r\n                    });\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                dispatch({\r\n                    type: GET_USER_FAILED,\r\n                });\r\n            });\r\n    }\r\n};\r\nexport interface ILoginAction { readonly type: typeof LOGIN; }\r\nexport interface IRegSuccessAction { readonly type: typeof REGISTER_SUCCESS; }\r\nexport interface IRegFailedAction { readonly type: typeof REGISTER_FAILED; }\r\nexport interface ILogoutAction { readonly type: typeof LOGOUT; }\r\nexport interface IRefTokenRequestAction { readonly type: typeof REFRESH_TOKEN_REQUEST; }\r\nexport interface IRefTokenSuccessAction { readonly type: typeof REFRESH_TOKEN_SUCCESS; }\r\nexport interface IRefTokenFailedAction { readonly type: typeof REFRESH_TOKEN_FAILED; }\r\nexport interface IGetUserRequestAction { readonly type: typeof GET_USER_REQUEST; }\r\nexport interface IGetUserSuccessAction { readonly type: typeof GET_USER_SUCCESS; }\r\nexport interface IGetUserFailedAction { readonly type: typeof GET_USER_FAILED; }\r\n\r\n\r\n\r\nexport type TAuthActions =\r\n    | ILoginAction\r\n    | IRegSuccessAction\r\n    | IRegFailedAction\r\n    | ILogoutAction\r\n    | IRefTokenRequestAction\r\n    | IRefTokenSuccessAction\r\n    | IGetUserRequestAction\r\n    | IGetUserFailedAction\r\n    | IGetUserSuccessAction\r\n    | IRefTokenFailedAction;","import React,{useState,SyntheticEvent} from 'react';\r\nimport { Link, useHistory,useLocation } from 'react-router-dom';\r\nimport {Logo, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport css from './login.module.css';\r\nimport { loginAction } from \"../../services/actions/auth\";\r\nimport { useDispatch } from '../../hooks/hooks';\r\n\r\nexport const LoginPage = () => {\r\n    const dispatch = useDispatch();\r\n    let history = useHistory();\r\n    const location = useLocation();\r\n    const [state, setState] = useState({\r\n        email:'',\r\n        password:''\r\n    });\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) =>{\r\n        setState({\r\n            ...state,\r\n            [e.target.name]:e.target.value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch<any>(loginAction(state))\r\n            .then(() => {\r\n                console.log(location.state?.from?.pathname || '/');\r\n                history.replace({ pathname: location.state?.from?.pathname || '/' })\r\n            });\r\n    };\r\n    return (\r\n        <>\r\n            <div className={css.login_box}>\r\n                <Logo/>\r\n                <form className={css.login_fields} onSubmit={handleSubmit}>\r\n                    <h3 className=\"text text_type_main-medium\">Вход</h3>\r\n                    <Input\r\n                        type={\"email\"}\r\n                        placeholder={\"E-mail\"}\r\n                        onChange={handleChange}\r\n                        name={\"email\"}\r\n                        value={state.email}\r\n                    />\r\n                    <Input\r\n                        type={\"password\"}\r\n                        placeholder={\"Пароль\"}\r\n                        size={\"default\"}\r\n                        onChange={handleChange}\r\n                        name={\"password\"}\r\n                        value={state.password}\r\n                    />\r\n                    {/*<PasswordInput />*/}\r\n                    <Button type=\"primary\" size=\"small\">\r\n                        <p className=\"text text_type_main-default\">Войти</p>\r\n                    </Button>\r\n                </form>\r\n                <div className={css.login_text}>\r\n                <span className=\"text text_type_main-default text_color_inactive\">Вы - новый пользователь?\r\n                    <Link to=\"/register\" className=\"text text_type_main-default pl-2\">Зарегистрироваться</Link>\r\n                </span>\r\n                    <br/>\r\n                    <span className=\"text text_type_main-default text_color_inactive\">Забыли пароль?\r\n                    <Link to=\"/forgot-password\"\r\n                          className=\"text text_type_main-default pl-2\">Восстановить пароль</Link>\r\n                </span>\r\n                </div>\r\n            </div>\r\n\r\n        </>);\r\n\r\n}\r\n","import React, { SyntheticEvent, useState } from 'react';\r\nimport { useDispatch } from '../../hooks/hooks';\r\nimport { Link } from 'react-router-dom';\r\nimport { Logo, Input, PasswordInput, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { registerAction } from '../../services/actions/auth';\r\nimport css from './register.module.css';\r\n\r\nexport const RegisterPage = () => {\r\n    const dispatch = useDispatch();\r\n    const [formData, setFormData] = useState({name:'',email:'',password:''});\r\n    const fieldChange = (e:React.ChangeEvent<HTMLInputElement>) => {\r\n        setFormData({\r\n            ...formData,\r\n            [e.target.name] : e.target.value\r\n        })\r\n    };\r\n    const handleSubmit = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch(registerAction(formData))\r\n            //.then(() => history.replace({ pathname: '/login' }));\r\n        console.log(formData);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className={css.reg_box}>\r\n                <Logo />\r\n                <form className={css.reg_fields} onSubmit={handleSubmit}>\r\n                    <h3 className=\"text text_type_main-medium\" >Регистрация</h3>\r\n                    <Input name={'name'} value={formData.name} onChange={fieldChange} type={\"text\"} placeholder={\"Имя\"}/>\r\n                    <Input name={'email'} value={formData.email} onChange={fieldChange} type={\"email\"} placeholder={\"E-mail\"}/>\r\n                    <PasswordInput onChange={fieldChange} value={formData.password} name={'password'}/>\r\n                    <Button type=\"primary\" size=\"small\">\r\n                        <p className=\"text text_type_main-default\">Зарегистрироваться</p>\r\n                    </Button>\r\n                </form>\r\n            </div>\r\n            <div className={css.reg_text}>\r\n                <span className=\"text text_type_main-default text_color_inactive\">Уже зарегистрированы?\r\n                    <Link to=\"/login\" className=\"text text_type_main-default pl-2\">Войти</Link>\r\n                </span>\r\n            </div>\r\n\r\n        </>)\r\n}\r\n","import React, {SyntheticEvent, useState} from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport {Logo, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport css from './forgot-password.module.css';\r\nimport * as config from \"../../config\";\r\nimport { useSelector } from '../../hooks/hooks';\r\nimport {checkResponse} from \"../../utils/api-requests\";\r\n\r\nexport const ForgotPasswordPage = () => {\r\n    const [email, setEmail] = useState('');\r\n    let history = useHistory();\r\n    const authorized = useSelector(store => store.auth.authorized);\r\n    const handleSubmit = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        fetch(config.pwForgotUrl,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({'email': email})\r\n        })\r\n            .then((res) => {\r\n                history.replace({ pathname: '/reset-password' });\r\n                return checkResponse(res);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                alert('Error ' + error + ' while connecting to Api');\r\n            });\r\n    }\r\n\r\n    if(authorized) {\r\n        history.replace({ pathname: '/' });\r\n        return null;\r\n    } else {\r\n        return(\r\n            <>\r\n                <div className={css.login_box}>\r\n                    <Logo />\r\n                    <form className={css.login_fields} onSubmit={handleSubmit}>\r\n                        <h3 className=\"text text_type_main-medium\">Восстановление пароля</h3>\r\n                        <Input type={\"email\"} placeholder={\"Укажите e-mail\"} onChange={(event)=>setEmail(event.target.value)} value={email}/>\r\n                        <Button type=\"primary\" size=\"small\" >\r\n                            <p className=\"text text_type_main-default\">Восстановить</p>\r\n                        </Button>\r\n                    </form>\r\n                    <div className={css.login_text}>\r\n                        <span className=\"text text_type_main-default text_color_inactive\">Вспомнили пароль?\r\n                            <Link to=\"/login\" className=\"text text_type_main-default pl-2\">Войти</Link>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n            </>);\r\n        }\r\n\r\n}\r\n","import React, {SyntheticEvent} from 'react';\r\nimport { Link, useHistory} from 'react-router-dom';\r\nimport {Logo, Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport css from './reset-password.module.css';\r\nimport * as config from \"../../config\";\r\nimport {useSelector} from '../../hooks/hooks'\r\nimport {checkResponse} from \"../../utils/api-requests\";\r\n\r\nexport const ResetPasswordPage = () => {\r\n    const [password, setPassword] = React.useState('');\r\n    const [token, setToken] = React.useState('');\r\n    const authorized = useSelector(store => store.auth.authorized);\r\n    let history = useHistory();\r\n    const handleSubmit = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        fetch(config.pwResetUrl,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({'password': password, 'token':token})\r\n        })\r\n            .then(checkResponse)\r\n            .then(result => {\r\n                console.log(result)\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                alert('Error ' + error + ' while connecting to Api');\r\n            });\r\n    }\r\n\r\n    if(authorized) {\r\n        history.replace({ pathname: '/' });\r\n        return null;\r\n    } else {\r\n        return (\r\n            <>\r\n                <div className={css.login_box}>\r\n                    <Logo/>\r\n                    <form className={css.login_fields} onSubmit={handleSubmit}>\r\n                        <h3 className=\"text text_type_main-medium\">Восстановление пароля</h3>\r\n                        <Input type={\"password\"} placeholder={\"Введите новый пароль\"} value={password}\r\n                               onChange={(event) => setPassword(event.target.value)}/>\r\n                        <Input type={\"text\"} placeholder={\"Введите код из письма\"} value={token}\r\n                               onChange={(event) => setToken(event.target.value)}/>\r\n\r\n                        <Button type=\"primary\" size=\"small\">\r\n                            <p className=\"text text_type_main-default\">Сохранить</p>\r\n                        </Button>\r\n                    </form>\r\n                    <div className={css.login_text}>\r\n                    <span className=\"text text_type_main-default text_color_inactive\">Вспомнили пароль?\r\n                        <Link to=\"/register\" className=\"text text_type_main-default pl-2\">Войти</Link>\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n            </>);\r\n    }\r\n}\r\n","import s from \"./profile.module.css\"\r\nimport { NavLink, useLocation } from \"react-router-dom\";\r\nimport React from \"react\";\r\nimport {useDispatch} from '../../hooks/hooks';\r\nimport {logoutAction} from '../../services/actions/auth';\r\n\r\nexport function Links() {\r\n    const { pathname } = useLocation();\r\n    const dispatch = useDispatch();\r\n    //let history = useHistory();\r\n\r\n    const handleExit = () => {\r\n        //let res = dispatch(logoutAction());\r\n        dispatch(logoutAction());\r\n        //console.log(res)\r\n        //res && history.replace({ pathname: '/login' }) // как правильно привязать переадресацию к успешному действию? 8-(\r\n    }\r\n\r\n    return (\r\n        <nav className={s.nav_list+' pt-5 mb-20'}>\r\n\r\n            <NavLink exact to=\"/profile\"\r\n                className={s.link + \" text text_type_main-medium text_color_inactive\"}\r\n                activeClassName={s.link_active}>\r\n                <span className='ml-2 pu-5 pb-5'>Профиль</span>\r\n            </NavLink>\r\n\r\n            <NavLink exact to=\"/profile/orders\"\r\n                className={s.link + \" text text_type_main-medium text_color_inactive\"}\r\n                activeClassName={s.link_active}>\r\n                <span className='ml-2 pu-5 pb-5'>История заказов</span>\r\n            </NavLink>\r\n\r\n            <NavLink exact to=\"/login\"\r\n                     className={s.link + \" text text_type_main-medium text_color_inactive\"}\r\n                     activeClassName={s.link_active}>\r\n                <span className='ml-2 pu-5 pb-5' onClick={handleExit}>Выход</span>\r\n            </NavLink>\r\n\r\n            <div className=\"pt-20\">\r\n                <p className=\"text text_type_main-default text_color_inactive\">В этом разделе Вы можете</p>\r\n                {pathname === '/profile' && (\r\n                    <p className=\"text text_type_main-default text_color_inactive\">изменить свои персональные данные</p>\r\n                ) }\r\n                {pathname === '/profile/orders' && (\r\n                    <p className=\"text text_type_main-default text_color_inactive\">просмотреть свою историю заказов</p>\r\n                ) }\r\n            </div>\r\n\r\n\r\n        </nav>\r\n    )\r\n}\r\n","import React, { FC } from 'react';\r\nimport { Redirect, Route, useLocation, RouteProps } from 'react-router-dom';\r\nimport {useSelector} from '../../hooks/hooks'\r\n\r\nexport const ProtectedRoute: FC<RouteProps> = ({ children, ...rest }) => {\r\n    const authorized = useSelector(store => store.auth.authorized);\r\n    const location = useLocation();\r\n    if (authorized) {\r\n        return (\r\n            <Route {...rest}>\r\n                {children}\r\n            </Route>\r\n        )\r\n    } else {\r\n        return (<Redirect\r\n            to={{\r\n                pathname: '/login',\r\n                state: {from: location}\r\n            }}\r\n        />)\r\n    }\r\n};\r\n","export const formatDate = (date: Date): string => {\r\n  let today = new Date();\r\n  let targetDate = new Date(date);\r\n  let hours: string | number = targetDate.getHours();\r\n  let minutes: string | number = targetDate.getMinutes();\r\n  if (hours < 10) hours = '0' + hours;\r\n  if (minutes < 10) minutes = '0' + minutes;\r\n  let msInDay = 24 * 60* 60 * 1000;\r\n  today.setHours(0,0,0,0);\r\n  targetDate.setHours(0,0,0,0);\r\n  let dif: string | number = (+today - +targetDate)/msInDay;\r\n  if (dif === 0) dif = 'Сегодня';\r\n  if (dif === 1) dif = 'Вчера';\r\n  if (dif > 1) dif = dif + ' дн. назад';\r\n  let timeZone = (targetDate.getTimezoneOffset())/60;\r\n\r\n  return dif + ', ' + hours + ':' + minutes + ' i-GMT' + (timeZone > 0 ? timeZone : '+'  + timeZone * -1);\r\n}","import React from 'react';\r\nimport { useEffect, useState } from 'react'\r\nimport {useSelector} from '../../hooks/hooks'\r\nimport styles from './feed-item.module.css'\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components'\r\nimport { formatDate } from '../../utils/fdate'\r\nimport { useLocation, Link } from 'react-router-dom'\r\nimport { TIngredient, TOrder } from '../../types'\r\n\r\nexport function FeedItem(props: { order: TOrder; showStatus: boolean }) {\r\n    const showCount = 5;\r\n    const location = useLocation();\r\n    const {order, showStatus} = props;\r\n    const orderNumber = order.number;\r\n    const { data } = useSelector((store) => store.ingr);\r\n    const [orderIngredients, setOrderIngredients] = useState<TIngredient[]>([]);\r\n    const [price, setPrice] = useState(0);\r\n    const [images, setImages] = useState<string[]>([]);\r\n    const [count, setCount] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (data.length) {\r\n            let totalPrice = 0;\r\n            let targetIngredients: TIngredient[] = [];\r\n            let bun:boolean = false;\r\n            order?.ingredients?.forEach((ingredient) => {\r\n                let targetIngredient: TIngredient = data.filter(item => item['_id'] === ingredient)[0];\r\n                if (targetIngredient?.price) {\r\n                    targetIngredients.push(targetIngredient);\r\n                    if (targetIngredient.type === 'bun' && !bun) {\r\n                        totalPrice += 2 * targetIngredient.price;\r\n                        bun = true;\r\n                    }\r\n                    if ((targetIngredient.type !== 'bun'))\r\n                        totalPrice += targetIngredient.price\r\n                }\r\n            });\r\n            setPrice(totalPrice);\r\n            setOrderIngredients(targetIngredients)\r\n        }\r\n    }, [data, order.ingredients]);\r\n\r\n\r\n    const getStatus = (status:string) => {\r\n        if (status === 'done') return 'Выполнен';\r\n        if (status === 'created') return 'Создан';\r\n        if (status === 'pending') return 'Готовится';\r\n        return false\r\n    }\r\n\r\n    useEffect(() => {\r\n        let bun:boolean = false;\r\n        let targetImages: string[] = [];\r\n        orderIngredients.forEach(ingredient => {\r\n            if (ingredient.type === 'bun' && !bun) {\r\n                bun = true;\r\n                targetImages.push(ingredient['image_mobile'])\r\n            }\r\n            if (ingredient.type !== 'bun') {\r\n                targetImages.push(ingredient['image_mobile'])\r\n            }\r\n        });\r\n        setImages(targetImages);\r\n        setCount(targetImages.length)\r\n    }, [orderIngredients]);\r\n\r\n    //console.log(location)\r\n    return (\r\n        <Link\r\n            key={orderNumber}\r\n            to={{\r\n                pathname: `${location.pathname}/${orderNumber}`,\r\n                state: { background: location },\r\n            }}\r\n            className={styles.link}\r\n        >\r\n            <section className={styles.order}>\r\n                <div className={styles.header}>\r\n                    <p className=\"text text_type_digits-default\">{'#' + order.number}</p>\r\n                    <p className=\"text text_type_main-default text_color_inactive\">{formatDate(order.createdAt)}</p>\r\n                </div>\r\n                <p className={styles.name + ' text text_type_main-medium pb-6 pt-6'}>\r\n                    {order.name}<br/>\r\n                    {showStatus && <span className=\"text text_type_main-default\" style={{color: (order.status=== 'done')?'#00CCCC':'#FFFFFF'}}>{getStatus(order.status)}</span>}\r\n                </p>\r\n                <div className={styles.footer}>\r\n                    <div className={styles.images}>\r\n                        {\r\n                            images.map((image, i) => {\r\n                                let left = -i * 15;\r\n                                if (i <= showCount - 1)\r\n                                    return  <div key={i} className={styles.imageWrapper} style={{left: left, zIndex: 100 - i}}>\r\n                                        <img className={styles.image} src={image} alt=\"\" />\r\n                                    </div>\r\n                                if (i === showCount)\r\n                                    return  <div key={i} className={styles.imageWrapper} style={{left: left, zIndex: 100 - i}}>\r\n                                        <p className={styles.count + ' text text_type_digits-default'}>{'+' + (count - showCount + 1)}</p>\r\n                                        <img className={styles.image} style={{opacity: 0.5}} src={image} alt=\"\" />\r\n                                    </div>\r\n                                return false\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <div className={styles.coast}>\r\n                        <span className='text text_type_digits-default pr-2'>{price}</span>\r\n                        <CurrencyIcon type=\"primary\"/>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </Link>\r\n    )\r\n}\r\n","import { TMessage } from '../../types'\r\n\r\nexport const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR:'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED:'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE:'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE:'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\n\r\nexport type StartAction = {\r\n    type: typeof WS_CONNECTION_START\r\n    payload : string\r\n}\r\nexport type CloseAction = {\r\n    type: typeof WS_CONNECTION_CLOSE\r\n}\r\nexport type SuccessAction = {\r\n    type: typeof WS_CONNECTION_SUCCESS\r\n}\r\n\r\nexport type ErrorAction = {\r\n    type: typeof WS_CONNECTION_ERROR\r\n    payload: WebSocketEventMap|null\r\n}\r\n\r\nexport type ClosedAction = {\r\n    type: typeof WS_CONNECTION_CLOSED\r\n}\r\n\r\nexport type GetAction = {\r\n    type: typeof WS_GET_MESSAGE\r\n    payload: TMessage\r\n}\r\n\r\nexport type SendAction = {\r\n    type: typeof WS_SEND_MESSAGE\r\n    payload : string\r\n}\r\n\r\n\r\n\r\nexport type TWSActions =\r\n    | StartAction\r\n    | SuccessAction\r\n    | ErrorAction\r\n    | ClosedAction\r\n    | GetAction\r\n    | SendAction;\r\n\r\nexport type TWSActionNames = {\r\n    [key in TWSActions['type']] : key\r\n}","import React from 'react';\r\nimport { useEffect, useState } from 'react'\r\nimport {useSelector, useDispatch} from '../../hooks/hooks'\r\nimport { FeedItem } from '../feed-item/feed-item'\r\nimport { config } from '../../config'\r\nimport styles from './orders.module.css'\r\nimport {getCookie} from \"../../utils/cookie\";\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from '../../services/actions/wsActions'\r\nimport { TOrder } from '../../types'\r\n\r\nexport function Orders() {\r\n    const dispatch = useDispatch();\r\n    const { messages } = useSelector((store) => store.messages);\r\n    const [orders, setOrders] = useState<TOrder[]>([]);\r\n    let accessToken = getCookie('token'), token = '';\r\n    if (accessToken) token = accessToken.split(' ')[1];\r\n\r\n    useEffect(() => {\r\n        //console.log(accessToken);\r\n        //console.log(config.feedsUserUrl);\r\n        dispatch({\r\n            type: WS_CONNECTION_START,\r\n            payload: config.feedsUserUrl + accessToken\r\n        });\r\n        return () => {\r\n            dispatch({type: WS_CONNECTION_CLOSED})\r\n        }\r\n    }, [dispatch, token]);\r\n\r\n    useEffect(() => {\r\n        if (messages?.orders) {\r\n            setOrders(messages.orders);\r\n        }\r\n    }, [messages]);\r\n\r\n    return (\r\n        <div className={ styles.feed }>\r\n            {\r\n                Boolean(orders.length)\r\n                    ? orders.map(item => item?.ingredients?.length ? <FeedItem key={item['_id']} order={item} showStatus={true}/> : false)\r\n                    : <p className=\"text text_type_main-default text_color_inactive pt-4\">У Вас еще не было заказов</p>\r\n            }\r\n        </div>\r\n    )\r\n}","import React,{useEffect, SyntheticEvent} from \"react\";\r\nimport { Route, Switch} from \"react-router-dom\";\r\nimport { Input, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport css from \"./profile.module.css\";\r\nimport {Links} from \"./links\";\r\nimport {useSelector, useDispatch} from '../../hooks/hooks';\r\nimport { TUser } from '../../types'\r\nimport { getUserAction,updateUserAction} from \"../../services/actions/auth\";\r\nimport {ProtectedRoute} from '../../components/protected-route';\r\nimport {Orders} from '../../components/orders/orders';\r\nexport const ProfilePage = () => {\r\n    const dispatch = useDispatch();\r\n    const emptyState:TUser = {\r\n        name    : \"\",\r\n        email   : \"\",\r\n        password: \"\"\r\n    };\r\n    const [defaultState, setDefaultState] = React.useState(emptyState);\r\n    const [state, setState] = React.useState(emptyState);\r\n    const user = useSelector((store) => store.auth.user);\r\n\r\n    const handleInputChange = (e:React.ChangeEvent<HTMLInputElement> ) => {\r\n        const target = e.target;\r\n        setState({\r\n            ...state,\r\n            [ target.name]: target.value\r\n        });\r\n    };\r\n    const handleSubmit = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        dispatch(updateUserAction(state))\r\n    };\r\n    const handleReset = (e: SyntheticEvent) => {\r\n        e.preventDefault();\r\n        setState(defaultState);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        setState(user);\r\n        setDefaultState({\r\n            ...user,\r\n            ...{password:''}\r\n        });\r\n    },[user]);\r\n\r\n    useEffect(()=>{\r\n        dispatch(getUserAction())\r\n    },[]);\r\n\r\n    return(\r\n        <>\r\n            <div className={css.profile_main+\" pt-20\"} >\r\n                <div className={css.profile_col}>\r\n                    <Links/>\r\n                </div>\r\n                <div className={css.profile_col}>\r\n                    <Switch>\r\n                        <Route path=\"/profile\" exact={true}>\r\n                            <form className={css.profile_form} onSubmit={handleSubmit}>\r\n                                <Input\r\n                                    type={\"text\"}\r\n                                    placeholder={\"Имя\"}\r\n                                    onChange={handleInputChange}\r\n                                    icon={\"EditIcon\"}\r\n                                    value={state.name||''}\r\n                                    name={\"name\"}\r\n                                    size={\"default\"}\r\n                                />\r\n                                <Input\r\n                                    type={\"text\"}\r\n                                    placeholder={\"Email\"}\r\n                                    onChange={handleInputChange}\r\n                                    icon={\"EditIcon\"}\r\n                                    name={\"email\"}\r\n                                    value={state.email}\r\n\r\n                                />\r\n                                <Input\r\n                                    type={\"password\"}\r\n                                    placeholder={\"Пароль\"}\r\n                                    onChange={handleInputChange}\r\n                                    icon={\"EditIcon\"}\r\n                                    name={\"password\"}\r\n                                    value={state.password||''}\r\n                                    size={\"default\"}\r\n                                />\r\n                                <Button type=\"primary\" size=\"small\" >\r\n                                    <p className=\"text text_type_main-default\">Сохранить</p>\r\n                                </Button>\r\n                                <Button type=\"secondary\" size=\"small\" onClick={handleReset}>\r\n                                    <p className=\"text text_type_main-default\">Отмена</p>\r\n                                </Button>\r\n                            </form>\r\n                        </Route>\r\n                        <ProtectedRoute path=\"/profile/orders\" exact={true}>\r\n                            <Orders/>\r\n                        </ProtectedRoute>\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        </>);\r\n}\r\n","import React from \"react\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from '../../hooks/hooks';\r\nimport { FeedItem } from '../../components/feed-item/feed-item';\r\nimport styles from './feed.module.css';\r\nimport { config } from '../../config';\r\nimport { TOrder } from '../../types';\r\nimport {WS_CONNECTION_START, WS_CONNECTION_CLOSED} from '../../services/actions/wsActions';\r\n\r\nexport function FeedPage() {\r\n    const dispatch = useDispatch();\r\n    const [total, setTotal] = useState(0);\r\n    const [totalToday, setTotalToday] = useState(0);\r\n    const [orders, setOrders] = useState<TOrder[]>([]);\r\n    const { messages } = useSelector((store) => store.messages);\r\n    const [createdNumbers, setCreatedNumbers] = useState<TOrder[][]>([]);\r\n    const [doneNumbers, setDoneNumbers] = useState<TOrder[][]>([]);\r\n\r\n    useEffect(() => {\r\n        dispatch({type: WS_CONNECTION_START, payload: config.feedsUrl});\r\n        return () => {\r\n            dispatch({type: WS_CONNECTION_CLOSED})\r\n        }\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (messages?.orders) {\r\n            setOrders(messages.orders);\r\n            setTotal(messages.total);\r\n            setTotalToday(messages.totalToday)\r\n        }\r\n    }, [messages]);\r\n\r\n    const splitArr = (arr: any, size: number) => arr.reduce((item: any, c: any) => {\r\n        if(item[item.length-1].length === size) {item.push([]);}\r\n        item[item.length-1].push(c);\r\n        return item;\r\n    }, [[]]);\r\n\r\n    useEffect(() => {\r\n        if (orders.length) {\r\n            const created = orders.filter(item => item.status === 'created');\r\n            const done = orders.filter(item => item.status === 'done');\r\n            setCreatedNumbers(splitArr(created, 10));\r\n            setDoneNumbers(splitArr(done, 10))\r\n        }\r\n    }, [orders]);\r\n\r\n    return (\r\n        <div>\r\n            <p className=\"text text_type_main-large pt-4 pb-6\">\r\n                Лента заказов\r\n            </p>\r\n            <section className={ styles.content }>\r\n                <div className={ styles.feed }>\r\n                    { Boolean(orders.length) && orders.map(item => item?.ingredients?.length ? <FeedItem key={item['_id']} order={item} showStatus={false} /> : false) }\r\n                </div>\r\n\r\n                <div className={ styles.feedInfo + ' pl-8'}>\r\n                    <div className={ styles.statusesWrapper }>\r\n                        <section className={ styles.statuses }>\r\n                            <p className=\"text text_type_main-medium pb-6\">Готовы:</p>\r\n                            <div className={ styles.statusesColumns }>\r\n                                {\r\n                                    doneNumbers.length && doneNumbers[0].length\r\n                                        ? doneNumbers.map((doneNumbersColumn, i) =>\r\n                                            <div key={i} className={ styles.statusesColumn }>\r\n                                                { doneNumbersColumn.map(item => <span key={item.number} className={ styles.done + ' text text_type_digits-default' }>{item.number}</span>) }\r\n                                            </div>)\r\n                                        : <p className=\"text text_type_main-medium text_color_inactive\">нет</p>\r\n                                }\r\n                            </div>\r\n                        </section>\r\n                        <section>\r\n                            <p className=\"text text_type_main-medium pb-6\">В работе:</p>\r\n                            <div className={ styles.statusesColumns }>\r\n                                {\r\n                                    createdNumbers.length && createdNumbers[0].length\r\n                                        ? createdNumbers.map((createdNumbersColumn, i) =>\r\n                                            <div key={i} className={ styles.statusesColumn }>\r\n                                                { createdNumbersColumn.map(item => <span key={item.number} className=\"text text_type_digits-default\">{item.number}</span>) }\r\n                                            </div>)\r\n                                        : <p className=\"text text_type_main-medium text_color_inactive\">нет</p>\r\n                                }\r\n                            </div>\r\n                        </section>\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"text text_type_main-medium mt-10\">Выполнено за все время:</p>\r\n                        <p className=\"text text_type_digits-large\">{total}</p>\r\n\r\n                        <p className=\"text text_type_main-medium mt-10\">Выполнено за сегодня:</p>\r\n                        <p className=\"text text_type_digits-large\">{totalToday}</p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport css from './order.module.css';\r\nimport { useState, useEffect }  from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useSelector, useDispatch} from '../../hooks/hooks';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport { TIngredient } from '../../types';\r\nimport { formatDate } from '../../utils/fdate';\r\nimport { getOrder } from '../../services/actions/order';\r\n\r\nexport function Order() {\r\n    const dispatch = useDispatch();\r\n      const { order, orderRequest, orderFailed } = useSelector((store) => store.order);\r\n      const { data } = useSelector((store) => store.ingr);\r\n      const { id } = useParams<{ id: string }>();\r\n      const [orderIngredients, setOrderIngredients] = useState<TIngredient[] | null>(null);\r\n      const [price, setPrice] = useState(0);\r\n\r\n    const getStatusColor = (status:string) => status === 'done' ? '#00CCCC' : '#FFFFFF';\r\n    useEffect(() => {\r\n        dispatch(getOrder(id))\r\n    }, [dispatch, id]);\r\n\r\n\r\n    const getStatus = (status: string) => {\r\n        if (status === 'done') {\r\n            return 'Выполнен'\r\n        } else if (status === 'created') {\r\n            return 'Создан'\r\n        } else if (status === 'pending') {\r\n            return 'Готовится'\r\n        }\r\n        return false;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (data.length) {\r\n            let totalPrice = 0;\r\n            let bun = 0;\r\n            order?.ingredients?.forEach((ingredient:string) => {\r\n                let targetIngredient = data.filter(item => item['_id'] === ingredient)[0];\r\n                if (targetIngredient.type === 'bun' && !bun) {\r\n                    totalPrice += 2 * targetIngredient.price;\r\n                    bun = 1\r\n                }\r\n                if ((targetIngredient.type !== 'bun'))\r\n                    totalPrice += targetIngredient.price\r\n            });\r\n            setPrice(totalPrice);\r\n\r\n            let orderIngredientsSet = new Set();\r\n            let orderIngredientsList: TIngredient[] = [];\r\n            order?.ingredients?.forEach(item => orderIngredientsSet.add(item));\r\n            orderIngredientsSet.forEach(value => orderIngredientsList.push(data.filter(ingredient => ingredient['_id'] === value)[0]));\r\n            orderIngredientsList.forEach(item => {\r\n                item.type === 'bun'\r\n                    ? item.count = 2\r\n                    : item.count = order?.ingredients.filter(ingredient => ingredient === item['_id']).length\r\n            });\r\n            setOrderIngredients(orderIngredientsList)\r\n        }\r\n\r\n    }, [data, order]);\r\n\r\n    if (orderFailed) {\r\n        return <p className=\"text text_type_main-default text_color_inactive\">Произошла ошибка при получении данных о заказе</p>\r\n    } else if (orderRequest) {\r\n        return <p className=\"text text_type_main-default text_color_inactive\">Загрузка заказа...</p>\r\n    } else {\r\n        return (\r\n            (order) &&\r\n                <section className={css.orderInfo}>\r\n                    <p className={css.orderHeader +\" text text_type_digits-default pt-4\"}>#{order.number}</p>\r\n                    <p className=\"text text_type_main-medium pt-10\">{order.name}</p>\r\n                    <p className=\"text text_type_main-default pt-2\">\r\n                        <span style={{color: getStatusColor('done')}}>{getStatus(order.status)}</span>\r\n                    </p>\r\n                    <p className=\"text text_type_main-medium pt-15 pb-4\">Состав:</p>\r\n                    <div className={css.orderWrapper + ' pr-2'}>\r\n                          {\r\n                        Boolean(orderIngredients) &&\r\n                    orderIngredients?.map((ingredient, i) => {\r\n                        return  <div key={i} className={css.order + ' mt-4 pb-2'}>\r\n                        <div className={css.info}>\r\n                        <div className={css.imageWrapper + ' mr-4'}>\r\n                        <img className={css.image} src={ingredient.image_mobile} alt=\"\" />\r\n                            </div>\r\n                            <div className={css.name + ' text text_type_main-default'}>\r\n                            {ingredient.name}\r\n                            </div>\r\n                            </div>\r\n\r\n                            <div className={css.price + ' text text_type_digits-default'}>\r\n                        <span className=\"pr-2\">\r\n                            {(ingredient.count && ingredient.count > 1) && ingredient.count + ' x '}\r\n                        {ingredient.price}\r\n                        </span>\r\n                        <CurrencyIcon type=\"primary\"/>\r\n                            </div>\r\n                            </div>\r\n                    })\r\n            }\r\n                    </div>\r\n                    <div className={css.footer + ' mt-10 pr-2 pb-10'}>\r\n                        <p className=\"text text_type_main-default text_color_inactive\">{formatDate(order.createdAt)}</p>\r\n                        <div className={css.price + ' text text_type_digits-default'}>\r\n                            <span className=\"pr-2\">\r\n                                {price}\r\n                            </span>\r\n                        <CurrencyIcon type=\"primary\"/>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport {Order} from '../../components/order/order';\r\nimport styles from './order.module.css';\r\n\r\nexport function OrderPage() {\r\n    return (\r\n        <div className={styles.orderPage}>\r\n            <Order/>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport css from './app.module.css';\r\nimport {AppHeader} from '../app-header';\r\nimport {BurgerIngredients} from '../burger-ingredients';\r\nimport {BurgerConstructor} from '../burger-constructor';\r\nimport {INGREDIENTS_CHOOSE, COUNTER_UP} from '../../services/actions';\r\nimport {getIngredients} from '../../services/actions/ingredients';\r\nimport { useDispatch} from '../../hooks/hooks'\r\nimport {DndProvider} from \"react-dnd\";\r\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\r\nimport {BrowserRouter, Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\nimport {LoginPage, RegisterPage, ForgotPasswordPage,ResetPasswordPage, ProfilePage, FeedPage, OrderPage} from '../../pages';\r\nimport {ProtectedRoute} from '../protected-route';\r\nimport {Modal} from \"../modal\";\r\nimport {IngredientDetails} from \"../ingredient-details\";\r\nimport {Order} from '../order/order';\r\nimport { TIngredient } from '../../types';\r\n\r\nexport const App = () => {\r\n    const ModalSwitch = () => { // Сделано для возможности использования useLocation. Немного некрасиво, подскажите, пожалуйста, как сделать лучше?\r\n        let location = useLocation();\r\n        const history = useHistory();\r\n        const dispatch = useDispatch();\r\n        let [modalActive, setModalActive] = useState(false);\r\n        const onClose = (e: Event) => {\r\n            if(e) e.stopPropagation();\r\n            history.goBack()\r\n        }\r\n        // Наличие клика по игредиенту\r\n        let background = (history.action === 'PUSH' || history.action === 'REPLACE') && location.state && location.state.background;\r\n        useEffect(() => {\r\n            dispatch(getIngredients());\r\n        }, [dispatch]);\r\n        const handleDrop = (item:TIngredient) => {\r\n            dispatch({\r\n                type: INGREDIENTS_CHOOSE,\r\n                item: item\r\n            })\r\n            dispatch({\r\n                type: COUNTER_UP,\r\n                key: item._id,\r\n                typeItem: item.type\r\n            })\r\n        };\r\n        return (\r\n            <div className={css.main_rect}>\r\n                    <AppHeader/>\r\n                    <Switch location={background || location}>\r\n                        <Route path={['/','/react-burger']} exact={true}>\r\n                            <main className={css.main_columns}>\r\n                                <DndProvider backend={HTML5Backend}>\r\n                                    <BurgerIngredients/>\r\n                                    <BurgerConstructor onDropHandler={handleDrop}/>\r\n                                </DndProvider>\r\n                            </main>\r\n                        </Route>\r\n                        <Route path='/login' exact={true}>\r\n                            <LoginPage/>\r\n                        </Route>\r\n                        <Route path='/register' exact={true}>\r\n                            <RegisterPage/>\r\n                        </Route>\r\n                        <Route path='/forgot-password' exact={true}>\r\n                            <ForgotPasswordPage/>\r\n                        </Route>\r\n                        <Route path='/reset-password' exact={true}>\r\n                            <ResetPasswordPage/>\r\n                        </Route>\r\n\r\n                        <Route path='/feed' exact={true} >\r\n                            <FeedPage />\r\n                        </Route>\r\n                        <Route path='/feed/:id' exact={true} >\r\n                            <OrderPage />\r\n                        </Route>\r\n\r\n                        <ProtectedRoute path='/profile/orders/:id' exact={true} >\r\n                            <OrderPage />\r\n                        </ProtectedRoute>\r\n\r\n                        <ProtectedRoute path={`/profile`}>\r\n                            <ProfilePage/>\r\n                        </ProtectedRoute>\r\n\r\n                        <Route path='/ingredients/:id' exact={true}>\r\n                                <IngredientDetails/>\r\n                        </Route>\r\n                        <Route>\r\n                            <h1>Ошибка 404: страница не найдена</h1>\r\n                        </Route>\r\n                    </Switch>\r\n                {background && modalActive &&\r\n                (<>\r\n                    <Route\r\n                        path='/ingredients/:id'\r\n                        children={\r\n                            <Modal header=\"Детали ингредиента\" onClose={onClose}>\r\n                                <IngredientDetails />\r\n                            </Modal>\r\n                        }\r\n                    />\r\n                 </>\r\n                )}\r\n                {background && (\r\n                <>\r\n                    <Route\r\n                        path='/feed/:id'\r\n                        children={\r\n                            <Modal onClose={onClose}>\r\n                               <Order/>\r\n                            </Modal>\r\n                        }\r\n                    />\r\n                </>\r\n                )}\r\n                {background && (\r\n                    <>\r\n                        <Route\r\n                            path='/profile/orders/:id'\r\n                            children={\r\n                                <Modal onClose={onClose}>\r\n                                    <Order/>\r\n                                </Modal>\r\n                            }\r\n                        />\r\n                    </>\r\n                )}\r\n\r\n            </div>\r\n        );\r\n    };\r\n    return (\r\n        <BrowserRouter>\r\n            <ModalSwitch />\r\n        </BrowserRouter>\r\n    )\r\n\r\n}\r\n\r\nexport default App;","import { Dispatch, AnyAction } from 'redux'\r\nimport {\r\n    TWSActionNames,\r\n    TWSActions\r\n} from '../actions/wsActions';\r\n\r\nexport const socketMiddleware = (wsActions: TWSActionNames) => {\r\n    return (store: { dispatch: Dispatch<TWSActions> }) => {\r\n        let socket: any = null;\r\n\r\n        return (next : (i: AnyAction) => void) => (action: TWSActions) => {\r\n            const { dispatch } = store;\r\n            //const token = getCookie('token');\r\n            if (action.type === wsActions.WS_CONNECTION_START) {\r\n                socket = new WebSocket(action.payload)\r\n            }\r\n            if (socket) {\r\n                socket.onopen = (event: WebSocketEventMap) => {\r\n                    dispatch({ type: wsActions.WS_CONNECTION_SUCCESS, payload: event })\r\n                };\r\n\r\n                socket.onerror = (event: WebSocketEventMap) => {\r\n                    dispatch({ type: wsActions.WS_CONNECTION_ERROR, payload: event })\r\n                };\r\n\r\n                socket.onmessage = (event: WebSocketEventMap & { data: string }) => {\r\n                    const { data } = event;\r\n                    const parsedData = JSON.parse(data);\r\n                    dispatch({ type: wsActions.WS_GET_MESSAGE, payload: parsedData })\r\n                };\r\n\r\n                socket.onclose = (event: WebSocketEventMap) => {\r\n                    dispatch({ type: wsActions.WS_CONNECTION_CLOSED, payload: event })\r\n                };\r\n\r\n                if (action.type === wsActions.WS_SEND_MESSAGE) {\r\n                    const message = action.payload;\r\n                    socket.send(JSON.stringify(message))\r\n                }\r\n            }\r\n\r\n            next(action)\r\n        }\r\n    }\r\n};","import * as config from '../../config';\r\nimport {AppDispatch as Dispatch, AppThunk} from '../../types';\r\nimport {INGREDIENTS_LOAD} from '../actions';\r\nimport {checkResponse} from \"../../utils/api-requests\";\r\n\r\nexport const getIngredients:AppThunk =() => {\r\n\treturn function(dispatch:Dispatch) {\r\n\t\tfetch(config.getIngredientsUrl)\r\n\t\t\t.then(checkResponse)\r\n\t\t\t.then(result => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: INGREDIENTS_LOAD,\r\n\t\t\t\t\tdata: result.data\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t\talert('Error ' + error + ' while connecting to Api');\r\n\t\t\t});\r\n\t}\r\n}\r\n\r\nexport interface IGetIngredientsAction {\r\n\treadonly type: typeof INGREDIENTS_LOAD;\r\n}\r\nexport type TIngredientsActions =\r\n\t| IGetIngredientsAction;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { TIngredient } from '../types'\r\n\r\n\r\nexport type TInitialState = {\r\n\tdata: TIngredient[],\r\n\tburgerIngredients: {\r\n\t\tbun: TIngredient|null,\r\n\t\tcontentItems:TIngredient[],\r\n\t\tcounts: {\r\n\t\t\t[name:string]:number\r\n\t\t}\r\n\t},\r\n\tportal: {}\r\n};\r\n\r\n\r\nexport const initialState:TInitialState = {\r\n\tdata: [],\r\n\tburgerIngredients: {\r\n\t\tbun: null,\r\n\t\tcontentItems:[],\r\n\t\tcounts: {}\r\n\t},\r\n\tportal: {}\r\n};\r\n","\r\nexport const RandomKey = function() {\r\n    let length:number = 24,\r\n        charset:string = \"abcdefghijklmnopqrstuvwxyz0123456789\",\r\n        count:number = charset.length,\r\n        retVal:string = \"\";\r\n    for (let i = 0, n = count; i < length; ++i) {\r\n        retVal += charset.charAt(Math.floor(Math.random() * n));\r\n    }\r\n    return retVal;\r\n}\r\n\r\n","import {\r\n    LOGIN,\r\n    REGISTER_SUCCESS,\r\n    REGISTER_FAILED,\r\n    LOGOUT,\r\n    REFRESH_TOKEN_REQUEST,\r\n    GET_USER_REQUEST,\r\n    GET_USER_SUCCESS,\r\n    GET_USER_FAILED, REFRESH_TOKEN_FAILED, REFRESH_TOKEN_SUCCESS\r\n} from '../actions/auth';\r\nimport {getCookie} from \"../../utils/cookie\";\r\nimport {AuthActions, AuthStore} from \"./auth.types\";\r\n\r\nconst initialState:AuthStore =\r\n    {\r\n        login: false, // ???\r\n        authorized : !!getCookie('token'),\r\n        //authorized:false,\r\n        user: {\r\n            name:'',\r\n            email:'',\r\n            password:''\r\n        },\r\n        getUserRequest:false,\r\n        refreshTokenRequest:false,\r\n        tokenIsGood:false\r\n};\r\n\r\nexport const authReducer = (state = initialState, action:AuthActions):AuthStore => {\r\n    switch (action.type) {\r\n\r\n        case REGISTER_SUCCESS: {\r\n            //const userObj = action.user;\r\n            return {\r\n                ...state\r\n            };\r\n        }\r\n        case REGISTER_FAILED:{\r\n            return {\r\n                ...state\r\n            };\r\n        }\r\n\r\n        case LOGIN: {\r\n            return {\r\n                ...state,\r\n                login: true,\r\n                authorized : true,\r\n                user: {\r\n                    ...state.user,\r\n                    name : action?.user?.name,\r\n                    email: action?.user?.email\r\n                }\r\n            };\r\n        }\r\n        case LOGOUT: {\r\n            return {\r\n                ...state,\r\n                login: false,\r\n                authorized : false,\r\n                user: {\r\n                    name : '',\r\n                    email: '',\r\n                    password : ''\r\n                }\r\n            };\r\n        }\r\n\r\n        case GET_USER_REQUEST: {\r\n            return {\r\n                ...state,\r\n                getUserRequest : true,\r\n                user: {\r\n                    ...state.user\r\n                }\r\n            }\r\n        }\r\n        case GET_USER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                getUserRequest : false,\r\n                authorized : true,\r\n                user: {\r\n                    name : action?.user?.name,\r\n                    email: action?.user?.email,\r\n                    password:''\r\n                }\r\n            }\r\n        }\r\n        case GET_USER_FAILED: {\r\n            return {\r\n                ...state,\r\n                getUserRequest : false,\r\n                authorized: false,\r\n                user: {\r\n                    name : '',\r\n                    email: '',\r\n                    password:''\r\n                }\r\n            }\r\n        }\r\n        case REFRESH_TOKEN_REQUEST: {\r\n            return {\r\n                ...state,\r\n                refreshTokenRequest: true,\r\n                tokenIsGood : false\r\n            }\r\n        }\r\n        case REFRESH_TOKEN_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                authorized : true,\r\n                refreshTokenRequest: false,\r\n                tokenIsGood : true\r\n            }\r\n        }\r\n        case REFRESH_TOKEN_FAILED: {\r\n            return {\r\n                ...state,\r\n                authorized : false,\r\n                refreshTokenRequest: false,\r\n                tokenIsGood : false\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n","import {OrderActions,TOrderStore} from './order.types';\r\nimport {\r\n    ORDER_LOAD,\r\n    GET_ORDER,\r\n    GET_ORDER_FAILED,\r\n    GET_ORDER_SUCCESS,\r\n    CLEAR_ORDER\r\n} from '../actions/index'\r\n\r\nconst initialState:TOrderStore =\r\n    {\r\n        number: 0,\r\n        order: null,\r\n        orderRequest: false,\r\n        orderFailed: false,\r\n    };\r\n\r\nexport const orderReducer = (state = initialState, action:OrderActions):TOrderStore => {\r\n    switch (action.type) {\r\n\r\n        case ORDER_LOAD:\r\n            return {\r\n                ...state,\r\n                number: action.number\r\n            };\r\n        case GET_ORDER: {\r\n            return {\r\n                ...state,\r\n                orderRequest: true,\r\n                orderFailed: false,\r\n            }\r\n        }\r\n        case GET_ORDER_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                order: action.order,\r\n                orderRequest: false\r\n            }\r\n        }\r\n        case GET_ORDER_FAILED: {\r\n            return {\r\n                ...state,\r\n                orderFailed: true,\r\n                orderRequest: false\r\n            }\r\n        }\r\n        case CLEAR_ORDER: {\r\n            return {\r\n                ...state,\r\n                number: 0,\r\n                order: null\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n}\r\n","import { WsStore } from './ws.type'\r\nimport {\r\n  TWSActions,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE\r\n} from '../actions/wsActions'\r\n\r\nconst initialState: WsStore = {\r\n  wsConnected: false,\r\n  messages: null,\r\n  error: ''\r\n};\r\n\r\nexport const wsReducer = (state = initialState, action: TWSActions):WsStore  => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        wsConnected: true\r\n      };\r\n\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        messages: null,\r\n        error: null,\r\n        wsConnected: false\r\n      };\r\n\r\n    case WS_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        messages: action.payload\r\n      };\r\n    default:\r\n      return state\r\n  }\r\n};","import {\r\n\tINGREDIENTS_LOAD,\r\n/*\tINGREDIENTS_LOAD_CONSTR,\r\n\tINGREDIENTS_VIEW_DETAILS,\r\n\tINGREDIENTS_DELETE_DETAILS,*/\r\n\tINGREDIENTS_CHOOSE,\r\n\tINGREDIENT_DELETE,\r\n\tMOVE_INGREDIENT,\r\n\tCOUNTER_UP,\r\n\tCOUNTER_DOWN,\r\n\tRESET_CONSTRUCTOR\r\n} from '../actions';\r\nimport {initialState, TInitialState} from '../initialState';\r\nimport {RandomKey} from '../../utils/random-key';\r\nimport {authReducer} from './auth';\r\nimport {orderReducer} from './order';\r\nimport { combineReducers } from 'redux';\r\nimport { wsReducer } from './wsReducer'\r\nimport { TIngredient } from '../../types'\r\nimport {Actions} from './burger-ingredient.types';\r\n\r\nexport const ingredientsReducer = (state = initialState, action:Actions):TInitialState => {\r\n\tswitch(action.type) {\r\n\t\tcase INGREDIENTS_LOAD:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tdata: action.data\r\n\t\t\t};\r\n\t\tcase RESET_CONSTRUCTOR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tburgerIngredients: initialState.burgerIngredients\r\n\t\t\t};\r\n/*\t\tcase INGREDIENTS_LOAD_CONSTR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tconstructor: []\r\n\t\t\t};\r\n\t\tcase INGREDIENTS_VIEW_DETAILS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tingredient: {}\r\n\t\t\t};\r\n\t\tcase INGREDIENTS_DELETE_DETAILS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tingredients: []\r\n\t\t\t};*/\r\n\r\n\t\tcase INGREDIENTS_CHOOSE:\r\n\t\t\tconst item = action.item;\r\n\t\t\tif (item.type === 'bun') {\r\n\t\t\t\t//console.log(item)\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tburgerIngredients: {\r\n\t\t\t\t\t\t...state.burgerIngredients,\r\n\t\t\t\t\t\tbun: item\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconst chosenItem = { ...item, productId: RandomKey() }\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tburgerIngredients: {\r\n\t\t\t\t\t\t...state.burgerIngredients,\r\n\t\t\t\t\t\tcontentItems: [\r\n\t\t\t\t\t\t\t...state.burgerIngredients.contentItems,\r\n\t\t\t\t\t\t\tchosenItem\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\r\n\t\tcase INGREDIENT_DELETE: {\r\n\t\t\t//console.log(action);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tburgerIngredients: {\r\n\t\t\t\t\t...state.burgerIngredients,\r\n\t\t\t\t\tcontentItems: [...state.burgerIngredients.contentItems].filter((el:TIngredient) => el.productId !== action.id)\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase COUNTER_DOWN: {\r\n\t\t\t//console.log(action);\r\n\t\t\tif (action.typeItem !== 'bun') {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tburgerIngredients: {\r\n\t\t\t\t\t\t...state.burgerIngredients,\r\n\t\t\t\t\t\tcounts: {\r\n\t\t\t\t\t\t\t...state.burgerIngredients.counts,\r\n\t\t\t\t\t\t\t[action.key] : state.burgerIngredients.counts[action.key] - 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n\t\tcase COUNTER_UP:\r\n\t\t\tif (action.typeItem === 'bun' && state.burgerIngredients.counts[action.key] >=2) {\r\n\t\t\t\treturn state; }\r\n\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tburgerIngredients: {\r\n\t\t\t\t\t\t...state.burgerIngredients,\r\n\t\t\t\t\t\tcounts: {\r\n\t\t\t\t\t\t\t...state.burgerIngredients.counts,\r\n\t\t\t\t\t\t\t[action.key] : ( state.burgerIngredients.counts[action.key] || 0 ) + 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\r\n\t\tcase MOVE_INGREDIENT: {\r\n\t\t\tconst contentItems = [...state.burgerIngredients.contentItems];\r\n\t\t\tcontentItems.splice(action.toIndex, 0,contentItems.splice(action.fromIndex,1)[0]);\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tburgerIngredients: {\r\n\t\t\t\t\t...state.burgerIngredients,\r\n\t\t\t\t\tcontentItems: contentItems\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const rootReducer = combineReducers({\r\n\tingr: ingredientsReducer,\r\n\tauth: authReducer,\r\n\torder: orderReducer,\r\n\tmessages: wsReducer\r\n});","import {applyMiddleware, compose, createStore} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { socketMiddleware } from './middleware/socketMiddleware'\r\nimport {rootReducer} from \"./reducers/rootReducer\";\r\nimport * as wsActions from './actions/wsActions';\r\n\r\nconst composeEnhancers =\r\n\ttypeof window === 'object' && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n\t\t? (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\r\n\t\t: compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n\tapplyMiddleware(thunk),\r\n\tapplyMiddleware(socketMiddleware(wsActions))\r\n);\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport {App} from './components/app';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport {store} from './services/store';\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n      <Provider store={store}>\r\n          <App />\r\n      </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close_button\":\"modal_close_button__2MDru\",\"modal_content\":\"modal_modal_content__35UiY\",\"modal_content_caption\":\"modal_modal_content_caption__GcM2G\",\"order_details\":\"modal_order_details__crlI3\",\"identificator_size\":\"modal_identificator_size__bREqk\",\"bottom_text\":\"modal_bottom_text__2oy-x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app_header\":\"app-header_app_header__iU7_h\",\"app_header_in\":\"app-header_app_header_in__Q1tfx\",\"app_header_row\":\"app-header_app_header_row__3vhKb\",\"side\":\"app-header_side__2zQdi\",\"centr\":\"app-header_centr__2v8rU\",\"box1\":\"app-header_box1__ZIC5y\",\"inmenu\":\"app-header_inmenu__3E4J4\",\"inmenu_logo\":\"app-header_inmenu_logo__1X6Um\",\"box3\":\"app-header_box3__1vD0X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"column\":\"burger-constructor_column__3v8op\",\"column_active\":\"burger-constructor_column_active__38-vc\",\"scrollzone\":\"burger-constructor_scrollzone__LEAHq\",\"column_list\":\"burger-constructor_column_list__7NyRn burger-constructor_scrollzone__LEAHq\",\"total\":\"burger-constructor_total__214rL\",\"constructor_active\":\"burger-constructor_constructor_active__3IUUU\",\"constructor_candrop\":\"burger-constructor_constructor_candrop__3k0Lw\",\"list\":\"burger-constructor_list__c7fyG\",\"drop_msg\":\"burger-constructor_drop_msg__ty9E8\",\"no_drop_msg\":\"burger-constructor_no_drop_msg__13rTy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"column\":\"burger_column__2IWyf\",\"scrollzone\":\"burger_scrollzone__FTbc6\",\"fl\":\"burger_fl__2c7fL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close_button\":\"ingredient-details_close_button__NqouU\",\"modal_content\":\"ingredient-details_modal_content__XY8cT\",\"modal_content_caption\":\"ingredient-details_modal_content_caption__1JZ_Q\",\"order_details\":\"ingredient-details_order_details__1Ba_e\",\"product_portal\":\"ingredient-details_product_portal__27Axi\",\"product_energy\":\"ingredient-details_product_energy__sdGwP\",\"w480\":\"ingredient-details_w480__1cRZw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_box\":\"login_login_box__3KyqU\",\"login_fields\":\"login_login_fields__3aUkK\",\"login_text\":\"login_login_text__pNZsa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reg_box\":\"register_reg_box__2DxrP\",\"reg_fields\":\"register_reg_fields__3GBNr\",\"reg_text\":\"register_reg_text__1GG-P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_box\":\"forgot-password_login_box__V8q3x\",\"login_fields\":\"forgot-password_login_fields__3lK6-\",\"login_text\":\"forgot-password_login_text__3skw0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_box\":\"reset-password_login_box__z8eYz\",\"login_fields\":\"reset-password_login_fields__3dLvQ\",\"login_text\":\"reset-password_login_text__3ZtRV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_rect\":\"app_main_rect__1wNMC\",\"main_columns\":\"app_main_columns__35zIG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"product_list\":\"product-list_product_list__-Pump\",\"product_link\":\"product-list_product_link__1eib3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"product\":\"product_product__1uOKm\",\"inn_flex\":\"product_inn_flex__31Rje\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal_overlay\":\"modal-overlay_modal_overlay__2r98i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burger_item\":\"item_burger_item__36mEJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"orders_feed__1TI1x\"};"],"sourceRoot":""}