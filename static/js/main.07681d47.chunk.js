(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={orderPage:"order_orderPage__2aRo1"}},109:function(e,t,n){},12:function(e,t,n){e.exports={profile_main:"profile_profile_main__3JOrN",link:"profile_link__3j86g",profile_col:"profile_profile_col__YK1hc",nav:"profile_nav__1p36o",nav_list:"profile_nav_list__1AEUm",link_active:"profile_link_active__1IsYz",profile_form:"profile_profile_form__3NQ14"}},13:function(e,t,n){e.exports={order:"feed-item_order__2fZs9",header:"feed-item_header__1YfMN",coast:"feed-item_coast__3Cuip",name:"feed-item_name__34Q7q",images:"feed-item_images__2tNuo",imageWrapper:"feed-item_imageWrapper__qtNf0",image:"feed-item_image__34yWv",count:"feed-item_count__55MaW",footer:"feed-item_footer__1BmJS"}},16:function(e,t,n){e.exports={name:"order_name__3anQi",orderWrapper:"order_orderWrapper__20USo",order:"order_order__XhYYx",footer:"order_footer__IV0Vm",orderInfo:"order_orderInfo__3nKrf",orderHeader:"order_orderHeader__3gOC6",imageWrapper:"order_imageWrapper__2wVwr",image:"order_image__5aRu7",info:"order_info__3HpXW",price:"order_price__3Lt02"}},18:function(e,t,n){e.exports={content:"feed_content__3xDpk",feed:"feed_feed__2Rm4t",done:"feed_done__36Pny",feedInfo:"feed_feedInfo__b0HrB",header:"feed_header__PPX2m",statusesWrapper:"feed_statusesWrapper__2V-83",statuses:"feed_statuses__2o49R",statusesColumns:"feed_statusesColumns__2Ffvn",statusesColumn:"feed_statusesColumn__2OnUI"}},189:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"WS_CONNECTION_START",(function(){return jt})),n.d(r,"WS_CONNECTION_CLOSE",(function(){return _t})),n.d(r,"WS_CONNECTION_SUCCESS",(function(){return pt})),n.d(r,"WS_CONNECTION_ERROR",(function(){return mt})),n.d(r,"WS_CONNECTION_CLOSED",(function(){return bt})),n.d(r,"WS_GET_MESSAGE",(function(){return xt})),n.d(r,"WS_SEND_MESSAGE",(function(){return Ot}));var a=n(1),c=n.n(a),s=n(27),i=n.n(s),o=(n(109),n(5)),l=n(69),u=n.n(l),d=n(4),j=n(21),_=n.n(j),p=n(8),m=n(6),b=n(0),x=function(){var e=Object(p.h)().pathname;return Object(b.jsx)("nav",{children:Object(b.jsxs)("div",{className:_.a.side,children:[Object(b.jsxs)("div",{className:_.a.box1,children:[Object(b.jsxs)(m.c,{exact:!0,to:"/",className:_.a.inmenu,children:[Object(b.jsx)(d.BurgerIcon,{type:"/"===e?"primary":"secondary"}),Object(b.jsx)("span",{className:" text text_type_main-default ",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(b.jsxs)(m.c,{exact:!0,to:"/feed",className:_.a.inmenu,children:[Object(b.jsx)(d.BurgerIcon,{type:"/feed"===e?"primary":"secondary"}),Object(b.jsx)("span",{className:" text text_type_main-default ",children:"\u041b\u0435\u043d\u0442\u0430 \u0417\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(b.jsx)("div",{className:_.a.centr,children:Object(b.jsx)(m.c,{exact:!0,to:"/",className:_.a.inmenu_logo,children:Object(b.jsx)(d.Logo,{})})}),Object(b.jsx)("div",{className:_.a.box3,children:Object(b.jsxs)(m.c,{exact:!0,to:"/profile",className:_.a.inmenu,children:[Object(b.jsx)(d.BurgerIcon,{type:"/profile"===e?"primary":"secondary"}),Object(b.jsx)("span",{className:"text text_type_main-default ",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},O=n(45),f=n.n(O),h=n(72),g=n.n(h),v=n(195),y=n(73),N=n.n(y),E=n(19),S=n.n(E),C=n.p+"static/media/close.3e080984.svg",I=n(94),T=n.n(I),k=function(e){return Object(b.jsx)("div",{className:T.a.modal_overlay,onClick:e.onClick})},R=function(e){Object(a.useEffect)((function(){var t=function(t){return"Escape"===t.key&&e.onClose()};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]);var t=Object(b.jsxs)("div",{children:[Object(b.jsx)(k,{onClick:e.onClose}),Object(b.jsxs)("div",{className:S.a.modal_content,onClick:function(e){return e.stopPropagation()},children:[Object(b.jsxs)("div",{className:S.a.modal_content_caption,children:[Object(b.jsx)("span",{className:"text text_type_main-medium",children:e.header}),Object(b.jsx)("img",{src:C,alt:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",className:S.a.close_button,onClick:e.onClose})]}),e.children]})]});return i.a.createPortal(t,document.getElementById("portal"))},w=n.p+"static/media/done.c4e85cae.svg",D=n(36),U=function(){return Object(D.b)()},z=D.c,F=function(){var e=z((function(e){return e.order}))||null;return e&&e.number?Object(b.jsxs)("div",{className:S.a.order_details,children:[Object(b.jsx)("p",{className:"text text_type_digits-large",children:e.number}),Object(b.jsx)("p",{className:S.a.identificator_size+" text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("img",{src:w,alt:"done"}),Object(b.jsxs)("span",{className:S.a.bottom_text+" pt-7 text text_type_main-small",children:[Object(b.jsx)("p",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]}):Object(b.jsx)("div",{className:S.a.order_details,children:Object(b.jsx)("span",{className:S.a.bottom_text+" mt-10 text text_type_main-small",children:Object(b.jsx)("p",{children:"\u0421\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443... \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437..."})})})},W=n(46),L=n.n(W),G=function(){var e=Object(p.g)(),t=e.location.pathname.slice(13),n=z((function(e){return e.ingr.data})),r={},c=Object(a.useState)({}),s=Object(o.a)(c,2),i=s[0],l=s[1],u=e.location.pathname.slice(13);return console.log(u),Object(a.useEffect)((function(){r=n.find((function(e){return e._id===t})),l(r)}),[t,n]),r?Object(b.jsxs)("div",{className:L.a.product_portal,children:[Object(b.jsx)("img",{src:null===i||void 0===i?void 0:i.image,alt:null===i||void 0===i?void 0:i.name,className:L.a.w480}),Object(b.jsx)("span",{className:"text text_type_main-medium",children:null===i||void 0===i?void 0:i.name}),Object(b.jsxs)("div",{className:L.a.product_energy,children:[Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",Object(b.jsx)("br",{}),null===i||void 0===i?void 0:i.calories]}),Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(b.jsx)("br",{}),null===i||void 0===i?void 0:i.proteins]}),Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0416\u0438\u0440\u044b, \u0433",Object(b.jsx)("br",{}),null===i||void 0===i?void 0:i.fat]}),Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(b.jsx)("br",{}),null===i||void 0===i?void 0:i.carbohydrates]})]})]}):Object(b.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442...."})},A=function(e){var t=Object(p.g)(),n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(v.a)({type:"ingredient",item:e.apiData,collect:function(e){return{isDrag:e.isDragging()}}}),l=Object(o.a)(i,2),u=l[0].isDrag,j=l[1],_=u?.5:1,m=z((function(e){return e.ingr.burgerIngredients})),x=m.counts,O=m.bun,f=x&&"undefined"!==typeof x[e.apiData._id]?x[e.apiData._id]:0;f="bun"===e.apiData.type&&f&&O&&e.apiData._id===O._id?2:"bun"===e.apiData.type?0:f;var h=Object(b.jsxs)("div",{className:N.a.product,onClick:function(){return s(!0)},ref:j,style:{opacity:_},children:[Object(b.jsx)("img",{src:e.apiData.image,alt:e.apiData.name}),Object(b.jsxs)("span",{className:N.a.inn_flex,children:[Object(b.jsx)("span",{className:"mr-3",children:e.apiData.price})," ",Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("span",{className:"text text_type_main-small",children:e.apiData.name}),f>0&&Object(b.jsx)(d.Counter,{count:f,size:"default"})]});return Object(b.jsxs)("div",{children:[h,c&&Object(b.jsx)(R,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(e){e&&e.stopPropagation(),s(!1),t.goBack()},children:Object(b.jsx)(G,{})})]})},B=function(e){var t=Object(p.h)();return Object(b.jsxs)("div",{id:e.id,children:[Object(b.jsx)("p",{className:"text text_type_main-medium",ref:e.subRef,children:e.children}),Object(b.jsx)("div",{className:g.a.product_list,children:e.apiData.map((function(e){return Object(b.jsx)(m.b,{to:{pathname:"/ingredients/".concat(e._id),state:{background:t}},className:g.a.product_link,children:Object(b.jsx)(A,{apiData:e})},e._id)}))})]})},P=function(){var e=c.a.useState("bun"),t=Object(o.a)(e,2),n=t[0],r=t[1],s=z((function(e){return e.ingr.data})),i=function(e){console.log(e),r(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},l=s.filter((function(e){return"bun"===e.type&&e})),u=s.filter((function(e){return"main"===e.type&&e})),j=s.filter((function(e){return"sauce"===e.type&&e})),_=Object(a.useRef)(null),p=Object(a.useRef)(null),m=Object(a.useRef)(null),x=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;null===(e=document.querySelector("#".concat(n)))||void 0===e||e.scrollIntoView()}),[n]),Object(b.jsxs)("div",{className:f.a.column,children:[Object(b.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsxs)("div",{className:f.a.fl,children:[Object(b.jsx)(d.Tab,{value:"bun",active:"bun"===n,onClick:i,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(d.Tab,{value:"main",active:"main"===n,onClick:i,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)(d.Tab,{value:"sauce",active:"sauce"===n,onClick:i,children:"\u0421\u043e\u0443\u0441\u044b"})]}),Object(b.jsxs)("div",{className:f.a.scrollzone,ref:_,onScroll:function(){if(_&&p&&m&&x&&_.current&&p.current&&m.current&&x.current){var e=Math.abs(_.current.getBoundingClientRect().top-p.current.getBoundingClientRect().top),t=Math.abs(_.current.getBoundingClientRect().top-m.current.getBoundingClientRect().top),n=Math.abs(_.current.getBoundingClientRect().top-x.current.getBoundingClientRect().top),a=Math.min(e,t,n),c=a===e?"bun":a===t?"sauce":"main";r((function(e){return c===e?e:c}))}},children:[Object(b.jsx)(B,{apiData:l,id:"bun",subRef:p,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(B,{apiData:u,id:"main",subRef:x,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)(B,{apiData:j,id:"sauce",subRef:m,children:"\u0421\u043e\u0443\u0441\u044b"})]})]})},q=n(97),M=n(196),H=n(24),J=n.n(H),V=n(98),K=n.n(V),X=function(e){var t=e.item,n=e.index,r=e.isLocked,c=e.deleteFunc,s=e.moveFunc,i=t._id,l=Object(a.useRef)(null),u=Object(M.a)({accept:"item",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(l.current){var a=e.index,c=n;if(a!==c){var i=null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(i.bottom-i.top)/2,u=t.getClientOffset();if(null!=u){var d=u.y-i.top;if(a<c&&d<o)return;if(a>c&&d>o)return}s(a,c),e.index=c}}}}),j=Object(o.a)(u,2)[1],_=Object(v.a)({type:"item",item:function(){return{id:i,index:n}},collect:function(e){return{isDrag:e.isDragging()}}}),p=Object(o.a)(_,2),m=p[0].isDrag?0:1;return(0,p[1])(j(l)),Object(b.jsxs)("li",{ref:l,className:K.a.burger_item,style:{opacity:m},children:[Object(b.jsx)(d.DragIcon,{type:"primary"}),Object(b.jsx)(d.ConstructorElement,{text:t.name,price:t.price,isLocked:r,thumbnail:t.image,handleClose:c})]})},Q="INGREDIENTS_LOAD",Y="ORDER_LOAD",Z="GET_ORDER",$="GET_ORDER_FAILED",ee="GET_ORDER_SUCCESS",te="CLEAR_ORDER",ne="INGREDIENTS_CHOOSE",re="INGREDIENT_DELETE",ae="COUNTER_UP",ce="COUNTER_DOWN",se="MOVE_INGREDIENT",ie="RESET_CONSTRUCTOR",oe="https://",le="wss://",ue="norma.nomoreparties.space",de=ue+"/api",je={loginUrl:oe+de+"/auth/login",registerUrl:oe+de+"/auth/register",logoutUrl:oe+de+"/auth/logout",tokenUrl:oe+de+"/auth/token",userUrl:oe+de+"/auth/user",feedsUrl:le+ue+"/orders/all",feedsUserUrl:le+ue+"/orders?token="},_e=function(e,t,n){var r=(n=n||{}).expires;if("number"===typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c},pe=function(e){_e(e,"",{expires:-1})};function me(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}var be=function(e){return e.ok?e.json():Promise.reject(e.status)},xe=function(){return fetch(je.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(be)},Oe=function(e,t,n){var r=localStorage.getItem("accessToken");return fetch(e,{method:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+r},body:JSON.stringify(n)})},fe=function(e,t,n){return fetch(e,{method:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+n}})},he=null,ge=function(e){return he?he.then((function(){return e()})):e().then((function(e){return be(e)})).catch((function(t){return t.json().then((function(t){return"jwt expired"===(null===t||void 0===t?void 0:t.message)?(console.log("fetchWithRefreshToken"),he||(he=xe().then((function(e){localStorage.setItem("refreshToken",e.refreshToken);var t=e.accessToken.split("Bearer ")[1];_e("token",t)}))),he.then((function(){return e().then((function(e){return be(e)}))}))):(pe("token"),localStorage.removeItem("refreshToken"),location.reload(),Promise.reject(t))}))}))},ve=function(e){var t,n,r,c=e.onDropHandler,s=U(),i=Object(p.g)(),l=Object(a.useState)(!1),u=Object(o.a)(l,2),j=u[0],_=u[1],m=z((function(e){return e.ingr.burgerIngredients})),x=m.bun,O=m.contentItems,f=localStorage.getItem("refreshToken"),h=Object(M.a)({accept:"ingredient",drop:function(e){c(e)},collect:function(e){return{isHover:e.isOver(),canDrop:e.canDrop()}}}),g=Object(o.a)(h,2),v=g[0].canDrop,y=g[1];v?(n=J.a.drop_msg,t=.5,r=J.a.column_active):(n=J.a.no_drop_msg,t=1,r=J.a.column);var N=Object(a.useCallback)((function(e,t){s({type:se,toIndex:t,fromIndex:e})}),[s]);return Object(b.jsxs)("div",{className:r,ref:y,style:{opacity:t},children:[Object(b.jsx)("div",{className:n,children:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u0437\u0430\u043a\u0430\u0437"}),x&&Object(b.jsx)("div",{className:"ml-15",children:Object(b.jsx)(d.ConstructorElement,{text:x.name+" (\u0412\u0435\u0440\u0445)",isLocked:!0,price:x.price,thumbnail:x.image,type:"top"})}),Object(b.jsx)("div",{className:J.a.list,children:Object(b.jsx)("ul",{children:O&&O.map((function(e,t){return Object(b.jsx)(X,{item:e,isLocked:!1,deleteFunc:function(){console.log(e),s({type:re,id:e.productId}),s({type:ce,key:e._id,typeItem:e.type})},moveFunc:N,index:t},e.productId)}))})}),x&&Object(b.jsx)("div",{className:"ml-15",children:Object(b.jsx)(d.ConstructorElement,{text:x.name+" (\u041d\u0438\u0437)",isLocked:!0,price:x.price,thumbnail:x.image,type:"bottom"})}),Object(b.jsxs)("div",{className:J.a.total,children:[Object(b.jsx)("p",{className:"text text_type_digits-medium",children:function(e,t){var n=e?2*e.price:0;return t&&t.map((function(e){return n+=e.price})),n}(x,O)}),Object(b.jsx)(d.CurrencyIcon,{type:"primary"}),x&&Object(b.jsx)(d.Button,{type:"primary",size:"medium",onClick:function(){if(f&&x){var e,t=[x._id],n=Object(q.a)(O);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r._id)}}catch(c){n.e(c)}finally{n.f()}s((a=t,function(e){fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+me("token")},body:JSON.stringify({ingredients:a})}).then(be).then((function(t){if(t.success){var n=t.order.number;e({type:Y,number:n}),e({type:ie})}})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))})),_(!0)}else i.replace({pathname:"/login"});var a},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),j&&Object(b.jsx)(R,{onClose:function(e){e&&e.stopPropagation(),_(!1),s((function(e){e({type:te})}))},children:Object(b.jsx)(F,{})})]})]})},ye=n(194),Ne=n(102),Ee=n(17),Se=n(2),Ce=n(47),Ie=n.n(Ce),Te="LOGIN",ke="REGISTER_SUCCESS",Re="REGISTER_FAILED",we="LOGOUT",De="REFRESH_TOKEN_REQUEST",Ue="REFRESH_TOKEN_SUCCESS",ze="REFRESH_TOKEN_FAILED",Fe="GET_USER_REQUEST",We="GET_USER_SUCCESS",Le="GET_USER_FAILED",Ge=function(e){return function(t){console.log("registerAction"),function(e){var t=e.email,n=e.password,r=e.name;return fetch(je.registerUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t,password:n,name:r})}).then(be)}(e).then((function(e){if(e&&e.success){var n=e.accessToken.split("Bearer ")[1],r=e.refreshToken;_e("token",n),localStorage.setItem("refreshToken",r),t({type:ke,user:e.user})}else t({type:Re})})).catch((function(e){console.log(e),t({type:Re})}))}},Ae=function(e){return function(t){return console.log("loginAction"),function(e){var t=e.email,n=e.password;return fetch(je.loginUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t,password:n})}).then(be)}(e).then((function(e){if(e&&e.success){var n=e.accessToken.split("Bearer ")[1],r=e.refreshToken;return console.log("loginAction ok"),_e("token",n),localStorage.setItem("refreshToken",r),t({type:Te,user:e.user}),e}console.error(e.message)})).catch((function(e){console.error("Error1: ",e)}))}},Be=function(){return function(e){fetch(je.logoutUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(be).then((function(t){if(t&&t.success)return pe("token"),localStorage.removeItem("refreshToken"),e({type:we}),!0})).catch((function(e){console.error("Error: ",e)}))}},Pe=function(){return function(e){return console.log("getUserAction: "+me("token")),e({type:Fe}),(t=me("token"),console.log("getUserRequest 2"),ge((function(){return fe(je.userUrl,"GET",t)}))).then((function(t){t&&t.success&&e({type:We,user:t.user})})).catch((function(t){console.log("Error3: "),console.log(t),e({type:Le}),e({type:De})}));var t}},qe=function(e){return console.log("-=updateUserAction=-"),function(t){var n;t({type:Fe}),(n={email:e.email,name:e.name,token:me("token")},console.log("updateUserRequest"),ge((function(){return Oe(je.userUrl,"PATCH",n)})).then(be)).then((function(e){e&&e.success?t({type:We,user:e.user}):t({type:Le})})).catch((function(e){t({type:Le})}))}},Me=function(){var e=U(),t=Object(p.g)(),n=Object(p.h)(),r=Object(a.useState)({email:"",password:""}),c=Object(o.a)(r,2),s=c[0],i=c[1],l=function(e){i(Object(Se.a)(Object(Se.a)({},s),{},Object(Ee.a)({},e.target.name,e.target.value)))};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Ie.a.login_box,children:[Object(b.jsx)(d.Logo,{}),Object(b.jsxs)("form",{className:Ie.a.login_fields,onSubmit:function(r){r.preventDefault(),e(Ae(s)).then((function(){var e,r,a,c;console.log((null===(e=n.state)||void 0===e||null===(r=e.from)||void 0===r?void 0:r.pathname)||"/"),t.replace({pathname:(null===(a=n.state)||void 0===a||null===(c=a.from)||void 0===c?void 0:c.pathname)||"/"})}))},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsx)(d.Input,{type:"email",placeholder:"E-mail",onChange:l,name:"email",value:s.email}),Object(b.jsx)(d.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"default",onChange:l,name:"password",value:s.password}),Object(b.jsx)(d.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(b.jsxs)("div",{className:Ie.a.login_text,children:[Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(b.jsx)(m.b,{to:"/register",className:"text text_type_main-default pl-2",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(m.b,{to:"/forgot-password",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})},He=n(48),Je=n.n(He),Ve=function(){var e=U(),t=Object(a.useState)({name:"",email:"",password:""}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=function(e){c(Object(Se.a)(Object(Se.a)({},r),{},Object(Ee.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:Je.a.reg_box,children:[Object(b.jsx)(d.Logo,{}),Object(b.jsxs)("form",{className:Je.a.reg_fields,onSubmit:function(t){t.preventDefault(),e(Ge(r)),console.log(r)},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsx)(d.Input,{name:"name",value:r.name,onChange:s,type:"text",placeholder:"\u0418\u043c\u044f"}),Object(b.jsx)(d.Input,{name:"email",value:r.email,onChange:s,type:"email",placeholder:"E-mail"}),Object(b.jsx)(d.PasswordInput,{onChange:s,value:r.password,name:"password"}),Object(b.jsx)(d.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]}),Object(b.jsx)("div",{className:Je.a.reg_text,children:Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(b.jsx)(m.b,{to:"/login",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},Ke=n(49),Xe=n.n(Ke),Qe=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(p.g)();return z((function(e){return e.auth.authorized}))?(c.replace({pathname:"/"}),null):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Xe.a.login_box,children:[Object(b.jsx)(d.Logo,{}),Object(b.jsxs)("form",{className:Xe.a.login_fields,onSubmit:function(e){e.preventDefault(),fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:n})}).then((function(e){return c.replace({pathname:"/reset-password"}),be(e)})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)(d.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return r(e.target.value)},value:n}),Object(b.jsx)(d.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(b.jsx)("div",{className:Xe.a.login_text,children:Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(m.b,{to:"/login",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},Ye=n(50),Ze=n.n(Ye),$e=function(){var e=c.a.useState(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),s=Object(o.a)(a,2),i=s[0],l=s[1],u=z((function(e){return e.auth.authorized})),j=Object(p.g)();return u?(j.replace({pathname:"/"}),null):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Ze.a.login_box,children:[Object(b.jsx)(d.Logo,{}),Object(b.jsxs)("form",{className:Ze.a.login_fields,onSubmit:function(e){e.preventDefault(),fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:n,token:i})}).then(be).then((function(e){console.log(e)})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)(d.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:n,onChange:function(e){return r(e.target.value)}}),Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:i,onChange:function(e){return l(e.target.value)}}),Object(b.jsx)(d.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(b.jsx)("div",{className:Ze.a.login_text,children:Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(m.b,{to:"/register",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},et=n(12),tt=n.n(et);function nt(){var e=Object(p.h)().pathname,t=U();return Object(b.jsxs)("nav",{className:tt.a.nav_list+" pt-5 mb-20",children:[Object(b.jsx)(m.c,{exact:!0,to:"/profile",className:tt.a.link+" text text_type_main-medium text_color_inactive",activeClassName:tt.a.link_active,children:Object(b.jsx)("span",{className:"ml-2 pu-5 pb-5",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(b.jsx)(m.c,{exact:!0,to:"/profile/orders",className:tt.a.link+" text text_type_main-medium text_color_inactive",activeClassName:tt.a.link_active,children:Object(b.jsx)("span",{className:"ml-2 pu-5 pb-5",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(b.jsx)(m.c,{exact:!0,to:"/login",className:tt.a.link+" text text_type_main-medium text_color_inactive",activeClassName:tt.a.link_active,children:Object(b.jsx)("span",{className:"ml-2 pu-5 pb-5",onClick:function(){t(Be())},children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(b.jsxs)("div",{className:"pt-20",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435"}),"/profile"===e&&Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),"/profile/orders"===e&&Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]})}var rt=n(103),at=["children"],ct=function(e){var t=e.children,n=Object(rt.a)(e,at),r=z((function(e){return e.auth.authorized})),a=Object(p.h)();return r?Object(b.jsx)(p.b,Object(Se.a)(Object(Se.a)({},n),{},{children:t})):Object(b.jsx)(p.a,{to:{pathname:"/login",state:{from:a}}})},st=n(13),it=n.n(st),ot=function(e){var t=new Date,n=new Date(e),r=n.getHours(),a=n.getMinutes();r<10&&(r="0"+r),a<10&&(a="0"+a);t.setHours(0,0,0,0),n.setHours(0,0,0,0);var c=(+t-+n)/864e5;0===c&&(c="\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),1===c&&(c="\u0412\u0447\u0435\u0440\u0430"),c>1&&(c+=" \u0434\u043d. \u043d\u0430\u0437\u0430\u0434");var s=n.getTimezoneOffset()/60;return c+", "+r+":"+a+" i-GMT"+(s>0?s:"+"+-1*s)};function lt(e){var t=Object(p.h)(),n=e.order,r=e.showStatus,c=n.number,s=z((function(e){return e.ingr})).data,i=Object(a.useState)([]),l=Object(o.a)(i,2),u=l[0],j=l[1],_=Object(a.useState)(0),x=Object(o.a)(_,2),O=x[0],f=x[1],h=Object(a.useState)([]),g=Object(o.a)(h,2),v=g[0],y=g[1],N=Object(a.useState)(0),E=Object(o.a)(N,2),S=E[0],C=E[1];Object(a.useEffect)((function(){if(s.length){var e,t=0,r=[],a=!1;null===n||void 0===n||null===(e=n.ingredients)||void 0===e||e.forEach((function(e){var n=s.filter((function(t){return t._id===e}))[0];(null===n||void 0===n?void 0:n.price)&&(r.push(n),"bun"!==n.type||a||(t+=2*n.price,a=!0),"bun"!==n.type&&(t+=n.price))})),f(t),j(r)}}),[s,n.ingredients]);var I;return Object(a.useEffect)((function(){var e=!1,t=[];u.forEach((function(n){"bun"!==n.type||e||(e=!0,t.push(n.image_mobile)),"bun"!==n.type&&t.push(n.image_mobile)})),y(t),C(t.length)}),[u]),Object(b.jsx)(m.b,{to:{pathname:"".concat(t.pathname,"/").concat(c),state:{background:t}},className:it.a.link,children:Object(b.jsxs)("section",{className:it.a.order,children:[Object(b.jsxs)("div",{className:it.a.header,children:[Object(b.jsx)("p",{className:"text text_type_digits-default",children:"#"+n.number}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:ot(n.createdAt)})]}),Object(b.jsxs)("p",{className:it.a.name+" text text_type_main-medium pb-6 pt-6",children:[n.name,Object(b.jsx)("br",{}),r&&Object(b.jsx)("span",{className:"text text_type_main-default",style:{color:"done"===n.status?"#00CCCC":"#FFFFFF"},children:(I=n.status,"done"===I?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"created"===I?"\u0421\u043e\u0437\u0434\u0430\u043d":"pending"===I&&"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f")})]}),Object(b.jsxs)("div",{className:it.a.footer,children:[Object(b.jsx)("div",{className:it.a.images,children:v.map((function(e,t){var n=15*-t;return t<=4?Object(b.jsx)("div",{className:it.a.imageWrapper,style:{left:n,zIndex:100-t},children:Object(b.jsx)("img",{className:it.a.image,src:e,alt:""})},t):5===t&&Object(b.jsxs)("div",{className:it.a.imageWrapper,style:{left:n,zIndex:100-t},children:[Object(b.jsx)("p",{className:it.a.count+" text text_type_digits-default",children:"+"+(S-5+1)}),Object(b.jsx)("img",{className:it.a.image,style:{opacity:.5},src:e,alt:""})]},t)}))}),Object(b.jsxs)("div",{className:it.a.coast,children:[Object(b.jsx)("span",{className:"text text_type_digits-default pr-2",children:O}),Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})},c)}var ut=n(99),dt=n.n(ut),jt="WS_CONNECTION_START",_t="WS_CONNECTION_CLOSE",pt="WS_CONNECTION_SUCCESS",mt="WS_CONNECTION_ERROR",bt="WS_CONNECTION_CLOSED",xt="WS_GET_MESSAGE",Ot="WS_SEND_MESSAGE";function ft(){var e=U(),t=z((function(e){return e.messages})).messages,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],i=me("token"),l="";return i&&(l=i.split(" ")[1]),Object(a.useEffect)((function(){return e({type:jt,payload:je.feedsUserUrl+i}),function(){e({type:bt})}}),[e,l]),Object(a.useEffect)((function(){(null===t||void 0===t?void 0:t.orders)&&s(t.orders)}),[t]),Object(b.jsx)("div",{className:dt.a.feed,children:Boolean(c.length)?c.map((function(e){var t;return!!(null===e||void 0===e||null===(t=e.ingredients)||void 0===t?void 0:t.length)&&Object(b.jsx)(lt,{order:e,showStatus:!0},e._id)})):Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive pt-4",children:"\u0423 \u0412\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})}var ht=function(){var e=U(),t={name:"",email:"",password:""},n=c.a.useState(t),r=Object(o.a)(n,2),s=r[0],i=r[1],l=c.a.useState(t),u=Object(o.a)(l,2),j=u[0],_=u[1],m=z((function(e){return e.auth.user})),x=function(e){var t=e.target;_(Object(Se.a)(Object(Se.a)({},j),{},Object(Ee.a)({},t.name,t.value)))};return Object(a.useEffect)((function(){_(m),i(Object(Se.a)(Object(Se.a)({},m),{password:""}))}),[m]),Object(a.useEffect)((function(){e(Pe())}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:tt.a.profile_main+" pt-20",children:[Object(b.jsx)("div",{className:tt.a.profile_col,children:Object(b.jsx)(nt,{})}),Object(b.jsx)("div",{className:tt.a.profile_col,children:Object(b.jsxs)(p.d,{children:[Object(b.jsx)(p.b,{path:"/profile",exact:!0,children:Object(b.jsxs)("form",{className:tt.a.profile_form,onSubmit:function(t){t.preventDefault(),e(qe(j))},children:[Object(b.jsx)(d.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:x,icon:"EditIcon",value:j.name||"",name:"name",size:"default"}),Object(b.jsx)(d.Input,{type:"text",placeholder:"Email",onChange:x,icon:"EditIcon",name:"email",value:j.email}),Object(b.jsx)(d.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:x,icon:"EditIcon",name:"password",value:j.password||"",size:"default"}),Object(b.jsx)(d.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(b.jsx)(d.Button,{type:"secondary",size:"small",onClick:function(e){e.preventDefault(),_(s)},children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]})}),Object(b.jsx)(ct,{path:"/profile/orders",exact:!0,children:Object(b.jsx)(ft,{})})]})})]})})},gt=n(18),vt=n.n(gt);function yt(){var e=U(),t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(0),i=Object(o.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)([]),j=Object(o.a)(d,2),_=j[0],p=j[1],m=z((function(e){return e.messages})).messages,x=Object(a.useState)([]),O=Object(o.a)(x,2),f=O[0],h=O[1],g=Object(a.useState)([]),v=Object(o.a)(g,2),y=v[0],N=v[1];Object(a.useEffect)((function(){return e({type:jt,payload:je.feedsUrl}),function(){e({type:bt})}}),[e]),Object(a.useEffect)((function(){(null===m||void 0===m?void 0:m.orders)&&(p(m.orders),c(m.total),u(m.totalToday))}),[m]);var E=function(e,t){return e.reduce((function(e,n){return e[e.length-1].length===t&&e.push([]),e[e.length-1].push(n),e}),[[]])};return Object(a.useEffect)((function(){if(_.length){var e=_.filter((function(e){return"created"===e.status})),t=_.filter((function(e){return"done"===e.status}));h(E(e,10)),N(E(t,10))}}),[_]),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"text text_type_main-large pt-4 pb-6",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("section",{className:vt.a.content,children:[Object(b.jsx)("div",{className:vt.a.feed,children:Boolean(_.length)&&_.map((function(e){var t;return!!(null===e||void 0===e||null===(t=e.ingredients)||void 0===t?void 0:t.length)&&Object(b.jsx)(lt,{order:e,showStatus:!1},e._id)}))}),Object(b.jsxs)("div",{className:vt.a.feedInfo+" pl-8",children:[Object(b.jsxs)("div",{className:vt.a.statusesWrapper,children:[Object(b.jsxs)("section",{className:vt.a.statuses,children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("div",{className:vt.a.statusesColumns,children:y.length&&y[0].length?y.map((function(e,t){return Object(b.jsx)("div",{className:vt.a.statusesColumn,children:e.map((function(e){return Object(b.jsx)("span",{className:vt.a.done+" text text_type_digits-default",children:e.number},e.number)}))},t)})):Object(b.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u043d\u0435\u0442"})})]}),Object(b.jsxs)("section",{children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("div",{className:vt.a.statusesColumns,children:f.length&&f[0].length?f.map((function(e,t){return Object(b.jsx)("div",{className:vt.a.statusesColumn,children:e.map((function(e){return Object(b.jsx)("span",{className:"text text_type_digits-default",children:e.number},e.number)}))},t)})):Object(b.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u043d\u0435\u0442"})})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"text text_type_main-medium mt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large",children:r}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large",children:l})]})]})]})]})}var Nt=n(16),Et=n.n(Nt);function St(){var e=U(),t=z((function(e){return e.order})),n=t.order,r=t.orderRequest,c=t.orderFailed,s=z((function(e){return e.ingr})).data,i=Object(p.i)().id,l=Object(a.useState)(null),u=Object(o.a)(l,2),j=u[0],_=u[1],m=Object(a.useState)(0),x=Object(o.a)(m,2),O=x[0],f=x[1];Object(a.useEffect)((function(){e(function(e){return function(t){t({type:Z}),fetch("https://norma.nomoreparties.space/api/orders/"+e,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(be).then((function(e){return console.log(e),t({type:ee,order:e.orders[0]}),e.data})).catch((function(){console.log("errr"),t({type:$})}))}}(i))}),[e,i]);var h;return Object(a.useEffect)((function(){if(s.length){var e,t,r=0,a=0;null===n||void 0===n||null===(e=n.ingredients)||void 0===e||e.forEach((function(e){var t=s.filter((function(t){return t._id===e}))[0];"bun"!==t.type||a||(r+=2*t.price,a=1),"bun"!==t.type&&(r+=t.price)})),f(r);var c=new Set,i=[];null===n||void 0===n||null===(t=n.ingredients)||void 0===t||t.forEach((function(e){return c.add(e)})),c.forEach((function(e){return i.push(s.filter((function(t){return t._id===e}))[0])})),i.forEach((function(e){"bun"===e.type?e.count=2:e.count=null===n||void 0===n?void 0:n.ingredients.filter((function(t){return t===e._id})).length})),_(i)}}),[s,n]),c?Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0437\u0430\u043a\u0430\u0437\u0435"}):r?Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430..."}):n&&Object(b.jsxs)("section",{className:Et.a.orderInfo,children:[Object(b.jsxs)("p",{className:Et.a.orderHeader+" text text_type_digits-default pt-4",children:["#",n.number]}),Object(b.jsx)("p",{className:"text text_type_main-medium pt-10",children:n.name}),Object(b.jsx)("p",{className:"text text_type_main-default pt-2",children:Object(b.jsx)("span",{style:{color:(h="done","done"===h?"#00CCCC":"#FFFFFF")},children:function(e){return"done"===e?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"created"===e?"\u0421\u043e\u0437\u0434\u0430\u043d":"pending"===e&&"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}(n.status)})}),Object(b.jsx)("p",{className:"text text_type_main-medium pt-15 pb-4",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("div",{className:Et.a.orderWrapper+" pr-2",children:Boolean(j)&&(null===j||void 0===j?void 0:j.map((function(e,t){return Object(b.jsxs)("div",{className:Et.a.order+" mt-4 pb-2",children:[Object(b.jsxs)("div",{className:Et.a.info,children:[Object(b.jsx)("div",{className:Et.a.imageWrapper+" mr-4",children:Object(b.jsx)("img",{className:Et.a.image,src:e.image_mobile,alt:""})}),Object(b.jsx)("div",{className:Et.a.name+" text text_type_main-default",children:e.name})]}),Object(b.jsxs)("div",{className:Et.a.price+" text text_type_digits-default",children:[Object(b.jsxs)("span",{className:"pr-2",children:[e.count&&e.count>1&&e.count+" x ",e.price]}),Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]},t)})))}),Object(b.jsxs)("div",{className:Et.a.footer+" mt-10 pr-2 pb-10",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:ot(n.createdAt)}),Object(b.jsxs)("div",{className:Et.a.price+" text text_type_digits-default",children:[Object(b.jsx)("span",{className:"pr-2",children:O}),Object(b.jsx)(d.CurrencyIcon,{type:"primary"})]})]})]})}var Ct=n(100),It=n.n(Ct);function Tt(){return Object(b.jsx)("div",{className:It.a.orderPage,children:Object(b.jsx)(St,{})})}var kt,Rt=function(){var e=function(){var e=Object(p.h)(),t=Object(p.g)(),n=U(),r=Object(a.useState)(!1),c=Object(o.a)(r,2),s=c[0],i=(c[1],function(e){e&&e.stopPropagation(),t.goBack()}),l=("PUSH"===t.action||"REPLACE"===t.action)&&e.state&&e.state.background;Object(a.useEffect)((function(){n((function(e){fetch("https://norma.nomoreparties.space/api/ingredients").then(be).then((function(t){e({type:Q,data:t.data})})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))}))}),[n]);return Object(b.jsxs)("div",{className:u.a.main_rect,children:[Object(b.jsx)(x,{}),Object(b.jsxs)(p.d,{location:l||e,children:[Object(b.jsx)(p.b,{path:["/","/react-burger"],exact:!0,children:Object(b.jsx)("main",{className:u.a.main_columns,children:Object(b.jsxs)(ye.a,{backend:Ne.a,children:[Object(b.jsx)(P,{}),Object(b.jsx)(ve,{onDropHandler:function(e){n({type:ne,item:e}),n({type:ae,key:e._id,typeItem:e.type})}})]})})}),Object(b.jsx)(p.b,{path:"/login",exact:!0,children:Object(b.jsx)(Me,{})}),Object(b.jsx)(p.b,{path:"/register",exact:!0,children:Object(b.jsx)(Ve,{})}),Object(b.jsx)(p.b,{path:"/forgot-password",exact:!0,children:Object(b.jsx)(Qe,{})}),Object(b.jsx)(p.b,{path:"/reset-password",exact:!0,children:Object(b.jsx)($e,{})}),Object(b.jsx)(p.b,{path:"/feed",exact:!0,children:Object(b.jsx)(yt,{})}),Object(b.jsx)(p.b,{path:"/feed/:id",exact:!0,children:Object(b.jsx)(Tt,{})}),Object(b.jsx)(ct,{path:"/profile/orders/:id",exact:!0,children:Object(b.jsx)(Tt,{})}),Object(b.jsx)(ct,{path:"/profile",children:Object(b.jsx)(ht,{})}),Object(b.jsx)(p.b,{path:"/ingredients/:id",exact:!0,children:Object(b.jsx)(G,{})}),Object(b.jsx)(p.b,{children:Object(b.jsx)("h1",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 404: \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})]}),l&&s&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.b,{path:"/ingredients/:id",children:Object(b.jsx)(R,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:i,children:Object(b.jsx)(G,{})})})}),l&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.b,{path:"/feed/:id",children:Object(b.jsx)(R,{onClose:i,children:Object(b.jsx)(St,{})})})}),l&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.b,{path:"/profile/orders/:id",children:Object(b.jsx)(R,{onClose:i,children:Object(b.jsx)(St,{})})})})]})};return Object(b.jsx)(m.a,{children:Object(b.jsx)(e,{})})},wt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Dt=n(20),Ut=n(101),zt=n(51),Ft={data:[],burgerIngredients:{bun:null,contentItems:[],counts:{}},portal:{}},Wt=function(){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",t="",n=0,r=e.length;n<24;++n)t+=e.charAt(Math.floor(Math.random()*r));return t},Lt={login:!1,authorized:!!me("token"),user:{name:"",email:"",password:""},getUserRequest:!1,refreshTokenRequest:!1,tokenIsGood:!1},Gt={number:0,order:null,orderRequest:!1,orderFailed:!1},At={wsConnected:!1,messages:null,error:""},Bt=Object(Dt.b)({ingr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(Se.a)(Object(Se.a)({},e),{},{data:t.data});case ie:return Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Ft.burgerIngredients});case ne:var n=t.item;if("bun"===n.type)return Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Object(Se.a)(Object(Se.a)({},e.burgerIngredients),{},{bun:n})});var r=Object(Se.a)(Object(Se.a)({},n),{},{productId:Wt()});return Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Object(Se.a)(Object(Se.a)({},e.burgerIngredients),{},{contentItems:[].concat(Object(zt.a)(e.burgerIngredients.contentItems),[r])})});case re:return Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Object(Se.a)(Object(Se.a)({},e.burgerIngredients),{},{contentItems:Object(zt.a)(e.burgerIngredients.contentItems).filter((function(e){return e.productId!==t.id}))})});case ce:return"bun"!==t.typeItem?Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Object(Se.a)(Object(Se.a)({},e.burgerIngredients),{},{counts:Object(Se.a)(Object(Se.a)({},e.burgerIngredients.counts),{},Object(Ee.a)({},t.key,e.burgerIngredients.counts[t.key]-1))})}):e;case ae:return"bun"===t.typeItem&&e.burgerIngredients.counts[t.key]>=2?e:Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Object(Se.a)(Object(Se.a)({},e.burgerIngredients),{},{counts:Object(Se.a)(Object(Se.a)({},e.burgerIngredients.counts),{},Object(Ee.a)({},t.key,(e.burgerIngredients.counts[t.key]||0)+1))})});case se:var a=Object(zt.a)(e.burgerIngredients.contentItems);return a.splice(t.toIndex,0,a.splice(t.fromIndex,1)[0]),Object(Se.a)(Object(Se.a)({},e),{},{burgerIngredients:Object(Se.a)(Object(Se.a)({},e.burgerIngredients),{},{contentItems:a})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:case Re:return Object(Se.a)({},e);case Te:var n,r;return Object(Se.a)(Object(Se.a)({},e),{},{login:!0,authorized:!0,user:Object(Se.a)(Object(Se.a)({},e.user),{},{name:null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.name,email:null===t||void 0===t||null===(r=t.user)||void 0===r?void 0:r.email})});case we:return Object(Se.a)(Object(Se.a)({},e),{},{login:!1,authorized:!1,user:{name:"",email:"",password:""}});case Fe:return Object(Se.a)(Object(Se.a)({},e),{},{getUserRequest:!0,user:Object(Se.a)({},e.user)});case We:var a,c;return Object(Se.a)(Object(Se.a)({},e),{},{getUserRequest:!1,authorized:!0,user:{name:null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a.name,email:null===t||void 0===t||null===(c=t.user)||void 0===c?void 0:c.email,password:""}});case Le:return Object(Se.a)(Object(Se.a)({},e),{},{getUserRequest:!1,authorized:!1,user:{name:"",email:"",password:""}});case De:return Object(Se.a)(Object(Se.a)({},e),{},{refreshTokenRequest:!0,tokenIsGood:!1});case Ue:return Object(Se.a)(Object(Se.a)({},e),{},{authorized:!0,refreshTokenRequest:!1,tokenIsGood:!0});case ze:return Object(Se.a)(Object(Se.a)({},e),{},{authorized:!1,refreshTokenRequest:!1,tokenIsGood:!1});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(Se.a)(Object(Se.a)({},e),{},{number:t.number});case Z:return Object(Se.a)(Object(Se.a)({},e),{},{orderRequest:!0,orderFailed:!1});case ee:return Object(Se.a)(Object(Se.a)({},e),{},{order:t.order,orderRequest:!1});case $:return Object(Se.a)(Object(Se.a)({},e),{},{orderFailed:!0,orderRequest:!1});case te:return Object(Se.a)(Object(Se.a)({},e),{},{number:0,order:null});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return Object(Se.a)(Object(Se.a)({},e),{},{error:null,wsConnected:!0});case mt:return Object(Se.a)(Object(Se.a)({},e),{},{error:t.payload,wsConnected:!1});case bt:return{messages:null,error:null,wsConnected:!1};case xt:return Object(Se.a)(Object(Se.a)({},e),{},{error:null,messages:t.payload});default:return e}}}),Pt=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Dt.c)(Object(Dt.a)(Ut.a),Object(Dt.a)((kt=r,function(e){var t=null;return function(n){return function(r){var a=e.dispatch;if(r.type===kt.WS_CONNECTION_START&&(t=new WebSocket(r.payload)),t&&(t.onopen=function(e){a({type:kt.WS_CONNECTION_SUCCESS,payload:e})},t.onerror=function(e){a({type:kt.WS_CONNECTION_ERROR,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);a({type:kt.WS_GET_MESSAGE,payload:n})},t.onclose=function(e){a({type:kt.WS_CONNECTION_CLOSED,payload:e})},r.type===kt.WS_SEND_MESSAGE)){var c=r.payload;t.send(JSON.stringify(c))}n(r)}}}))),qt=Object(Dt.d)(Bt,Pt);i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(D.a,{store:qt,children:Object(b.jsx)(Rt,{})})}),document.getElementById("root")),wt()},19:function(e,t,n){e.exports={close_button:"modal_close_button__2MDru",modal_content:"modal_modal_content__35UiY",modal_content_caption:"modal_modal_content_caption__GcM2G",order_details:"modal_order_details__crlI3",identificator_size:"modal_identificator_size__bREqk",bottom_text:"modal_bottom_text__2oy-x"}},21:function(e,t,n){e.exports={app_header:"app-header_app_header__iU7_h",app_header_in:"app-header_app_header_in__Q1tfx",app_header_row:"app-header_app_header_row__3vhKb",side:"app-header_side__2zQdi",centr:"app-header_centr__2v8rU",box1:"app-header_box1__ZIC5y",inmenu:"app-header_inmenu__3E4J4",inmenu_logo:"app-header_inmenu_logo__1X6Um",box3:"app-header_box3__1vD0X"}},24:function(e,t,n){e.exports={column:"burger-constructor_column__3v8op",column_active:"burger-constructor_column_active__38-vc",scrollzone:"burger-constructor_scrollzone__LEAHq",column_list:"burger-constructor_column_list__7NyRn burger-constructor_scrollzone__LEAHq",total:"burger-constructor_total__214rL",constructor_active:"burger-constructor_constructor_active__3IUUU",constructor_candrop:"burger-constructor_constructor_candrop__3k0Lw",list:"burger-constructor_list__c7fyG",drop_msg:"burger-constructor_drop_msg__ty9E8",no_drop_msg:"burger-constructor_no_drop_msg__13rTy"}},45:function(e,t,n){e.exports={column:"burger_column__2IWyf",scrollzone:"burger_scrollzone__FTbc6",fl:"burger_fl__2c7fL"}},46:function(e,t,n){e.exports={close_button:"ingredient-details_close_button__NqouU",modal_content:"ingredient-details_modal_content__XY8cT",modal_content_caption:"ingredient-details_modal_content_caption__1JZ_Q",order_details:"ingredient-details_order_details__1Ba_e",product_portal:"ingredient-details_product_portal__27Axi",product_energy:"ingredient-details_product_energy__sdGwP",w480:"ingredient-details_w480__1cRZw"}},47:function(e,t,n){e.exports={login_box:"login_login_box__3KyqU",login_fields:"login_login_fields__3aUkK",login_text:"login_login_text__pNZsa"}},48:function(e,t,n){e.exports={reg_box:"register_reg_box__2DxrP",reg_fields:"register_reg_fields__3GBNr",reg_text:"register_reg_text__1GG-P"}},49:function(e,t,n){e.exports={login_box:"forgot-password_login_box__V8q3x",login_fields:"forgot-password_login_fields__3lK6-",login_text:"forgot-password_login_text__3skw0"}},50:function(e,t,n){e.exports={login_box:"reset-password_login_box__z8eYz",login_fields:"reset-password_login_fields__3dLvQ",login_text:"reset-password_login_text__3ZtRV"}},69:function(e,t,n){e.exports={main_rect:"app_main_rect__1wNMC",main_columns:"app_main_columns__35zIG"}},72:function(e,t,n){e.exports={product_list:"product-list_product_list__-Pump",product_link:"product-list_product_link__1eib3"}},73:function(e,t,n){e.exports={product:"product_product__1uOKm",inn_flex:"product_inn_flex__31Rje"}},94:function(e,t,n){e.exports={modal_overlay:"modal-overlay_modal_overlay__2r98i"}},98:function(e,t,n){e.exports={burger_item:"item_burger_item__36mEJ"}},99:function(e,t,n){e.exports={feed:"orders_feed__1TI1x"}}},[[189,1,2]]]);
//# sourceMappingURL=main.07681d47.chunk.js.map