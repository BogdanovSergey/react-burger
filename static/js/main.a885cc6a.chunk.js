(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={orderPage:"order_orderPage__2aRo1"}},109:function(e,t,n){},12:function(e,t,n){e.exports={profile_main:"profile_profile_main__3JOrN",link:"profile_link__3j86g",profile_col:"profile_profile_col__YK1hc",nav:"profile_nav__1p36o",nav_list:"profile_nav_list__1AEUm",link_active:"profile_link_active__1IsYz",profile_form:"profile_profile_form__3NQ14"}},13:function(e,t,n){e.exports={order:"feed-item_order__2fZs9",header:"feed-item_header__1YfMN",coast:"feed-item_coast__3Cuip",name:"feed-item_name__34Q7q",images:"feed-item_images__2tNuo",imageWrapper:"feed-item_imageWrapper__qtNf0",image:"feed-item_image__34yWv",count:"feed-item_count__55MaW",footer:"feed-item_footer__1BmJS"}},16:function(e,t,n){e.exports={name:"order_name__3anQi",orderWrapper:"order_orderWrapper__20USo",order:"order_order__XhYYx",footer:"order_footer__IV0Vm",orderInfo:"order_orderInfo__3nKrf",orderHeader:"order_orderHeader__3gOC6",imageWrapper:"order_imageWrapper__2wVwr",image:"order_image__5aRu7",info:"order_info__3HpXW",price:"order_price__3Lt02"}},18:function(e,t,n){e.exports={close_button:"modal_close_button__2MDru",modal_content:"modal_modal_content__35UiY",modal_content_caption:"modal_modal_content_caption__GcM2G",order_details:"modal_order_details__crlI3",identificator_size:"modal_identificator_size__bREqk",bottom_text:"modal_bottom_text__2oy-x",done_btn:"modal_done_btn__1f-RJ"}},189:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"WS_CONNECTION_START",(function(){return dt})),n.d(r,"WS_CONNECTION_CLOSE",(function(){return ut})),n.d(r,"WS_CONNECTION_SUCCESS",(function(){return jt})),n.d(r,"WS_CONNECTION_ERROR",(function(){return _t})),n.d(r,"WS_CONNECTION_CLOSED",(function(){return pt})),n.d(r,"WS_GET_MESSAGE",(function(){return mt})),n.d(r,"WS_SEND_MESSAGE",(function(){return bt}));var a=n(1),c=n.n(a),s=n(27),i=n.n(s),o=(n(109),n(5)),l=n(69),d=n.n(l),u=n(4),j=n(21),_=n.n(j),p=n(8),m=n(6),b=n(0),x=function(){var e=Object(p.h)().pathname;return Object(b.jsx)("nav",{children:Object(b.jsxs)("div",{className:_.a.side,children:[Object(b.jsxs)("div",{className:_.a.box1,children:[Object(b.jsxs)(m.c,{exact:!0,to:"/",className:_.a.inmenu,children:[Object(b.jsx)(u.BurgerIcon,{type:"/"===e?"primary":"secondary"}),Object(b.jsx)("span",{className:" text text_type_main-default ",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(b.jsxs)(m.c,{exact:!0,to:"/feed",className:_.a.inmenu,children:[Object(b.jsx)(u.BurgerIcon,{type:"/feed"===e?"primary":"secondary"}),Object(b.jsx)("span",{className:" text text_type_main-default ",children:"\u041b\u0435\u043d\u0442\u0430 \u0417\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(b.jsx)("div",{className:_.a.centr,children:Object(b.jsx)(m.c,{exact:!0,to:"/",className:_.a.inmenu_logo,children:Object(b.jsx)(u.Logo,{})})}),Object(b.jsx)("div",{className:_.a.box3,children:Object(b.jsxs)(m.c,{exact:!0,to:"/profile",className:_.a.inmenu,children:[Object(b.jsx)(u.BurgerIcon,{type:"/profile"===e?"primary":"secondary"}),Object(b.jsx)("span",{className:"text text_type_main-default ",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},O=n(45),f=n.n(O),h=n(72),g=n.n(h),v=n(195),y=n(73),N=n.n(y),E=n(18),S=n.n(E),C=n(94),I=n.n(C),T=function(e){return Object(b.jsx)("div",{className:I.a.modal_overlay,onClick:e.onClick})},k=function(e){Object(a.useEffect)((function(){var t=function(t){return"Escape"===t.key&&e.onClose()};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]);var t=Object(b.jsxs)("div",{children:[Object(b.jsx)(T,{onClick:e.onClose}),Object(b.jsxs)("div",{className:S.a.modal_content,onClick:function(e){return e.stopPropagation()},children:[Object(b.jsxs)("div",{className:S.a.modal_content_caption,children:[Object(b.jsx)("span",{className:"text text_type_main-medium",children:e.header}),Object(b.jsx)("div",{className:S.a.close_button,title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",children:Object(b.jsx)(u.CloseIcon,{type:"primary",onClick:e.onClose})})]}),e.children]})]});return i.a.createPortal(t,document.getElementById("portal"))},R=n(36),w=function(){return Object(R.b)()},D=R.c,U=function(){var e=D((function(e){return e.order}))||null;return e&&e.number?Object(b.jsxs)("div",{className:S.a.order_details,children:[Object(b.jsx)("p",{className:"text text_type_digits-large",children:e.number}),Object(b.jsx)("p",{className:S.a.identificator_size+" text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("div",{className:S.a.done_btn}),Object(b.jsxs)("span",{className:S.a.bottom_text+" pt-7 text text_type_main-small",children:[Object(b.jsx)("p",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]}):Object(b.jsx)("div",{className:S.a.order_details,children:Object(b.jsx)("span",{className:S.a.bottom_text+" mt-10 text text_type_main-small",children:Object(b.jsx)("p",{children:"\u0421\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443... \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437..."})})})},z=n(46),F=n.n(z),W=function(){var e=Object(p.g)().location.pathname.slice(13),t=D((function(e){return e.ingr.data})),n={},r=Object(a.useState)({}),c=Object(o.a)(r,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){n=t.find((function(t){return t._id===e})),i(n)}),[e,t]),n?Object(b.jsxs)("div",{className:F.a.product_portal,children:[Object(b.jsx)("img",{src:null===s||void 0===s?void 0:s.image,alt:null===s||void 0===s?void 0:s.name,className:F.a.w480}),Object(b.jsx)("span",{className:"text text_type_main-medium",children:null===s||void 0===s?void 0:s.name}),Object(b.jsxs)("div",{className:F.a.product_energy,children:[Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",Object(b.jsx)("br",{}),null===s||void 0===s?void 0:s.calories]}),Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0411\u0435\u043b\u043a\u0438, \u0433",Object(b.jsx)("br",{}),null===s||void 0===s?void 0:s.proteins]}),Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0416\u0438\u0440\u044b, \u0433",Object(b.jsx)("br",{}),null===s||void 0===s?void 0:s.fat]}),Object(b.jsxs)("span",{className:"text text_type_main-small text_color_inactive",children:["\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",Object(b.jsx)("br",{}),null===s||void 0===s?void 0:s.carbohydrates]})]})]}):Object(b.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442...."})},L=function(e){var t=Object(p.g)(),n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(v.a)({type:"ingredient",item:e.apiData,collect:function(e){return{isDrag:e.isDragging()}}}),l=Object(o.a)(i,2),d=l[0].isDrag,j=l[1],_=d?.5:1,m=D((function(e){return e.ingr.burgerIngredients})),x=m.counts,O=m.bun,f=x&&"undefined"!==typeof x[e.apiData._id]?x[e.apiData._id]:0;f="bun"===e.apiData.type&&f&&O&&e.apiData._id===O._id?2:"bun"===e.apiData.type?0:f;var h=Object(b.jsxs)("div",{className:N.a.product,onClick:function(){return s(!0)},ref:j,style:{opacity:_},children:[Object(b.jsx)("img",{src:e.apiData.image,alt:e.apiData.name}),Object(b.jsxs)("span",{className:N.a.inn_flex,children:[Object(b.jsx)("span",{className:"mr-3",children:e.apiData.price})," ",Object(b.jsx)(u.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("span",{className:"text text_type_main-small",children:e.apiData.name}),f>0&&Object(b.jsx)(u.Counter,{count:f,size:"default"})]});return Object(b.jsxs)("div",{children:[h,c&&Object(b.jsx)(k,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(e){e&&e.stopPropagation(),s(!1),t.goBack()},children:Object(b.jsx)(W,{})})]})},G=function(e){var t=Object(p.h)();return Object(b.jsxs)("div",{id:e.id,children:[Object(b.jsx)("p",{className:"text text_type_main-medium",ref:e.subRef,children:e.children}),Object(b.jsx)("div",{className:g.a.product_list,children:e.apiData.map((function(e){return Object(b.jsx)(m.b,{to:{pathname:"/ingredients/".concat(e._id),state:{background:t}},className:g.a.product_link,children:Object(b.jsx)(L,{apiData:e})},e._id)}))})]})},A=function(){var e=c.a.useState("bun"),t=Object(o.a)(e,2),n=t[0],r=t[1],s=D((function(e){return e.ingr.data})),i=function(e){r(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},l=s.filter((function(e){return"bun"===e.type&&e})),d=s.filter((function(e){return"main"===e.type&&e})),j=s.filter((function(e){return"sauce"===e.type&&e})),_=Object(a.useRef)(null),p=Object(a.useRef)(null),m=Object(a.useRef)(null),x=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e;null===(e=document.querySelector("#".concat(n)))||void 0===e||e.scrollIntoView()}),[n]),Object(b.jsxs)("div",{className:f.a.column,children:[Object(b.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsxs)("div",{className:f.a.fl,children:[Object(b.jsx)(u.Tab,{value:"bun",active:"bun"===n,onClick:i,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(u.Tab,{value:"main",active:"main"===n,onClick:i,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)(u.Tab,{value:"sauce",active:"sauce"===n,onClick:i,children:"\u0421\u043e\u0443\u0441\u044b"})]}),Object(b.jsxs)("div",{className:f.a.scrollzone,ref:_,onScroll:function(){if(_&&p&&m&&x&&_.current&&p.current&&m.current&&x.current){var e=Math.abs(_.current.getBoundingClientRect().top-p.current.getBoundingClientRect().top),t=Math.abs(_.current.getBoundingClientRect().top-m.current.getBoundingClientRect().top),n=Math.abs(_.current.getBoundingClientRect().top-x.current.getBoundingClientRect().top),a=Math.min(e,t,n),c=a===e?"bun":a===t?"sauce":"main";r((function(e){return c===e?e:c}))}},children:[Object(b.jsx)(G,{apiData:l,id:"bun",subRef:p,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)(G,{apiData:d,id:"main",subRef:x,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)(G,{apiData:j,id:"sauce",subRef:m,children:"\u0421\u043e\u0443\u0441\u044b"})]})]})},B=n(97),P=n(196),q=n(24),M=n.n(q),H=n(98),J=n.n(H),V=function(e){var t=e.item,n=e.index,r=e.isLocked,c=e.deleteFunc,s=e.moveFunc,i=t._id,l=Object(a.useRef)(null),d=Object(P.a)({accept:"item",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(l.current){var a=e.index,c=n;if(a!==c){var i=null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(i.bottom-i.top)/2,d=t.getClientOffset();if(null!=d){var u=d.y-i.top;if(a<c&&u<o)return;if(a>c&&u>o)return}s(a,c),e.index=c}}}}),j=Object(o.a)(d,2)[1],_=Object(v.a)({type:"item",item:function(){return{id:i,index:n}},collect:function(e){return{isDrag:e.isDragging()}}}),p=Object(o.a)(_,2),m=p[0].isDrag?0:1;return(0,p[1])(j(l)),Object(b.jsxs)("li",{ref:l,className:J.a.burger_item,style:{opacity:m},children:[Object(b.jsx)(u.DragIcon,{type:"primary"}),Object(b.jsx)(u.ConstructorElement,{text:t.name,price:t.price,isLocked:r,thumbnail:t.image,handleClose:c})]})},K="INGREDIENTS_LOAD",X="ORDER_LOAD",Q="GET_ORDER",Y="GET_ORDER_FAILED",Z="GET_ORDER_SUCCESS",$="CLEAR_ORDER",ee="INGREDIENTS_CHOOSE",te="INGREDIENT_DELETE",ne="COUNTER_UP",re="COUNTER_DOWN",ae="MOVE_INGREDIENT",ce="RESET_CONSTRUCTOR",se="https://",ie="wss://",oe="norma.nomoreparties.space",le=oe+"/api",de={loginUrl:se+le+"/auth/login",registerUrl:se+le+"/auth/register",logoutUrl:se+le+"/auth/logout",tokenUrl:se+le+"/auth/token",userUrl:se+le+"/auth/user",feedsUrl:ie+oe+"/orders/all",feedsUserUrl:ie+oe+"/orders?token="},ue=function(e,t,n){var r=(n=n||{}).expires;if("number"===typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in n){c+="; "+s;var i=n[s];!0!==i&&(c+="="+i)}document.cookie=c},je=function(e){ue(e,"",{expires:-1})};function _e(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):""}var pe=function(e){return e.ok?e.json():Promise.reject(e.status)},me=function(){return fetch(de.tokenUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(pe)},be=function(e,t,n){var r=localStorage.getItem("accessToken");return fetch(e,{method:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+r},body:JSON.stringify(n)})},xe=function(e,t,n){return fetch(e,{method:t,headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+n}})},Oe=null,fe=function(e){return Oe?Oe.then((function(){return e()})):e().then((function(e){return pe(e)})).catch((function(t){return t.json().then((function(t){return"jwt expired"===(null===t||void 0===t?void 0:t.message)?(console.log("fetchWithRefreshToken"),Oe||(Oe=me().then((function(e){localStorage.setItem("refreshToken",e.refreshToken);var t=e.accessToken.split("Bearer ")[1];ue("token",t)}))),Oe.then((function(){return e().then((function(e){return pe(e)}))}))):(je("token"),localStorage.removeItem("refreshToken"),location.reload(),Promise.reject(t))}))}))},he=function(e){var t,n,r,c=e.onDropHandler,s=w(),i=Object(p.g)(),l=Object(a.useState)(!1),d=Object(o.a)(l,2),j=d[0],_=d[1],m=D((function(e){return e.ingr.burgerIngredients})),x=m.bun,O=m.contentItems,f=localStorage.getItem("refreshToken"),h=Object(P.a)({accept:"ingredient",drop:function(e){c(e)},collect:function(e){return{isHover:e.isOver(),canDrop:e.canDrop()}}}),g=Object(o.a)(h,2),v=g[0].canDrop,y=g[1];v?(n=M.a.drop_msg,t=.5,r=M.a.column_active):(n=M.a.no_drop_msg,t=1,r=M.a.column);var N=Object(a.useCallback)((function(e,t){s({type:ae,toIndex:t,fromIndex:e})}),[s]);return Object(b.jsxs)("div",{className:r,ref:y,style:{opacity:t},children:[Object(b.jsx)("div",{className:n,children:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u0437\u0430\u043a\u0430\u0437"}),x&&Object(b.jsx)("div",{className:"ml-15",children:Object(b.jsx)(u.ConstructorElement,{text:x.name+" (\u0412\u0435\u0440\u0445)",isLocked:!0,price:x.price,thumbnail:x.image,type:"top"})}),Object(b.jsx)("div",{className:M.a.list,children:Object(b.jsx)("ul",{children:O&&O.map((function(e,t){return Object(b.jsx)(V,{item:e,isLocked:!1,deleteFunc:function(){console.log(e),s({type:te,id:e.productId}),s({type:re,key:e._id,typeItem:e.type})},moveFunc:N,index:t},e.productId)}))})}),x&&Object(b.jsx)("div",{className:"ml-15",children:Object(b.jsx)(u.ConstructorElement,{text:x.name+" (\u041d\u0438\u0437)",isLocked:!0,price:x.price,thumbnail:x.image,type:"bottom"})}),Object(b.jsxs)("div",{className:M.a.total,children:[Object(b.jsx)("p",{className:"text text_type_digits-medium",children:function(e,t){var n=e?2*e.price:0;return t&&t.map((function(e){return n+=e.price})),n}(x,O)}),Object(b.jsx)(u.CurrencyIcon,{type:"primary"}),x&&Object(b.jsx)(u.Button,{type:"primary",size:"medium",onClick:function(){if(f&&x){var e,t=[x._id],n=Object(B.a)(O);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r._id)}}catch(c){n.e(c)}finally{n.f()}s((a=t,function(e){fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+_e("token")},body:JSON.stringify({ingredients:a})}).then(pe).then((function(t){if(t.success){var n=t.order.number;e({type:X,number:n}),e({type:ce})}})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))})),_(!0)}else i.replace({pathname:"/login"});var a},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),j&&Object(b.jsx)(k,{onClose:function(e){e&&e.stopPropagation(),_(!1),s((function(e){e({type:$})}))},children:Object(b.jsx)(U,{})})]})]})},ge=n(194),ve=n(102),ye=n(17),Ne=n(2),Ee=n(47),Se=n.n(Ee),Ce="LOGIN",Ie="REGISTER_SUCCESS",Te="REGISTER_FAILED",ke="LOGOUT",Re="REFRESH_TOKEN_REQUEST",we="REFRESH_TOKEN_SUCCESS",De="REFRESH_TOKEN_FAILED",Ue="GET_USER_REQUEST",ze="GET_USER_SUCCESS",Fe="GET_USER_FAILED",We=function(e){return function(t){console.log("registerAction"),function(e){var t=e.email,n=e.password,r=e.name;return fetch(de.registerUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t,password:n,name:r})}).then(pe)}(e).then((function(e){if(e&&e.success){var n=e.accessToken.split("Bearer ")[1],r=e.refreshToken;ue("token",n),localStorage.setItem("refreshToken",r),t({type:Ie,user:e.user})}else t({type:Te})})).catch((function(e){console.log(e),t({type:Te})}))}},Le=function(e){return function(t){return function(e){var t=e.email,n=e.password;return fetch(de.loginUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:t,password:n})}).then(pe)}(e).then((function(e){if(e&&e.success){var n=e.accessToken.split("Bearer ")[1],r=e.refreshToken;return console.log("loginAction ok"),ue("token",n),localStorage.setItem("refreshToken",r),t({type:Ce,user:e.user}),e}console.error(e.message)})).catch((function(e){console.error("Error1: ",e)}))}},Ge=function(){return function(e){fetch(de.logoutUrl,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(pe).then((function(t){if(t&&t.success)return je("token"),localStorage.removeItem("refreshToken"),e({type:ke}),!0})).catch((function(e){console.error("Error: ",e)}))}},Ae=function(){return function(e){return console.log("getUserAction: "+_e("token")),e({type:Ue}),(t=_e("token"),console.log("getUserRequest 2"),fe((function(){return xe(de.userUrl,"GET",t)}))).then((function(t){t&&t.success&&e({type:ze,user:t.user})})).catch((function(t){console.log("Error3: "),console.log(t),e({type:Fe}),e({type:Re})}));var t}},Be=function(e){return console.log("-=updateUserAction=-"),function(t){var n;t({type:Ue}),(n={email:e.email,name:e.name,token:_e("token")},console.log("updateUserRequest"),fe((function(){return be(de.userUrl,"PATCH",n)})).then(pe)).then((function(e){e&&e.success?t({type:ze,user:e.user}):t({type:Fe})})).catch((function(e){t({type:Fe})}))}},Pe=function(){var e=w(),t=Object(p.g)(),n=Object(p.h)(),r=Object(a.useState)({email:"",password:""}),c=Object(o.a)(r,2),s=c[0],i=c[1],l=function(e){i(Object(Ne.a)(Object(Ne.a)({},s),{},Object(ye.a)({},e.target.name,e.target.value)))};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Se.a.login_box,children:[Object(b.jsx)(u.Logo,{}),Object(b.jsxs)("form",{className:Se.a.login_fields,onSubmit:function(r){r.preventDefault(),e(Le(s)).then((function(){var e,r,a,c;console.log((null===(e=n.state)||void 0===e||null===(r=e.from)||void 0===r?void 0:r.pathname)||"/"),t.replace({pathname:(null===(a=n.state)||void 0===a||null===(c=a.from)||void 0===c?void 0:c.pathname)||"/"})}))},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsx)(u.Input,{type:"email",placeholder:"E-mail",onChange:l,name:"email",value:s.email}),Object(b.jsx)(u.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"default",onChange:l,name:"password",value:s.password}),Object(b.jsx)(u.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(b.jsxs)("div",{className:Se.a.login_text,children:[Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(b.jsx)(m.b,{to:"/register",className:"text text_type_main-default pl-2",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(m.b,{to:"/forgot-password",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})})},qe=n(48),Me=n.n(qe),He=function(){var e=w(),t=Object(a.useState)({name:"",email:"",password:""}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=function(e){c(Object(Ne.a)(Object(Ne.a)({},r),{},Object(ye.a)({},e.target.name,e.target.value)))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:Me.a.reg_box,children:[Object(b.jsx)(u.Logo,{}),Object(b.jsxs)("form",{className:Me.a.reg_fields,onSubmit:function(t){t.preventDefault(),e(We(r)),console.log(r)},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsx)(u.Input,{name:"name",value:r.name,onChange:s,type:"text",placeholder:"\u0418\u043c\u044f"}),Object(b.jsx)(u.Input,{name:"email",value:r.email,onChange:s,type:"email",placeholder:"E-mail"}),Object(b.jsx)(u.PasswordInput,{onChange:s,value:r.password,name:"password"}),Object(b.jsx)(u.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})]}),Object(b.jsx)("div",{className:Me.a.reg_text,children:Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(b.jsx)(m.b,{to:"/login",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},Je=n(49),Ve=n.n(Je),Ke=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(p.g)();return D((function(e){return e.auth.authorized}))?(c.replace({pathname:"/"}),null):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Ve.a.login_box,children:[Object(b.jsx)(u.Logo,{}),Object(b.jsxs)("form",{className:Ve.a.login_fields,onSubmit:function(e){e.preventDefault(),fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:n})}).then((function(e){return c.replace({pathname:"/reset-password"}),pe(e)})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)(u.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",onChange:function(e){return r(e.target.value)},value:n}),Object(b.jsx)(u.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(b.jsx)("div",{className:Ve.a.login_text,children:Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(m.b,{to:"/login",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},Xe=n(50),Qe=n.n(Xe),Ye=function(){var e=c.a.useState(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=c.a.useState(""),s=Object(o.a)(a,2),i=s[0],l=s[1],d=D((function(e){return e.auth.authorized})),j=Object(p.g)();return d?(j.replace({pathname:"/"}),null):Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Qe.a.login_box,children:[Object(b.jsx)(u.Logo,{}),Object(b.jsxs)("form",{className:Qe.a.login_fields,onSubmit:function(e){e.preventDefault(),fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:n,token:i})}).then(pe).then((function(e){console.log(e)})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))},children:[Object(b.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)(u.Input,{type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:n,onChange:function(e){return r(e.target.value)}}),Object(b.jsx)(u.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:i,onChange:function(e){return l(e.target.value)}}),Object(b.jsx)(u.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(b.jsx)("div",{className:Qe.a.login_text,children:Object(b.jsxs)("span",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(b.jsx)(m.b,{to:"/register",className:"text text_type_main-default pl-2",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})})},Ze=n(12),$e=n.n(Ze);function et(){var e=Object(p.h)().pathname,t=w();return Object(b.jsxs)("nav",{className:$e.a.nav_list+" pt-5 mb-20",children:[Object(b.jsx)(m.c,{exact:!0,to:"/profile",className:$e.a.link+" text text_type_main-medium text_color_inactive",activeClassName:$e.a.link_active,children:Object(b.jsx)("span",{className:"ml-2 pu-5 pb-5",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(b.jsx)(m.c,{exact:!0,to:"/profile/orders",className:$e.a.link+" text text_type_main-medium text_color_inactive",activeClassName:$e.a.link_active,children:Object(b.jsx)("span",{className:"ml-2 pu-5 pb-5",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(b.jsx)(m.c,{exact:!0,to:"/login",className:$e.a.link+" text text_type_main-medium text_color_inactive",activeClassName:$e.a.link_active,children:Object(b.jsx)("span",{className:"ml-2 pu-5 pb-5",onClick:function(){t(Ge())},children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(b.jsxs)("div",{className:"pt-20",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435"}),"/profile"===e&&Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),"/profile/orders"===e&&Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]})}var tt=n(103),nt=["children"],rt=function(e){var t=e.children,n=Object(tt.a)(e,nt),r=D((function(e){return e.auth.authorized})),a=Object(p.h)();return r?Object(b.jsx)(p.b,Object(Ne.a)(Object(Ne.a)({},n),{},{children:t})):Object(b.jsx)(p.a,{to:{pathname:"/login",state:{from:a}}})},at=n(13),ct=n.n(at),st=function(e){var t=new Date,n=new Date(e),r=n.getHours(),a=n.getMinutes();r<10&&(r="0"+r),a<10&&(a="0"+a);t.setHours(0,0,0,0),n.setHours(0,0,0,0);var c=(+t-+n)/864e5;0===c&&(c="\u0421\u0435\u0433\u043e\u0434\u043d\u044f"),1===c&&(c="\u0412\u0447\u0435\u0440\u0430"),c>1&&(c+=" \u0434\u043d. \u043d\u0430\u0437\u0430\u0434");var s=n.getTimezoneOffset()/60;return c+", "+r+":"+a+" i-GMT"+(s>0?s:"+"+-1*s)};function it(e){var t=Object(p.h)(),n=e.order,r=e.showStatus,c=n.number,s=D((function(e){return e.ingr})).data,i=Object(a.useState)([]),l=Object(o.a)(i,2),d=l[0],j=l[1],_=Object(a.useState)(0),x=Object(o.a)(_,2),O=x[0],f=x[1],h=Object(a.useState)([]),g=Object(o.a)(h,2),v=g[0],y=g[1],N=Object(a.useState)(0),E=Object(o.a)(N,2),S=E[0],C=E[1];Object(a.useEffect)((function(){if(s.length){var e,t=0,r=[],a=!1;null===n||void 0===n||null===(e=n.ingredients)||void 0===e||e.forEach((function(e){var n=s.filter((function(t){return t._id===e}))[0];(null===n||void 0===n?void 0:n.price)&&(r.push(n),"bun"!==n.type||a||(t+=2*n.price,a=!0),"bun"!==n.type&&(t+=n.price))})),f(t),j(r)}}),[s,n.ingredients]);var I;return Object(a.useEffect)((function(){var e=!1,t=[];d.forEach((function(n){"bun"!==n.type||e||(e=!0,t.push(n.image_mobile)),"bun"!==n.type&&t.push(n.image_mobile)})),y(t),C(t.length)}),[d]),Object(b.jsx)(m.b,{to:{pathname:"".concat(t.pathname,"/").concat(c),state:{background:t}},className:ct.a.link,children:Object(b.jsxs)("section",{className:ct.a.order,children:[Object(b.jsxs)("div",{className:ct.a.header,children:[Object(b.jsx)("p",{className:"text text_type_digits-default",children:"#"+n.number}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:st(n.createdAt)})]}),Object(b.jsxs)("p",{className:ct.a.name+" text text_type_main-medium pb-6 pt-6",children:[n.name,Object(b.jsx)("br",{}),r&&Object(b.jsx)("span",{className:"text text_type_main-default",style:{color:"done"===n.status?"#00CCCC":"#FFFFFF"},children:(I=n.status,"done"===I?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"created"===I?"\u0421\u043e\u0437\u0434\u0430\u043d":"pending"===I&&"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f")})]}),Object(b.jsxs)("div",{className:ct.a.footer,children:[Object(b.jsx)("div",{className:ct.a.images,children:v.map((function(e,t){var n=15*-t;return t<=4?Object(b.jsx)("div",{className:ct.a.imageWrapper,style:{left:n,zIndex:100-t},children:Object(b.jsx)("img",{className:ct.a.image,src:e,alt:""})},t):5===t&&Object(b.jsxs)("div",{className:ct.a.imageWrapper,style:{left:n,zIndex:100-t},children:[Object(b.jsx)("p",{className:ct.a.count+" text text_type_digits-default",children:"+"+(S-5+1)}),Object(b.jsx)("img",{className:ct.a.image,style:{opacity:.5},src:e,alt:""})]},t)}))}),Object(b.jsxs)("div",{className:ct.a.coast,children:[Object(b.jsx)("span",{className:"text text_type_digits-default pr-2",children:O}),Object(b.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})},c)}var ot=n(99),lt=n.n(ot),dt="WS_CONNECTION_START",ut="WS_CONNECTION_CLOSE",jt="WS_CONNECTION_SUCCESS",_t="WS_CONNECTION_ERROR",pt="WS_CONNECTION_CLOSED",mt="WS_GET_MESSAGE",bt="WS_SEND_MESSAGE";function xt(){var e=w(),t=D((function(e){return e.messages})).messages,n=Object(a.useState)([]),r=Object(o.a)(n,2),c=r[0],s=r[1],i=_e("token"),l="";return i&&(l=i.split(" ")[1]),Object(a.useEffect)((function(){return e({type:dt,payload:de.feedsUserUrl+i}),function(){e({type:pt})}}),[e,l]),Object(a.useEffect)((function(){(null===t||void 0===t?void 0:t.orders)&&s(t.orders)}),[t]),Object(b.jsx)("div",{className:lt.a.feed,children:Boolean(c.length)?c.map((function(e){var t;return!!(null===e||void 0===e||null===(t=e.ingredients)||void 0===t?void 0:t.length)&&Object(b.jsx)(it,{order:e,showStatus:!0},e._id)})):Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive pt-4",children:"\u0423 \u0412\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})}var Ot=function(){var e=w(),t={name:"",email:"",password:""},n=c.a.useState(t),r=Object(o.a)(n,2),s=r[0],i=r[1],l=c.a.useState(t),d=Object(o.a)(l,2),j=d[0],_=d[1],m=D((function(e){return e.auth.user})),x=function(e){var t=e.target;_(Object(Ne.a)(Object(Ne.a)({},j),{},Object(ye.a)({},t.name,t.value)))};return Object(a.useEffect)((function(){_(m),i(Object(Ne.a)(Object(Ne.a)({},m),{password:""}))}),[m]),Object(a.useEffect)((function(){e(Ae())}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:$e.a.profile_main+" pt-20",children:[Object(b.jsx)("div",{className:$e.a.profile_col,children:Object(b.jsx)(et,{})}),Object(b.jsx)("div",{className:$e.a.profile_col,children:Object(b.jsxs)(p.d,{children:[Object(b.jsx)(p.b,{path:"/profile",exact:!0,children:Object(b.jsxs)("form",{className:$e.a.profile_form,onSubmit:function(t){t.preventDefault(),e(Be(j))},children:[Object(b.jsx)(u.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:x,icon:"EditIcon",value:j.name||"",name:"name",size:"default"}),Object(b.jsx)(u.Input,{type:"text",placeholder:"Email",onChange:x,icon:"EditIcon",name:"email",value:j.email}),Object(b.jsx)(u.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:x,icon:"EditIcon",name:"password",value:j.password||"",size:"default"}),Object(b.jsx)(u.Button,{type:"primary",size:"small",children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(b.jsx)(u.Button,{type:"secondary",size:"small",onClick:function(e){e.preventDefault(),_(s)},children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]})}),Object(b.jsx)(rt,{path:"/profile/orders",exact:!0,children:Object(b.jsx)(xt,{})})]})})]})})},ft=n(19),ht=n.n(ft);function gt(){var e=w(),t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(0),i=Object(o.a)(s,2),l=i[0],d=i[1],u=Object(a.useState)([]),j=Object(o.a)(u,2),_=j[0],p=j[1],m=D((function(e){return e.messages})).messages,x=Object(a.useState)([]),O=Object(o.a)(x,2),f=O[0],h=O[1],g=Object(a.useState)([]),v=Object(o.a)(g,2),y=v[0],N=v[1];Object(a.useEffect)((function(){return e({type:dt,payload:de.feedsUrl}),function(){e({type:pt})}}),[e]),Object(a.useEffect)((function(){(null===m||void 0===m?void 0:m.orders)&&(p(m.orders),c(m.total),d(m.totalToday))}),[m]);var E=function(e,t){return e.reduce((function(e,n){return e[e.length-1].length===t&&e.push([]),e[e.length-1].push(n),e}),[[]])};return Object(a.useEffect)((function(){if(_.length){var e=_.filter((function(e){return"created"===e.status})),t=_.filter((function(e){return"done"===e.status}));h(E(e,10)),N(E(t,10))}}),[_]),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"text text_type_main-large pt-4 pb-6",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("section",{className:ht.a.content,children:[Object(b.jsx)("div",{className:ht.a.feed,children:Boolean(_.length)&&_.map((function(e){var t;return!!(null===e||void 0===e||null===(t=e.ingredients)||void 0===t?void 0:t.length)&&Object(b.jsx)(it,{order:e,showStatus:!1},e._id)}))}),Object(b.jsxs)("div",{className:ht.a.feedInfo+" pl-8",children:[Object(b.jsxs)("div",{className:ht.a.statusesWrapper,children:[Object(b.jsxs)("section",{className:ht.a.statuses,children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("div",{className:ht.a.statusesColumns,children:y.length&&y[0].length?y.map((function(e,t){return Object(b.jsx)("div",{className:ht.a.statusesColumn,children:e.map((function(e){return Object(b.jsx)("span",{className:ht.a.done+" text text_type_digits-default",children:e.number},e.number)}))},t)})):Object(b.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u043d\u0435\u0442"})})]}),Object(b.jsxs)("section",{children:[Object(b.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("div",{className:ht.a.statusesColumns,children:f.length&&f[0].length?f.map((function(e,t){return Object(b.jsx)("div",{className:ht.a.statusesColumn,children:e.map((function(e){return Object(b.jsx)("span",{className:"text text_type_digits-default",children:e.number},e.number)}))},t)})):Object(b.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u043d\u0435\u0442"})})]})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"text text_type_main-medium mt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large",children:r}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large",children:l})]})]})]})]})}var vt=n(16),yt=n.n(vt);function Nt(){var e=w(),t=D((function(e){return e.order})),n=t.order,r=t.orderRequest,c=t.orderFailed,s=D((function(e){return e.ingr})).data,i=Object(p.i)().id,l=Object(a.useState)(null),d=Object(o.a)(l,2),j=d[0],_=d[1],m=Object(a.useState)(0),x=Object(o.a)(m,2),O=x[0],f=x[1];Object(a.useEffect)((function(){e(function(e){return function(t){t({type:Q}),fetch("https://norma.nomoreparties.space/api/orders/"+e,{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8"}}).then(pe).then((function(e){return console.log(e),t({type:Z,order:e.orders[0]}),e.data})).catch((function(){console.log("errr"),t({type:Y})}))}}(i))}),[e,i]);var h;return Object(a.useEffect)((function(){if(s.length){var e,t,r=0,a=0;null===n||void 0===n||null===(e=n.ingredients)||void 0===e||e.forEach((function(e){var t=s.filter((function(t){return t._id===e}))[0];"bun"!==t.type||a||(r+=2*t.price,a=1),"bun"!==t.type&&(r+=t.price)})),f(r);var c=new Set,i=[];null===n||void 0===n||null===(t=n.ingredients)||void 0===t||t.forEach((function(e){return c.add(e)})),c.forEach((function(e){return i.push(s.filter((function(t){return t._id===e}))[0])})),i.forEach((function(e){"bun"===e.type?e.count=2:e.count=null===n||void 0===n?void 0:n.ingredients.filter((function(t){return t===e._id})).length})),_(i)}}),[s,n]),c?Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u0437\u0430\u043a\u0430\u0437\u0435"}):r?Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430..."}):n&&Object(b.jsxs)("section",{className:yt.a.orderInfo,children:[Object(b.jsxs)("p",{className:yt.a.orderHeader+" text text_type_digits-default pt-4",children:["#",n.number]}),Object(b.jsx)("p",{className:"text text_type_main-medium pt-10",children:n.name}),Object(b.jsx)("p",{className:"text text_type_main-default pt-2",children:Object(b.jsx)("span",{style:{color:(h="done","done"===h?"#00CCCC":"#FFFFFF")},children:function(e){return"done"===e?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"created"===e?"\u0421\u043e\u0437\u0434\u0430\u043d":"pending"===e&&"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}(n.status)})}),Object(b.jsx)("p",{className:"text text_type_main-medium pt-15 pb-4",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("div",{className:yt.a.orderWrapper+" pr-2",children:Boolean(j)&&(null===j||void 0===j?void 0:j.map((function(e,t){return Object(b.jsxs)("div",{className:yt.a.order+" mt-4 pb-2",children:[Object(b.jsxs)("div",{className:yt.a.info,children:[Object(b.jsx)("div",{className:yt.a.imageWrapper+" mr-4",children:Object(b.jsx)("img",{className:yt.a.image,src:e.image_mobile,alt:""})}),Object(b.jsx)("div",{className:yt.a.name+" text text_type_main-default",children:e.name})]}),Object(b.jsxs)("div",{className:yt.a.price+" text text_type_digits-default",children:[Object(b.jsxs)("span",{className:"pr-2",children:[e.count&&e.count>1&&e.count+" x ",e.price]}),Object(b.jsx)(u.CurrencyIcon,{type:"primary"})]})]},t)})))}),Object(b.jsxs)("div",{className:yt.a.footer+" mt-10 pr-2 pb-10",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:st(n.createdAt)}),Object(b.jsxs)("div",{className:yt.a.price+" text text_type_digits-default",children:[Object(b.jsx)("span",{className:"pr-2",children:O}),Object(b.jsx)(u.CurrencyIcon,{type:"primary"})]})]})]})}var Et=n(100),St=n.n(Et);function Ct(){return Object(b.jsx)("div",{className:St.a.orderPage,children:Object(b.jsx)(Nt,{})})}var It,Tt=function(){var e=function(){var e=Object(p.h)(),t=Object(p.g)(),n=w(),r=Object(a.useState)(!1),c=Object(o.a)(r,2),s=c[0],i=(c[1],function(e){e&&e.stopPropagation(),t.goBack()}),l=("PUSH"===t.action||"REPLACE"===t.action)&&e.state&&e.state.background;Object(a.useEffect)((function(){n((function(e){fetch("https://norma.nomoreparties.space/api/ingredients").then(pe).then((function(t){e({type:K,data:t.data})})).catch((function(e){console.log(e),alert("Error "+e+" while connecting to Api")}))}))}),[n]);return Object(b.jsxs)("div",{className:d.a.main_rect,children:[Object(b.jsx)(x,{}),Object(b.jsxs)(p.d,{location:l||e,children:[Object(b.jsx)(p.b,{path:["/","/react-burger"],exact:!0,children:Object(b.jsx)("main",{className:d.a.main_columns,children:Object(b.jsxs)(ge.a,{backend:ve.a,children:[Object(b.jsx)(A,{}),Object(b.jsx)(he,{onDropHandler:function(e){n({type:ee,item:e}),n({type:ne,key:e._id,typeItem:e.type})}})]})})}),Object(b.jsx)(p.b,{path:"/login",exact:!0,children:Object(b.jsx)(Pe,{})}),Object(b.jsx)(p.b,{path:"/register",exact:!0,children:Object(b.jsx)(He,{})}),Object(b.jsx)(p.b,{path:"/forgot-password",exact:!0,children:Object(b.jsx)(Ke,{})}),Object(b.jsx)(p.b,{path:"/reset-password",exact:!0,children:Object(b.jsx)(Ye,{})}),Object(b.jsx)(p.b,{path:"/feed",exact:!0,children:Object(b.jsx)(gt,{})}),Object(b.jsx)(p.b,{path:"/feed/:id",exact:!0,children:Object(b.jsx)(Ct,{})}),Object(b.jsx)(rt,{path:"/profile/orders/:id",exact:!0,children:Object(b.jsx)(Ct,{})}),Object(b.jsx)(rt,{path:"/profile",children:Object(b.jsx)(Ot,{})}),Object(b.jsx)(p.b,{path:"/ingredients/:id",exact:!0,children:Object(b.jsx)(W,{})}),Object(b.jsx)(p.b,{children:Object(b.jsx)("h1",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 404: \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})})]}),l&&s&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.b,{path:"/ingredients/:id",children:Object(b.jsx)(k,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:i,children:Object(b.jsx)(W,{})})})}),l&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.b,{path:"/feed/:id",children:Object(b.jsx)(k,{onClose:i,children:Object(b.jsx)(Nt,{})})})}),l&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(p.b,{path:"/profile/orders/:id",children:Object(b.jsx)(k,{onClose:i,children:Object(b.jsx)(Nt,{})})})})]})};return Object(b.jsx)(m.a,{children:Object(b.jsx)(e,{})})},kt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Rt=n(20),wt=n(101),Dt=n(51),Ut={data:[],burgerIngredients:{bun:null,contentItems:[],counts:{}},portal:{}},zt=function(){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",t="",n=0,r=e.length;n<24;++n)t+=e.charAt(Math.floor(Math.random()*r));return t},Ft={login:!1,authorized:!!_e("token"),user:{name:"",email:"",password:""},getUserRequest:!1,refreshTokenRequest:!1,tokenIsGood:!1},Wt={number:0,order:null,orderRequest:!1,orderFailed:!1},Lt={wsConnected:!1,messages:null,error:""},Gt=Object(Rt.b)({ingr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(Ne.a)(Object(Ne.a)({},e),{},{data:t.data});case ce:return Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Ut.burgerIngredients});case ee:var n=t.item;if("bun"===n.type)return Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients),{},{bun:n})});var r=Object(Ne.a)(Object(Ne.a)({},n),{},{productId:zt()});return Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients),{},{contentItems:[].concat(Object(Dt.a)(e.burgerIngredients.contentItems),[r])})});case te:return Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients),{},{contentItems:Object(Dt.a)(e.burgerIngredients.contentItems).filter((function(e){return e.productId!==t.id}))})});case re:return"bun"!==t.typeItem?Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients),{},{counts:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients.counts),{},Object(ye.a)({},t.key,e.burgerIngredients.counts[t.key]-1))})}):e;case ne:return"bun"===t.typeItem&&e.burgerIngredients.counts[t.key]>=2?e:Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients),{},{counts:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients.counts),{},Object(ye.a)({},t.key,(e.burgerIngredients.counts[t.key]||0)+1))})});case ae:var a=Object(Dt.a)(e.burgerIngredients.contentItems);return a.splice(t.toIndex,0,a.splice(t.fromIndex,1)[0]),Object(Ne.a)(Object(Ne.a)({},e),{},{burgerIngredients:Object(Ne.a)(Object(Ne.a)({},e.burgerIngredients),{},{contentItems:a})});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:case Te:return Object(Ne.a)({},e);case Ce:var n,r;return Object(Ne.a)(Object(Ne.a)({},e),{},{login:!0,authorized:!0,user:Object(Ne.a)(Object(Ne.a)({},e.user),{},{name:null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.name,email:null===t||void 0===t||null===(r=t.user)||void 0===r?void 0:r.email})});case ke:return Object(Ne.a)(Object(Ne.a)({},e),{},{login:!1,authorized:!1,user:{name:"",email:"",password:""}});case Ue:return Object(Ne.a)(Object(Ne.a)({},e),{},{getUserRequest:!0,user:Object(Ne.a)({},e.user)});case ze:var a,c;return Object(Ne.a)(Object(Ne.a)({},e),{},{getUserRequest:!1,authorized:!0,user:{name:null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a.name,email:null===t||void 0===t||null===(c=t.user)||void 0===c?void 0:c.email,password:""}});case Fe:return Object(Ne.a)(Object(Ne.a)({},e),{},{getUserRequest:!1,authorized:!1,user:{name:"",email:"",password:""}});case Re:return Object(Ne.a)(Object(Ne.a)({},e),{},{refreshTokenRequest:!0,tokenIsGood:!1});case we:return Object(Ne.a)(Object(Ne.a)({},e),{},{authorized:!0,refreshTokenRequest:!1,tokenIsGood:!0});case De:return Object(Ne.a)(Object(Ne.a)({},e),{},{authorized:!1,refreshTokenRequest:!1,tokenIsGood:!1});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(Ne.a)(Object(Ne.a)({},e),{},{number:t.number});case Q:return Object(Ne.a)(Object(Ne.a)({},e),{},{orderRequest:!0,orderFailed:!1});case Z:return Object(Ne.a)(Object(Ne.a)({},e),{},{order:t.order,orderRequest:!1});case Y:return Object(Ne.a)(Object(Ne.a)({},e),{},{orderFailed:!0,orderRequest:!1});case $:return Object(Ne.a)(Object(Ne.a)({},e),{},{number:0,order:null});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jt:return Object(Ne.a)(Object(Ne.a)({},e),{},{error:null,wsConnected:!0});case _t:return Object(Ne.a)(Object(Ne.a)({},e),{},{error:t.payload,wsConnected:!1});case pt:return{messages:null,error:null,wsConnected:!1};case mt:return Object(Ne.a)(Object(Ne.a)({},e),{},{error:null,messages:t.payload});default:return e}}}),At=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Rt.c)(Object(Rt.a)(wt.a),Object(Rt.a)((It=r,function(e){var t=null;return function(n){return function(r){var a=e.dispatch;if(r.type===It.WS_CONNECTION_START&&(t=new WebSocket(r.payload)),t&&(t.onopen=function(e){a({type:It.WS_CONNECTION_SUCCESS,payload:e})},t.onerror=function(e){a({type:It.WS_CONNECTION_ERROR,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);a({type:It.WS_GET_MESSAGE,payload:n})},t.onclose=function(e){a({type:It.WS_CONNECTION_CLOSED,payload:e})},r.type===It.WS_SEND_MESSAGE)){var c=r.payload;t.send(JSON.stringify(c))}n(r)}}}))),Bt=Object(Rt.d)(Gt,At);i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(R.a,{store:Bt,children:Object(b.jsx)(Tt,{})})}),document.getElementById("root")),kt()},19:function(e,t,n){e.exports={content:"feed_content__3xDpk",feed:"feed_feed__2Rm4t",done:"feed_done__36Pny",feedInfo:"feed_feedInfo__b0HrB",header:"feed_header__PPX2m",statusesWrapper:"feed_statusesWrapper__2V-83",statuses:"feed_statuses__2o49R",statusesColumns:"feed_statusesColumns__2Ffvn",statusesColumn:"feed_statusesColumn__2OnUI"}},21:function(e,t,n){e.exports={app_header:"app-header_app_header__iU7_h",app_header_in:"app-header_app_header_in__Q1tfx",app_header_row:"app-header_app_header_row__3vhKb",side:"app-header_side__2zQdi",centr:"app-header_centr__2v8rU",box1:"app-header_box1__ZIC5y",inmenu:"app-header_inmenu__3E4J4",inmenu_logo:"app-header_inmenu_logo__1X6Um",box3:"app-header_box3__1vD0X"}},24:function(e,t,n){e.exports={column:"burger-constructor_column__3v8op",column_active:"burger-constructor_column_active__38-vc",scrollzone:"burger-constructor_scrollzone__LEAHq",column_list:"burger-constructor_column_list__7NyRn burger-constructor_scrollzone__LEAHq",total:"burger-constructor_total__214rL",constructor_active:"burger-constructor_constructor_active__3IUUU",constructor_candrop:"burger-constructor_constructor_candrop__3k0Lw",list:"burger-constructor_list__c7fyG",drop_msg:"burger-constructor_drop_msg__ty9E8",no_drop_msg:"burger-constructor_no_drop_msg__13rTy"}},45:function(e,t,n){e.exports={column:"burger_column__2IWyf",scrollzone:"burger_scrollzone__FTbc6",fl:"burger_fl__2c7fL"}},46:function(e,t,n){e.exports={close_button:"ingredient-details_close_button__NqouU",modal_content:"ingredient-details_modal_content__XY8cT",modal_content_caption:"ingredient-details_modal_content_caption__1JZ_Q",order_details:"ingredient-details_order_details__1Ba_e",product_portal:"ingredient-details_product_portal__27Axi",product_energy:"ingredient-details_product_energy__sdGwP",w480:"ingredient-details_w480__1cRZw"}},47:function(e,t,n){e.exports={login_box:"login_login_box__3KyqU",login_fields:"login_login_fields__3aUkK",login_text:"login_login_text__pNZsa"}},48:function(e,t,n){e.exports={reg_box:"register_reg_box__2DxrP",reg_fields:"register_reg_fields__3GBNr",reg_text:"register_reg_text__1GG-P"}},49:function(e,t,n){e.exports={login_box:"forgot-password_login_box__V8q3x",login_fields:"forgot-password_login_fields__3lK6-",login_text:"forgot-password_login_text__3skw0"}},50:function(e,t,n){e.exports={login_box:"reset-password_login_box__z8eYz",login_fields:"reset-password_login_fields__3dLvQ",login_text:"reset-password_login_text__3ZtRV"}},69:function(e,t,n){e.exports={main_rect:"app_main_rect__1wNMC",main_columns:"app_main_columns__35zIG"}},72:function(e,t,n){e.exports={product_list:"product-list_product_list__-Pump",product_link:"product-list_product_link__1eib3"}},73:function(e,t,n){e.exports={product:"product_product__1uOKm",inn_flex:"product_inn_flex__31Rje"}},94:function(e,t,n){e.exports={modal_overlay:"modal-overlay_modal_overlay__2r98i"}},98:function(e,t,n){e.exports={burger_item:"item_burger_item__36mEJ"}},99:function(e,t,n){e.exports={feed:"orders_feed__1TI1x"}}},[[189,1,2]]]);
//# sourceMappingURL=main.a885cc6a.chunk.js.map